2024-04-20 00:52:23,326 [functions.py:log_start()] - --------------------KlipperScreen Log Start--------------------
2024-04-20 00:52:23,326 [functions.py:log_start()] - KlipperScreen Version: v0.3.6-88-g6eefe9d
2024-04-20 00:52:23,327 [functions.py:log_start()] - Python version: 3.10
2024-04-20 00:52:23,516 [config.py:get_config_file_location()] - Passed config (-c): /home/tier/KlipperScreen.conf
2024-04-20 00:52:23,519 [config.py:__init__()] - Config path location: /home/tier/printer_data/config/KlipperScreen.conf
2024-04-20 00:52:23,538 [config.py:log_config()] -  ===== Config File =====

=======================
2024-04-20 00:52:23,543 [config.py:__init__()] - ====== Saved Def ======

[main]
move_speed_xy = 195
print_sort_dir = date_desc

[graph Printer]
extruder = False

=======================
2024-04-20 00:52:23,544 [config.py:__init__()] - Configured printers: [
  {
    "Printer": {
      "moonraker_host": "127.0.0.1",
      "moonraker_port": "7125",
      "moonraker_api_key": ""
    }
  }
]
2024-04-20 00:52:23,684 [config.py:create_translations()] - Selected lang: None OS lang: en_US
2024-04-20 00:52:23,685 [config.py:install_language()] - Using system lang
2024-04-20 00:52:23,685 [config.py:install_language()] - Using lang en
2024-04-20 00:52:23,718 [screen.py:__init__()] - Screen resolution: 800x480
2024-04-20 00:52:23,722 [KlippyGtk.py:__init__()] - Font size: 16.6 (medium)
2024-04-20 00:52:24,405 [screen.py:set_screenblanking_timeout()] - Changing screen blanking to: 3600
2024-04-20 00:52:24,420 [screen.py:set_screenblanking_timeout()] - Using DPMS
2024-04-20 00:52:24,432 [screen.py:initial_connection()] - Default printer: None
2024-04-20 00:52:24,432 [screen.py:connect_printer()] - Connecting to printer: Printer
2024-04-20 00:52:24,433 [screen.py:_load_panel()] - Loading panel: splash_screen
2024-04-20 00:52:24,526 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 00:52:24,542 [KlippyWebsocket.py:connect()] - Attempting to connect
2024-04-20 00:52:24,573 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 00:52:24,597 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/access/oneshot_token
2024-04-20 00:52:24,599 [KlippyWebsocket.py:connect()] - Starting websocket thread
2024-04-20 00:52:24,618 [_logging.py:info()] - Websocket connected
2024-04-20 00:52:24,619 [KlippyWebsocket.py:on_open()] - Moonraker Websocket Open
2024-04-20 00:52:24,698 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 00:52:24,717 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 00:52:24,720 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'octoprint_compat', 'authorization', 'timelapse', 'history'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames'], 'warnings': [], 'websocket_count': 1, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 00:52:24,737 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 00:52:24,739 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 00:52:24,770 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/printer/info
2024-04-20 00:52:28,255 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 00:52:28,277 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 00:52:28,279 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'ready', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'octoprint_compat', 'authorization', 'timelapse', 'history'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 1, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 00:52:28,294 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 00:52:28,296 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 00:52:28,313 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 00:52:28,502 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 00:52:28,509 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '0.000', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '5.0'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': 0.0, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': 5.0, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 00:52:28,521 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 00:52:28,521 [printer.py:reinit()] - # Extruders: 2
2024-04-20 00:52:28,521 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 00:52:28,521 [printer.py:reinit()] - # Fans: 1
2024-04-20 00:52:28,522 [printer.py:reinit()] - # Output pins: 3
2024-04-20 00:52:28,522 [printer.py:reinit()] - # Leds: 0
2024-04-20 00:52:28,547 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 00:52:28,550 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 00:52:28,760 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 00:52:28,783 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 00:52:28,815 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 00:52:28,831 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 00:52:28,833 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 00:52:28,834 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 00:52:28,834 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 00:52:28,835 [screen.py:init_printer()] - Printer initialized
2024-04-20 00:52:28,836 [printer.py:change_state()] - Changing state from 'disconnected' to 'ready'
2024-04-20 00:52:28,836 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 00:52:28,842 [screen.py:_load_panel()] - Loading panel: main_menu
2024-04-20 00:52:28,980 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 00:52:29,000 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 00:52:29,011 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 00:52:29,023 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 00:52:29,036 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 00:52:29,104 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 00:54:36,921 [screen.py:_load_panel()] - Loading panel: gcode_macros
2024-04-20 00:54:36,997 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > gcode_macros
2024-04-20 00:54:37,102 [gcode_macros.py:add_gcode_macro()] - gcode not found in T1
{'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}
2024-04-20 00:54:37,158 [gcode_macros.py:add_gcode_macro()] - gcode not found in T10
{'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}
2024-04-20 00:54:39,580 [screen_panel.py:load_menu()] - loading menu options
2024-04-20 00:54:42,432 [screen_panel.py:switch_config_option()] - [displayed_macros Printer] BEDPID toggled False
2024-04-20 00:54:42,646 [screen_panel.py:switch_config_option()] - [displayed_macros Printer] GET_TIMELAPSE_SETUP toggled False
2024-04-20 00:54:42,944 [screen_panel.py:switch_config_option()] - [displayed_macros Printer] MIX toggled False
2024-04-20 00:54:46,403 [screen_panel.py:unload_menu()] - self.menu: ['macros_menu', 'options_menu']
2024-04-20 00:54:46,621 [gcode_macros.py:add_gcode_macro()] - gcode not found in T1
{'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}
2024-04-20 00:54:46,674 [gcode_macros.py:add_gcode_macro()] - gcode not found in T10
{'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}
2024-04-20 00:54:51,274 [keyboard.py:__init__()] - Keyboard es
2024-04-20 00:54:51,613 [screen.py:update_size()] - Size changed: 800x480
2024-04-20 00:54:53,600 [KlippyWebsocket.py:emergency_stop()] - Sending printer.emergency_stop
2024-04-20 00:54:53,716 [printer.py:change_state()] - Changing state from 'ready' to 'shutdown'
2024-04-20 00:54:53,717 [printer.py:change_state()] - Adding callback for state: shutdown
2024-04-20 00:54:53,743 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 00:54:53,811 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 00:55:25,857 [KlippyWebsocket.py:restart_firmware()] - Sending printer.firmware_restart
2024-04-20 00:55:25,902 [printer.py:change_state()] - Changing state from 'shutdown' to 'disconnected'
2024-04-20 00:55:25,903 [printer.py:change_state()] - Adding callback for state: disconnected
2024-04-20 00:55:25,903 [screen.py:state_disconnected()] - ### Going to disconnected
2024-04-20 00:55:25,906 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 00:55:25,974 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 00:55:29,255 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 00:55:29,277 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 00:55:29,279 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'octoprint_compat', 'authorization', 'timelapse', 'history'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 1, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 00:55:29,294 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 00:55:29,296 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 00:55:31,456 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 00:55:31,513 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 00:55:31,520 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '0.000', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '5.0'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': 0.0, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': 5.0, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 00:55:31,533 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 00:55:31,533 [printer.py:reinit()] - # Extruders: 2
2024-04-20 00:55:31,533 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 00:55:31,533 [printer.py:reinit()] - # Fans: 1
2024-04-20 00:55:31,534 [printer.py:reinit()] - # Output pins: 3
2024-04-20 00:55:31,534 [printer.py:reinit()] - # Leds: 0
2024-04-20 00:55:31,559 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 00:55:31,563 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 00:55:32,044 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 00:55:32,109 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 00:55:32,141 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 00:55:32,160 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 00:55:32,162 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 00:55:32,163 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 00:55:32,163 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 00:55:32,164 [screen.py:init_printer()] - Printer initialized
2024-04-20 00:55:32,165 [printer.py:change_state()] - Changing state from 'disconnected' to 'startup'
2024-04-20 00:55:32,165 [printer.py:change_state()] - Adding callback for state: startup
2024-04-20 00:55:32,208 [KlippyGtk.py:Dialog()] - Showing dialog KlipperScreen (width=800, height=480)
2024-04-20 00:55:32,257 [printer.py:change_state()] - Changing state from 'startup' to 'ready'
2024-04-20 00:55:32,257 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 00:55:32,271 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 00:55:32,272 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 00:55:32,396 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 00:55:32,414 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 00:55:32,424 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 00:55:32,434 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 00:55:32,445 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 00:55:32,515 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 00:55:35,600 [KlippyWebsocket.py:emergency_stop()] - Sending printer.emergency_stop
2024-04-20 00:55:35,747 [printer.py:change_state()] - Changing state from 'ready' to 'shutdown'
2024-04-20 00:55:35,747 [printer.py:change_state()] - Adding callback for state: shutdown
2024-04-20 00:55:35,755 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 00:55:35,823 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 00:55:37,820 [KlippyWebsocket.py:restart_firmware()] - Sending printer.firmware_restart
2024-04-20 00:55:37,858 [printer.py:change_state()] - Changing state from 'shutdown' to 'disconnected'
2024-04-20 00:55:37,859 [printer.py:change_state()] - Adding callback for state: disconnected
2024-04-20 00:55:37,859 [screen.py:state_disconnected()] - ### Going to disconnected
2024-04-20 00:55:37,861 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 00:55:37,927 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 00:55:41,254 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 00:55:41,281 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 00:55:41,282 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'octoprint_compat', 'authorization', 'timelapse', 'history'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 1, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 00:55:41,297 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 00:55:41,299 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 00:55:43,127 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 00:55:43,185 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 00:55:43,193 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '0.000', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '5.0'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': 0.0, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': 5.0, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 00:55:43,206 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 00:55:43,207 [printer.py:reinit()] - # Extruders: 2
2024-04-20 00:55:43,207 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 00:55:43,207 [printer.py:reinit()] - # Fans: 1
2024-04-20 00:55:43,207 [printer.py:reinit()] - # Output pins: 3
2024-04-20 00:55:43,207 [printer.py:reinit()] - # Leds: 0
2024-04-20 00:55:43,233 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 00:55:43,236 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 00:55:43,479 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 00:55:43,575 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 00:55:43,639 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 00:55:43,723 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 00:55:43,730 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 00:55:43,731 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 00:55:43,731 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 00:55:43,748 [screen.py:init_printer()] - Printer initialized
2024-04-20 00:55:43,749 [printer.py:change_state()] - Changing state from 'disconnected' to 'startup'
2024-04-20 00:55:43,750 [printer.py:change_state()] - Adding callback for state: startup
2024-04-20 00:55:43,909 [printer.py:change_state()] - Changing state from 'startup' to 'ready'
2024-04-20 00:55:43,909 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 00:55:43,914 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 00:55:44,032 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 00:55:44,049 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 00:55:44,059 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 00:55:44,069 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 00:55:44,079 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 00:55:44,141 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 00:55:45,883 [KlippyWebsocket.py:emergency_stop()] - Sending printer.emergency_stop
2024-04-20 00:55:45,916 [printer.py:change_state()] - Changing state from 'ready' to 'shutdown'
2024-04-20 00:55:45,917 [printer.py:change_state()] - Adding callback for state: shutdown
2024-04-20 00:55:45,931 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 00:55:46,005 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 00:55:47,496 [screen.py:_go_to_submenu()] - #### Go to submenu 
2024-04-20 00:55:47,497 [screen.py:_go_to_submenu()] - #### Menu __splashscreen
2024-04-20 00:55:47,500 [screen.py:_load_panel()] - Loading panel: menu
2024-04-20 00:55:47,519 [menu.py:evaluate_enable()] - moonraker connected True
2024-04-20 00:55:47,601 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen > 
2024-04-20 00:55:47,615 [menu.py:arrangeMenuItems()] - X > power
2024-04-20 00:55:47,618 [menu.py:evaluate_enable()] - moonraker connected True
2024-04-20 00:55:48,854 [screen.py:_load_panel()] - Loading panel: network
2024-04-20 00:55:48,911 [network.py:__init__()] - Found wireless interfaces: ['wlan0']
2024-04-20 00:55:48,912 [network.py:__init__()] - Using wpa_cli
2024-04-20 00:55:48,938 [wifi.py:run()] - Setting up wifi event loop
2024-04-20 00:55:48,961 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen >  > network
2024-04-20 00:55:50,597 [wifi.py:get_current_wifi()] - Resetting connected_ssid
2024-04-20 00:56:12,783 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 00:56:12,796 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen > 
2024-04-20 00:56:12,811 [menu.py:arrangeMenuItems()] - X > power
2024-04-20 00:56:12,815 [menu.py:evaluate_enable()] - moonraker connected True
2024-04-20 00:56:14,764 [screen.py:_load_panel()] - Loading panel: settings
2024-04-20 00:56:15,006 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen >  > settings
2024-04-20 00:56:16,677 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 00:56:16,690 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen > 
2024-04-20 00:56:16,705 [menu.py:arrangeMenuItems()] - X > power
2024-04-20 00:56:16,708 [menu.py:evaluate_enable()] - moonraker connected True
2024-04-20 00:56:17,764 [screen.py:_load_panel()] - Loading panel: system
2024-04-20 00:56:17,828 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/machine/update/status
2024-04-20 00:56:17,830 [system.py:__init__()] - No update manager configured
2024-04-20 00:56:17,839 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen >  > system
2024-04-20 00:56:17,855 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/machine/update/status?refresh=false
2024-04-20 00:56:17,857 [system.py:get_updates()] - No update manager configured
2024-04-20 00:56:21,195 [functions.py:logging_exception_handler()] - Uncaught exception <class 'KeyError'>: 'version_info'
  File "/home/tier/KlipperScreen/panels/system.py", line 119, in show_update_info
    info = self.update_status['version_info'][program] if program in self.update_status['version_info'] else {}
NoneType: None
2024-04-20 00:56:22,483 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 00:56:22,495 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen > 
2024-04-20 00:56:22,511 [menu.py:arrangeMenuItems()] - X > power
2024-04-20 00:56:22,514 [menu.py:evaluate_enable()] - moonraker connected True
2024-04-20 00:56:23,732 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen >  > network
2024-04-20 00:56:25,355 [wifi.py:get_current_wifi()] - Resetting connected_ssid
2024-04-20 00:56:28,297 [keyboard.py:__init__()] - Keyboard es
2024-04-20 00:56:41,456 [wifi.py:save_wpa_conf()] - Saving WPA config
2024-04-20 00:56:41,501 [KlippyGtk.py:Dialog()] - Showing dialog Starting WiFi Association (width=800, height=480)
2024-04-20 00:56:41,505 [wifi.py:connect()] - Attempting to connect to wifi: 0
2024-04-20 00:56:41,506 [wifi.py:save_wpa_conf()] - Saving WPA config
2024-04-20 00:56:43,198 [network.py:connected_callback()] - Now connected to a new network
2024-04-20 00:56:54,238 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 00:57:05,223 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 00:57:05,236 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen > 
2024-04-20 00:57:05,251 [menu.py:arrangeMenuItems()] - X > power
2024-04-20 00:57:05,255 [menu.py:evaluate_enable()] - moonraker connected True
2024-04-20 00:57:06,900 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen >  > settings
2024-04-20 00:57:16,477 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 00:57:16,492 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen > 
2024-04-20 00:57:16,509 [menu.py:arrangeMenuItems()] - X > power
2024-04-20 00:57:16,512 [menu.py:evaluate_enable()] - moonraker connected True
2024-04-20 00:59:46,576 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen >  > system
2024-04-20 00:59:46,592 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/machine/update/status?refresh=false
2024-04-20 00:59:46,594 [system.py:get_updates()] - No update manager configured
2024-04-20 00:59:48,470 [screen.py:show_popup_message()] - echo: Checking for updates, please wait...
2024-04-20 00:59:50,136 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/machine/update/status?refresh=true
2024-04-20 00:59:50,138 [system.py:get_updates()] - No update manager configured
2024-04-20 00:59:53,395 [functions.py:logging_exception_handler()] - Uncaught exception <class 'KeyError'>: 'version_info'
  File "/home/tier/KlipperScreen/panels/system.py", line 119, in show_update_info
    info = self.update_status['version_info'][program] if program in self.update_status['version_info'] else {}
NoneType: None
2024-04-20 01:00:02,193 [KlippyGtk.py:Dialog()] - Showing dialog Restart (width=834, height=480)
2024-04-20 01:00:07,560 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 01:00:28,428 [functions.py:log_start()] - --------------------KlipperScreen Log Start--------------------
2024-04-20 01:00:28,429 [functions.py:log_start()] - KlipperScreen Version: v0.3.6-88-g6eefe9d
2024-04-20 01:00:28,430 [functions.py:log_start()] - Python version: 3.10
2024-04-20 01:00:28,628 [config.py:get_config_file_location()] - Passed config (-c): /home/tier/KlipperScreen.conf
2024-04-20 01:00:28,630 [config.py:__init__()] - Config path location: /home/tier/printer_data/config/KlipperScreen.conf
2024-04-20 01:00:28,649 [config.py:log_config()] -  ===== Config File =====

=======================
2024-04-20 01:00:28,655 [config.py:__init__()] - ====== Saved Def ======

[main]
move_speed_xy = 195
print_sort_dir = date_desc

[displayed_macros Printer]
bedpid = False
get_timelapse_setup = False
mix = False

[graph Printer]
extruder = False

=======================
2024-04-20 01:00:28,656 [config.py:__init__()] - Configured printers: [
  {
    "Printer": {
      "moonraker_host": "127.0.0.1",
      "moonraker_port": "7125",
      "moonraker_api_key": ""
    }
  }
]
2024-04-20 01:00:28,787 [config.py:create_translations()] - Selected lang: None OS lang: en_US
2024-04-20 01:00:28,787 [config.py:install_language()] - Using system lang
2024-04-20 01:00:28,788 [config.py:install_language()] - Using lang en
2024-04-20 01:00:28,824 [screen.py:__init__()] - Screen resolution: 800x480
2024-04-20 01:00:28,827 [KlippyGtk.py:__init__()] - Font size: 16.6 (medium)
2024-04-20 01:00:29,511 [screen.py:set_screenblanking_timeout()] - Changing screen blanking to: 3600
2024-04-20 01:00:29,525 [screen.py:set_screenblanking_timeout()] - Using DPMS
2024-04-20 01:00:29,536 [screen.py:initial_connection()] - Default printer: None
2024-04-20 01:00:29,537 [screen.py:connect_printer()] - Connecting to printer: Printer
2024-04-20 01:00:29,538 [screen.py:_load_panel()] - Loading panel: splash_screen
2024-04-20 01:00:29,630 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 01:00:29,648 [KlippyWebsocket.py:connect()] - Attempting to connect
2024-04-20 01:00:29,678 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:00:29,700 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/access/oneshot_token
2024-04-20 01:00:29,702 [KlippyWebsocket.py:connect()] - Starting websocket thread
2024-04-20 01:00:29,724 [_logging.py:info()] - Websocket connected
2024-04-20 01:00:29,725 [KlippyWebsocket.py:on_open()] - Moonraker Websocket Open
2024-04-20 01:00:29,801 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:00:29,819 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:00:29,821 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'octoprint_compat', 'history', 'authorization', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames'], 'warnings': [], 'websocket_count': 1, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 01:00:29,840 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 01:00:29,842 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 01:00:29,873 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/printer/info
2024-04-20 01:00:33,313 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:00:33,329 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:00:33,331 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'error', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'octoprint_compat', 'history', 'authorization', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 1, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 01:00:33,345 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 01:00:33,347 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 01:00:33,366 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 01:00:33,600 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 01:00:33,607 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '0.000', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '5.0'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': 0.0, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': 5.0, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 01:00:33,620 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 01:00:33,620 [printer.py:reinit()] - # Extruders: 2
2024-04-20 01:00:33,621 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 01:00:33,621 [printer.py:reinit()] - # Fans: 1
2024-04-20 01:00:33,621 [printer.py:reinit()] - # Output pins: 3
2024-04-20 01:00:33,621 [printer.py:reinit()] - # Leds: 0
2024-04-20 01:00:33,646 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 01:00:33,649 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 01:00:34,171 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 01:00:34,205 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:00:34,207 [screen.py:init_tempstore()] - Tempstore not ready: {'result': {}} Retrying in 5 seconds
2024-04-20 01:00:34,208 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 01:00:34,208 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 01:00:34,210 [screen.py:init_printer()] - Printer initialized
2024-04-20 01:00:34,211 [printer.py:change_state()] - Changing state from 'disconnected' to 'error'
2024-04-20 01:00:34,211 [printer.py:change_state()] - Adding callback for state: error
2024-04-20 01:00:34,217 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 01:00:34,284 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 01:00:39,314 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:00:39,316 [screen.py:init_tempstore()] - Tempstore not ready: {'result': {}} Retrying in 5 seconds
2024-04-20 01:00:44,313 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:00:44,315 [screen.py:init_tempstore()] - Tempstore not ready: {'result': {}} Retrying in 5 seconds
2024-04-20 01:00:47,138 [KlippyWebsocket.py:restart_firmware()] - Sending printer.firmware_restart
2024-04-20 01:00:47,180 [printer.py:change_state()] - Changing state from 'error' to 'disconnected'
2024-04-20 01:00:47,181 [printer.py:change_state()] - Adding callback for state: disconnected
2024-04-20 01:00:47,182 [screen.py:state_disconnected()] - ### Going to disconnected
2024-04-20 01:00:47,187 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 01:00:47,251 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 01:00:49,315 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:00:49,317 [screen.py:init_tempstore()] - Tempstore not ready: {'result': {}} Retrying in 5 seconds
2024-04-20 01:00:49,468 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:00:49,484 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:00:49,486 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'octoprint_compat', 'history', 'authorization', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 1, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 01:00:49,501 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 01:00:49,503 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 01:00:51,652 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 01:00:51,709 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 01:00:51,717 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '0.000', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '5.0'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': 0.0, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': 5.0, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 01:00:51,730 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 01:00:51,730 [printer.py:reinit()] - # Extruders: 2
2024-04-20 01:00:51,730 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 01:00:51,730 [printer.py:reinit()] - # Fans: 1
2024-04-20 01:00:51,730 [printer.py:reinit()] - # Output pins: 3
2024-04-20 01:00:51,730 [printer.py:reinit()] - # Leds: 0
2024-04-20 01:00:51,756 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 01:00:51,760 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 01:00:51,979 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 01:00:52,064 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:00:52,070 [screen.py:init_tempstore()] - Tempstore not ready: {'result': {}} Retrying in 5 seconds
2024-04-20 01:00:52,076 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 01:00:52,076 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 01:00:52,088 [screen.py:init_printer()] - Printer initialized
2024-04-20 01:00:52,089 [printer.py:change_state()] - Changing state from 'disconnected' to 'startup'
2024-04-20 01:00:52,089 [printer.py:change_state()] - Adding callback for state: startup
2024-04-20 01:00:53,467 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:00:53,469 [screen.py:init_tempstore()] - Tempstore not ready: {'result': {}} Retrying in 5 seconds
2024-04-20 01:00:57,468 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:00:57,469 [screen.py:init_tempstore()] - Tempstore not ready: {'result': {}} Retrying in 5 seconds
2024-04-20 01:00:58,315 [KlippyWebsocket.py:connect()] - Already connected
2024-04-20 01:00:58,468 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:00:58,469 [screen.py:init_tempstore()] - Tempstore not ready: {'result': {}} Retrying in 5 seconds
2024-04-20 01:01:02,467 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:01:02,469 [screen.py:init_tempstore()] - Tempstore not ready: {'result': {}} Retrying in 5 seconds
2024-04-20 01:01:03,467 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:01:03,469 [screen.py:init_tempstore()] - Tempstore not ready: {'result': {}} Retrying in 5 seconds
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      2024-04-20 01:01:30,079 [functions.py:log_start()] - --------------------KlipperScreen Log Start--------------------
2024-04-20 01:01:30,080 [functions.py:log_start()] - KlipperScreen Version: v0.3.6-88-g6eefe9d
2024-04-20 01:01:30,080 [functions.py:log_start()] - Python version: 3.10
2024-04-20 01:01:30,271 [config.py:get_config_file_location()] - Passed config (-c): /home/tier/KlipperScreen.conf
2024-04-20 01:01:30,273 [config.py:__init__()] - Config path location: /home/tier/printer_data/config/KlipperScreen.conf
2024-04-20 01:01:30,296 [config.py:log_config()] -  ===== Config File =====

=======================
2024-04-20 01:01:30,301 [config.py:__init__()] - ====== Saved Def ======

[main]
move_speed_xy = 195
print_sort_dir = date_desc

[displayed_macros Printer]
bedpid = False
get_timelapse_setup = False
mix = False

[graph Printer]
extruder = False

=======================
2024-04-20 01:01:30,302 [config.py:__init__()] - Configured printers: [
  {
    "Printer": {
      "moonraker_host": "127.0.0.1",
      "moonraker_port": "7125",
      "moonraker_api_key": ""
    }
  }
]
2024-04-20 01:01:30,426 [config.py:create_translations()] - Selected lang: None OS lang: en_US
2024-04-20 01:01:30,427 [config.py:install_language()] - Using system lang
2024-04-20 01:01:30,428 [config.py:install_language()] - Using lang en
2024-04-20 01:01:30,460 [screen.py:__init__()] - Screen resolution: 800x480
2024-04-20 01:01:30,463 [KlippyGtk.py:__init__()] - Font size: 16.6 (medium)
2024-04-20 01:01:31,165 [screen.py:set_screenblanking_timeout()] - Changing screen blanking to: 3600
2024-04-20 01:01:31,179 [screen.py:set_screenblanking_timeout()] - Using DPMS
2024-04-20 01:01:31,190 [screen.py:initial_connection()] - Default printer: None
2024-04-20 01:01:31,191 [screen.py:connect_printer()] - Connecting to printer: Printer
2024-04-20 01:01:31,192 [screen.py:_load_panel()] - Loading panel: splash_screen
2024-04-20 01:01:31,278 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 01:01:31,295 [KlippyWebsocket.py:connect()] - Attempting to connect
2024-04-20 01:01:31,325 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:01:31,347 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/access/oneshot_token
2024-04-20 01:01:31,349 [KlippyWebsocket.py:connect()] - Starting websocket thread
2024-04-20 01:01:31,368 [_logging.py:info()] - Websocket connected
2024-04-20 01:01:31,369 [KlippyWebsocket.py:on_open()] - Moonraker Websocket Open
2024-04-20 01:01:31,448 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:01:31,467 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:01:31,469 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'octoprint_compat', 'authorization', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames'], 'warnings': [], 'websocket_count': 1, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 01:01:31,487 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 01:01:31,488 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 01:01:31,523 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/printer/info
2024-04-20 01:01:34,757 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:01:34,773 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:01:34,775 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'ready', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'octoprint_compat', 'authorization', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 1, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 01:01:34,796 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 01:01:34,798 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 01:01:34,815 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 01:01:34,884 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 01:01:34,892 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '0.000', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '5.0'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': 0.0, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': 5.0, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 01:01:34,905 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 01:01:34,906 [printer.py:reinit()] - # Extruders: 2
2024-04-20 01:01:34,906 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 01:01:34,907 [printer.py:reinit()] - # Fans: 1
2024-04-20 01:01:34,907 [printer.py:reinit()] - # Output pins: 3
2024-04-20 01:01:34,907 [printer.py:reinit()] - # Leds: 0
2024-04-20 01:01:34,949 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 01:01:34,953 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 01:01:35,443 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 01:01:35,465 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:01:35,500 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 01:01:35,516 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 01:01:35,518 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 01:01:35,518 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 01:01:35,519 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 01:01:35,519 [screen.py:init_printer()] - Printer initialized
2024-04-20 01:01:35,521 [printer.py:change_state()] - Changing state from 'disconnected' to 'ready'
2024-04-20 01:01:35,521 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 01:01:35,528 [screen.py:_load_panel()] - Loading panel: main_menu
2024-04-20 01:01:35,669 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 01:01:35,687 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 01:01:35,697 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 01:01:35,707 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 01:01:35,718 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 01:01:35,787 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 01:11:27,470 [printer.py:change_state()] - Changing state from 'ready' to 'shutdown'
2024-04-20 01:11:27,470 [printer.py:change_state()] - Adding callback for state: shutdown
2024-04-20 01:11:27,482 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 01:11:27,570 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 01:11:44,967 [KlippyWebsocket.py:connect()] - Already connected
2024-04-20 01:12:11,103 [printer.py:change_state()] - Changing state from 'shutdown' to 'disconnected'
2024-04-20 01:12:11,104 [printer.py:change_state()] - Adding callback for state: disconnected
2024-04-20 01:12:11,104 [screen.py:state_disconnected()] - ### Going to disconnected
2024-04-20 01:12:11,106 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 01:12:11,183 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 01:12:14,429 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:12:14,448 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:12:14,450 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'octoprint_compat', 'authorization', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 01:12:14,469 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 01:12:14,471 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 01:12:17,482 [KlippyRest.py:_do_request()] - host=127.0.0.1, port=7125>>Read timed out. read timeout=3
2024-04-20 01:12:20,425 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:12:20,442 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:12:20,444 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'octoprint_compat', 'authorization', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 01:12:20,461 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 01:12:20,463 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 01:12:23,486 [KlippyRest.py:_do_request()] - host=127.0.0.1, port=7125>>Read timed out. read timeout=3
2024-04-20 01:12:26,427 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:12:26,443 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:12:26,446 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'octoprint_compat', 'authorization', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 01:12:26,463 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 01:12:26,465 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 01:12:29,477 [KlippyRest.py:_do_request()] - host=127.0.0.1, port=7125>>Read timed out. read timeout=3
2024-04-20 01:12:32,425 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:12:32,441 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:12:32,443 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'error', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'octoprint_compat', 'authorization', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 01:12:32,458 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 01:12:32,460 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 01:12:32,478 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 01:12:32,749 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 01:12:32,757 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '0.000', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '5.0'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': 0.0, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': 5.0, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 01:12:32,770 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 01:12:32,770 [printer.py:reinit()] - # Extruders: 2
2024-04-20 01:12:32,770 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 01:12:32,770 [printer.py:reinit()] - # Fans: 1
2024-04-20 01:12:32,770 [printer.py:reinit()] - # Output pins: 3
2024-04-20 01:12:32,771 [printer.py:reinit()] - # Leds: 0
2024-04-20 01:12:32,797 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 01:12:32,800 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 01:12:33,019 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 01:12:33,164 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:12:33,222 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 01:12:33,309 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 01:12:33,316 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 01:12:33,317 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 01:12:33,317 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 01:12:33,328 [screen.py:init_printer()] - Printer initialized
2024-04-20 01:12:33,329 [printer.py:change_state()] - Changing state from 'disconnected' to 'error'
2024-04-20 01:12:33,330 [printer.py:change_state()] - Adding callback for state: error
2024-04-20 01:12:33,362 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 01:12:33,431 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 01:10:32,821 [functions.py:log_start()] - --------------------KlipperScreen Log Start--------------------
2024-04-20 01:10:32,821 [functions.py:log_start()] - KlipperScreen Version: v0.3.6-88-g6eefe9d
2024-04-20 01:10:32,822 [functions.py:log_start()] - Python version: 3.10
2024-04-20 01:10:33,010 [config.py:get_config_file_location()] - Passed config (-c): /home/tier/KlipperScreen.conf
2024-04-20 01:10:33,012 [config.py:__init__()] - Config path location: /home/tier/printer_data/config/KlipperScreen.conf
2024-04-20 01:10:33,034 [config.py:log_config()] -  ===== Config File =====

=======================
2024-04-20 01:10:33,040 [config.py:__init__()] - ====== Saved Def ======

[main]
move_speed_xy = 195
print_sort_dir = date_desc

[displayed_macros Printer]
bedpid = False
get_timelapse_setup = False
mix = False

[graph Printer]
extruder = False

=======================
2024-04-20 01:10:33,041 [config.py:__init__()] - Configured printers: [
  {
    "Printer": {
      "moonraker_host": "127.0.0.1",
      "moonraker_port": "7125",
      "moonraker_api_key": ""
    }
  }
]
2024-04-20 01:10:33,165 [config.py:create_translations()] - Selected lang: None OS lang: en_US
2024-04-20 01:10:33,165 [config.py:install_language()] - Using system lang
2024-04-20 01:10:33,166 [config.py:install_language()] - Using lang en
2024-04-20 01:10:33,198 [screen.py:__init__()] - Screen resolution: 800x480
2024-04-20 01:10:33,201 [KlippyGtk.py:__init__()] - Font size: 16.6 (medium)
2024-04-20 01:10:33,928 [screen.py:set_screenblanking_timeout()] - Changing screen blanking to: 3600
2024-04-20 01:10:33,942 [screen.py:set_screenblanking_timeout()] - Using DPMS
2024-04-20 01:10:33,953 [screen.py:initial_connection()] - Default printer: None
2024-04-20 01:10:33,953 [screen.py:connect_printer()] - Connecting to printer: Printer
2024-04-20 01:10:33,954 [screen.py:_load_panel()] - Loading panel: splash_screen
2024-04-20 01:10:34,045 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 01:10:34,061 [KlippyWebsocket.py:connect()] - Attempting to connect
2024-04-20 01:10:34,092 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:10:34,112 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/access/oneshot_token
2024-04-20 01:10:34,114 [KlippyWebsocket.py:connect()] - Starting websocket thread
2024-04-20 01:10:34,133 [_logging.py:info()] - Websocket connected
2024-04-20 01:10:34,135 [KlippyWebsocket.py:on_open()] - Moonraker Websocket Open
2024-04-20 01:10:34,215 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:10:34,234 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:10:34,236 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'octoprint_compat', 'history', 'timelapse', 'authorization'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 01:10:34,255 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 01:10:34,258 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 01:10:34,287 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/printer/info
2024-04-20 01:10:37,493 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:10:37,512 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:10:37,514 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'octoprint_compat', 'history', 'timelapse', 'authorization'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 01:10:37,532 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 01:10:37,534 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 01:10:37,558 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 01:10:37,844 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 01:10:37,853 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '0.000', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '5.0'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': 0.0, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': 5.0, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 01:10:37,866 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 01:10:37,867 [printer.py:reinit()] - # Extruders: 2
2024-04-20 01:10:37,867 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 01:10:37,867 [printer.py:reinit()] - # Fans: 1
2024-04-20 01:10:37,867 [printer.py:reinit()] - # Output pins: 3
2024-04-20 01:10:37,867 [printer.py:reinit()] - # Leds: 0
2024-04-20 01:10:37,928 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 01:10:37,931 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 01:10:38,138 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 01:10:38,161 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:10:38,163 [screen.py:init_tempstore()] - Tempstore not ready: {'result': {}} Retrying in 5 seconds
2024-04-20 01:10:38,164 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 01:10:38,164 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 01:10:38,165 [screen.py:init_printer()] - Printer initialized
2024-04-20 01:10:38,166 [printer.py:change_state()] - Changing state from 'disconnected' to 'ready'
2024-04-20 01:10:38,167 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 01:10:38,173 [screen.py:_load_panel()] - Loading panel: main_menu
2024-04-20 01:10:38,314 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 01:10:38,334 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 01:10:38,519 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 01:10:38,664 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 01:10:38,681 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 01:10:38,743 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 01:10:38,746 [main_menu.py:update_graph_visibility()] - Could not create graph tempstore: []
2024-04-20 01:10:43,491 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:10:43,526 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 01:10:43,545 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 01:10:43,547 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 01:10:54,082 [screen.py:_go_to_submenu()] - #### Go to submenu more
2024-04-20 01:10:54,082 [screen.py:_go_to_submenu()] - #### Menu __main
2024-04-20 01:10:54,090 [screen.py:_load_panel()] - Loading panel: menu
2024-04-20 01:15:00,825 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 01:15:00,839 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 01:15:00,853 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 01:15:00,864 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 01:15:00,881 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 01:15:00,910 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 01:15:02,892 [screen.py:_load_panel()] - Loading panel: camera
2024-04-20 01:15:03,921 [camera.py:__init__()] - {'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}
2024-04-20 01:15:03,977 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > camera
2024-04-20 01:15:03,977 [camera.py:play()] - camera URL is relative
2024-04-20 01:15:03,978 [camera.py:play()] - video filters: rotate:0.0
2024-04-20 01:15:04,098 [camera.py:play()] - Camera URL: http://127.0.0.1/webcam?action=stream
2024-04-20 01:15:04,191 [camera.py:log()] - [warn] lavf: This format is marked by FFmpeg as having no timestamps!

2024-04-20 01:15:04,193 [camera.py:log()] - [warn] lavf: FFmpeg will likely make up its own broken timestamps. For

2024-04-20 01:15:04,195 [camera.py:log()] - [warn] lavf: video streams you can correct this with:

2024-04-20 01:15:04,196 [camera.py:log()] - [warn] lavf:     --no-correct-pts --fps=VALUE

2024-04-20 01:15:04,197 [camera.py:log()] - [warn] lavf: with VALUE being the real framerate of the stream. You can

2024-04-20 01:15:04,198 [camera.py:log()] - [warn] lavf: expect seeking and buffering estimation to be generally

2024-04-20 01:15:04,199 [camera.py:log()] - [warn] lavf: broken as well.

2024-04-20 01:15:04,200 [camera.py:log()] - [info] cplayer:  (+) Video --vid=1 (mjpeg)

2024-04-20 01:15:04,401 [camera.py:log()] - [warn] vo/gpu/opengl: Suspected software renderer or indirect context.

2024-04-20 01:15:04,405 [camera.py:log()] - [error] vo/gpu: Can't open TTY for VT control: No such device or address

2024-04-20 01:15:04,409 [screen.py:show_popup_message()] - error: Can't open TTY for VT control: No such device or address

2024-04-20 01:15:04,418 [camera.py:log()] - [warn] vo/gpu/opengl: Failed to set up VT switcher. Terminal switching will be unavailable.

2024-04-20 01:15:04,419 [camera.py:log()] - [error] vo/gpu/opengl/kms: No connected connectors found

2024-04-20 01:15:04,423 [screen.py:show_popup_message()] - error: No connected connectors found

2024-04-20 01:15:04,435 [camera.py:log()] - [error] vo/gpu/opengl: Failed to create KMS.

2024-04-20 01:15:04,438 [screen.py:show_popup_message()] - error: Failed to create KMS.

2024-04-20 01:15:04,507 [camera.py:log()] - [error] vo/xv: No Xvideo support found.

2024-04-20 01:15:04,589 [camera.py:log()] - [warn] vo/x11: Warning: this legacy VO has bad performance. Consider fixing your graphics drivers, or not forcing the x11 VO.

2024-04-20 01:15:04,681 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:04,687 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:04,717 [camera.py:log()] - [warn] ffmpeg: swscaler: deprecated pixel format used, make sure you did set range correctly

2024-04-20 01:15:04,736 [camera.py:log()] - [info] cplayer: VO: [x11] 640x480 yuv444p

2024-04-20 01:15:04,806 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:04,810 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:04,838 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:04,843 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:04,863 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:04,869 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:04,894 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:04,910 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:04,935 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:04,943 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:04,961 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:04,967 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:04,983 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:04,988 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,018 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,022 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,038 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,044 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,072 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,077 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,100 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,116 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,126 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,137 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,165 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,172 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,192 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,198 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,209 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,217 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,252 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,259 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,272 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,278 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,290 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,299 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,322 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,327 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,347 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,353 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,378 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,393 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,413 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,424 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,464 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,468 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,531 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,535 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,595 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,599 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,663 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,667 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,700 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,705 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,762 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,766 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,831 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,835 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,896 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,900 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,963 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:05,967 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,031 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,035 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,067 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,074 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,131 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,136 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,198 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,202 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,262 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,266 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,331 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,335 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,366 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,371 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,432 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,436 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,497 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,501 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,565 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,569 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,632 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,636 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,666 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,671 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,731 [camera.py:log()] - [error] ffmpeg/video: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,735 [screen.py:show_popup_message()] - error: mjpeg: unable to decode APP fields: Invalid data found when processing input

2024-04-20 01:15:06,811 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 01:15:06,860 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 01:15:06,877 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 01:15:06,891 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 01:15:06,902 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 01:15:06,918 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 01:15:06,949 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 01:15:16,888 [screen.py:_load_panel()] - Loading panel: notifications
2024-04-20 01:15:16,959 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > notifications
2024-04-20 01:15:44,486 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 01:15:44,534 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 01:15:44,551 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 01:15:44,566 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 01:15:44,576 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 01:15:44,593 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 01:15:44,625 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 01:15:47,325 [screen.py:_load_panel()] - Loading panel: fan
2024-04-20 01:15:47,352 [fan.py:add_fan()] - Adding fan: fan
2024-04-20 01:15:47,416 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > fan
2024-04-20 01:15:49,524 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S0
2024-04-20 01:15:51,953 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S26
2024-04-20 01:15:52,027 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S46
2024-04-20 01:15:52,077 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S54
2024-04-20 01:15:52,136 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S71
2024-04-20 01:15:53,017 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S156
2024-04-20 01:15:53,203 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S186
2024-04-20 01:15:54,731 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S140
2024-04-20 01:15:55,500 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S140
2024-04-20 01:15:55,571 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S140
2024-04-20 01:15:55,607 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S140
2024-04-20 01:15:55,639 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S140
2024-04-20 01:15:55,677 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S140
2024-04-20 01:15:56,684 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S130
2024-04-20 01:15:56,964 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S255
2024-04-20 01:15:59,343 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S0
2024-04-20 01:16:03,806 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S0
2024-04-20 01:16:05,746 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S89
2024-04-20 01:16:08,417 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S97
2024-04-20 01:16:08,430 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S97
2024-04-20 01:16:09,116 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S130
2024-04-20 01:16:10,164 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S122
2024-04-20 01:16:10,828 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S181
2024-04-20 01:16:12,333 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S217
2024-04-20 01:16:13,213 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S194
2024-04-20 01:16:13,553 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S255
2024-04-20 01:16:15,607 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S240
2024-04-20 01:16:15,690 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S247
2024-04-20 01:16:16,013 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S245
2024-04-20 01:16:16,045 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S240
2024-04-20 01:16:16,376 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S224
2024-04-20 01:16:16,396 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S224
2024-04-20 01:16:19,357 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: M106 S0
2024-04-20 01:16:23,913 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 01:16:23,963 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 01:16:23,980 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 01:16:23,994 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 01:16:24,004 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 01:16:24,020 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 01:16:24,049 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 01:16:32,335 [screen.py:_load_panel()] - Loading panel: limits
2024-04-20 01:16:32,360 [limits.py:add_option()] - Adding option: max_accel
2024-04-20 01:16:32,369 [limits.py:add_option()] - Adding option: max_accel_to_decel
2024-04-20 01:16:32,379 [limits.py:add_option()] - Adding option: max_velocity
2024-04-20 01:16:32,388 [limits.py:add_option()] - Adding option: square_corner_velocity
2024-04-20 01:16:32,444 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > limits
2024-04-20 01:16:36,580 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 01:16:36,630 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 01:16:36,646 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 01:16:36,661 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 01:16:36,671 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 01:16:36,687 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 01:16:36,717 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 01:16:38,698 [screen.py:_load_panel()] - Loading panel: zcalibrate
2024-04-20 01:16:38,733 [printer.py:get_probe()] - Probe type: probe
2024-04-20 01:16:38,733 [zcalibrate.py:__init__()] - Z offset: 0.0
2024-04-20 01:16:38,781 [zcalibrate.py:__init__()] - Available functions for calibration: ['endstop', 'probe']
2024-04-20 01:16:38,828 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > zcalibrate
2024-04-20 01:17:04,771 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G28
2024-04-20 01:17:04,773 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: Z_ENDSTOP_CALIBRATE
2024-04-20 01:18:11,136 [zcalibrate.py:accept()] - Accepting Z position
2024-04-20 01:18:11,137 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: ACCEPT
2024-04-20 01:18:11,150 [screen.py:show_popup_message()] - error: Failed, adjust position first
2024-04-20 01:18:11,157 [zcalibrate.py:process_update()] - // Manual probe failed! Use TESTZ commands to position the
// nozzle prior to running ACCEPT.
2024-04-20 01:18:21,382 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G91
G0 Z3.0 F180.0
2024-04-20 01:18:21,383 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G90
2024-04-20 01:18:21,384 [zcalibrate.py:_calculate_position()] - Position not configured, probing the middle of the bed
2024-04-20 01:18:21,385 [zcalibrate.py:_calculate_position()] - Center position X:100.0 Y:150.0
2024-04-20 01:18:21,385 [zcalibrate.py:_calculate_position()] - Offset X:0.0 Y:0.0
2024-04-20 01:18:21,386 [zcalibrate.py:_calculate_position()] - Moving to X:100.0 Y:150.0
2024-04-20 01:18:21,386 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G0 X100.0 Y150.0 F3000
2024-04-20 01:18:21,387 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: PROBE_CALIBRATE
2024-04-20 01:19:10,053 [zcalibrate.py:accept()] - Accepting Z position
2024-04-20 01:19:10,054 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: ACCEPT
2024-04-20 01:19:10,067 [screen.py:show_popup_message()] - error: Failed, adjust position first
2024-04-20 01:19:10,074 [zcalibrate.py:process_update()] - // Manual probe failed! Use TESTZ commands to position the
// nozzle prior to running ACCEPT.
2024-04-20 01:19:21,759 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G91
G0 Z3.0 F180.0
2024-04-20 01:19:21,760 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G90
2024-04-20 01:19:21,762 [zcalibrate.py:_calculate_position()] - Position not configured, probing the middle of the bed
2024-04-20 01:19:21,762 [zcalibrate.py:_calculate_position()] - Center position X:100.0 Y:150.0
2024-04-20 01:19:21,762 [zcalibrate.py:_calculate_position()] - Offset X:0.0 Y:0.0
2024-04-20 01:19:21,762 [zcalibrate.py:_calculate_position()] - Moving to X:100.0 Y:150.0
2024-04-20 01:19:21,763 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G0 X100.0 Y150.0 F3000
2024-04-20 01:19:21,764 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: PROBE_CALIBRATE
2024-04-20 01:19:57,253 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+1
2024-04-20 01:19:59,736 [zcalibrate.py:accept()] - Accepting Z position
2024-04-20 01:19:59,737 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: ACCEPT
2024-04-20 01:19:59,750 [screen.py:show_popup_message()] - error: Failed, adjust position first
2024-04-20 01:19:59,757 [zcalibrate.py:process_update()] - // Manual probe failed! Use TESTZ commands to position the
// nozzle prior to running ACCEPT.
2024-04-20 01:20:08,300 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 01:20:08,357 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 01:20:08,374 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 01:20:08,389 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 01:20:08,401 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 01:20:08,416 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 01:20:08,446 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 01:20:10,164 [screen.py:_load_panel()] - Loading panel: bed_mesh
2024-04-20 01:20:10,228 [bed_mesh.py:add_profile()] - Adding Profile: default
2024-04-20 01:20:10,278 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > bed_mesh
2024-04-20 01:20:10,280 [bed_mesh.py:activate_mesh()] - Active None changing to default
2024-04-20 01:20:15,856 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 01:20:15,911 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 01:20:15,929 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 01:20:15,945 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 01:20:15,955 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 01:20:15,971 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 01:20:16,001 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 01:20:21,502 [screen.py:_load_panel()] - Loading panel: pins
2024-04-20 01:20:21,525 [pins.py:add_pin()] - Adding pin: output_pin BEEP
2024-04-20 01:20:21,534 [pins.py:add_pin()] - Adding pin: output_pin POWER
2024-04-20 01:20:21,543 [pins.py:add_pin()] - Adding pin: output_pin LIGHT
2024-04-20 01:20:21,591 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > pins
2024-04-20 01:20:24,556 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 01:20:24,604 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 01:20:24,621 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 01:20:24,635 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 01:20:24,645 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 01:20:24,661 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 01:20:24,693 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 01:20:27,568 [screen.py:_load_panel()] - Loading panel: gcode_macros
2024-04-20 01:20:27,651 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > gcode_macros
2024-04-20 01:20:27,765 [gcode_macros.py:add_gcode_macro()] - gcode not found in T1
{'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}
2024-04-20 01:20:27,820 [gcode_macros.py:add_gcode_macro()] - gcode not found in T10
{'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}
2024-04-20 01:20:35,424 [keyboard.py:__init__()] - Keyboard es
2024-04-20 01:20:35,781 [screen.py:update_size()] - Size changed: 800x480
2024-04-20 01:20:39,843 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 01:20:39,915 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 01:20:39,931 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 01:20:39,945 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 01:20:39,956 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 01:20:39,973 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 01:20:40,006 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 01:20:40,021 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 01:20:40,067 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 01:20:49,267 [screen.py:_go_to_submenu()] - #### Go to submenu more
2024-04-20 01:20:49,267 [screen.py:_go_to_submenu()] - #### Menu __main
2024-04-20 01:20:49,324 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 01:20:49,340 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 01:20:49,354 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 01:20:49,365 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 01:20:49,380 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 01:20:49,414 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 01:20:53,819 [screen.py:_load_panel()] - Loading panel: system
2024-04-20 01:20:53,887 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/machine/update/status
2024-04-20 01:20:53,889 [system.py:__init__()] - No update manager configured
2024-04-20 01:20:53,931 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > system
2024-04-20 01:20:53,948 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/machine/update/status?refresh=false
2024-04-20 01:20:53,949 [system.py:get_updates()] - No update manager configured
2024-04-20 01:21:00,188 [screen.py:show_popup_message()] - echo: Checking for updates, please wait...
2024-04-20 01:21:01,832 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/machine/update/status?refresh=true
2024-04-20 01:21:01,834 [system.py:get_updates()] - No update manager configured
2024-04-20 01:21:06,006 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 01:21:06,058 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 01:21:06,074 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 01:21:06,089 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 01:21:06,099 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 01:21:06,114 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 01:21:06,144 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 01:21:08,685 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > zcalibrate
2024-04-20 01:21:18,905 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: Z_ENDSTOP_CALIBRATE
2024-04-20 01:21:40,312 [zcalibrate.py:abort()] - Aborting calibration
2024-04-20 01:21:40,313 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: ABORT
2024-04-20 01:21:40,317 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 01:21:40,371 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 01:21:40,387 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 01:21:40,401 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 01:21:40,412 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 01:21:40,430 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 01:21:40,463 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 01:21:42,241 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > zcalibrate
2024-04-20 01:21:46,595 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G91
G0 Z3.0 F180.0
2024-04-20 01:21:46,596 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G90
2024-04-20 01:21:46,597 [zcalibrate.py:_calculate_position()] - Position not configured, probing the middle of the bed
2024-04-20 01:21:46,598 [zcalibrate.py:_calculate_position()] - Center position X:100.0 Y:150.0
2024-04-20 01:21:46,598 [zcalibrate.py:_calculate_position()] - Offset X:0.0 Y:0.0
2024-04-20 01:21:46,599 [zcalibrate.py:_calculate_position()] - Moving to X:100.0 Y:150.0
2024-04-20 01:21:46,599 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G0 X100.0 Y150.0 F3000
2024-04-20 01:21:46,600 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: PROBE_CALIBRATE
2024-04-20 01:22:10,643 [zcalibrate.py:accept()] - Accepting Z position
2024-04-20 01:22:10,643 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: ACCEPT
2024-04-20 01:22:10,657 [screen.py:show_popup_message()] - error: Failed, adjust position first
2024-04-20 01:22:10,663 [zcalibrate.py:process_update()] - // Manual probe failed! Use TESTZ commands to position the
// nozzle prior to running ACCEPT.
2024-04-20 01:22:19,550 [screen.py:_menu_go_back()] - #### Menu go home
2024-04-20 01:22:19,597 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 01:22:24,293 [screen.py:_go_to_submenu()] - #### Go to submenu more
2024-04-20 01:22:24,293 [screen.py:_go_to_submenu()] - #### Menu __main
2024-04-20 01:22:24,351 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 01:22:24,367 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 01:22:24,381 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 01:22:24,392 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 01:22:24,408 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 01:22:24,438 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 01:22:25,661 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > bed_mesh
2024-04-20 01:22:27,366 [screen.py:show_popup_message()] - echo: Calibrating
2024-04-20 01:22:27,373 [screen.py:_send_action()] - printer.gcode.script: {'script': 'BED_MESH_CALIBRATE'}
2024-04-20 01:22:27,378 [printer.py:get_probe()] - Probe type: probe
2024-04-20 01:22:27,578 [bed_mesh.py:activate_mesh()] - Clearing active profile
2024-04-20 01:22:53,497 [KlippyWebsocket.py:emergency_stop()] - Sending printer.emergency_stop
2024-04-20 01:22:53,658 [printer.py:change_state()] - Changing state from 'ready' to 'shutdown'
2024-04-20 01:22:53,659 [printer.py:change_state()] - Adding callback for state: shutdown
2024-04-20 01:22:53,667 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 01:22:53,753 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 01:23:16,503 [screen.py:_go_to_submenu()] - #### Go to submenu 
2024-04-20 01:23:16,503 [screen.py:_go_to_submenu()] - #### Menu __splashscreen
2024-04-20 01:23:16,507 [screen.py:_load_panel()] - Loading panel: menu
2024-04-20 01:23:16,526 [menu.py:evaluate_enable()] - moonraker connected True
2024-04-20 01:23:16,603 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen > 
2024-04-20 01:23:16,618 [menu.py:arrangeMenuItems()] - X > power
2024-04-20 01:23:16,622 [menu.py:evaluate_enable()] - moonraker connected True
2024-04-20 01:23:17,700 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 01:23:17,756 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/machine/update/status
2024-04-20 01:23:17,757 [system.py:__init__()] - No update manager configured
2024-04-20 01:23:17,766 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen >  > system
2024-04-20 01:23:17,782 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/machine/update/status?refresh=false
2024-04-20 01:23:17,783 [system.py:get_updates()] - No update manager configured
2024-04-20 01:23:19,165 [screen.py:show_popup_message()] - echo: Checking for updates, please wait...
2024-04-20 01:23:20,810 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/machine/update/status?refresh=true
2024-04-20 01:23:20,812 [system.py:get_updates()] - No update manager configured
2024-04-20 01:23:21,454 [functions.py:logging_exception_handler()] - Uncaught exception <class 'KeyError'>: 'version_info'
  File "/home/tier/KlipperScreen/panels/system.py", line 119, in show_update_info
    info = self.update_status['version_info'][program] if program in self.update_status['version_info'] else {}
NoneType: None
2024-04-20 01:23:22,754 [functions.py:logging_exception_handler()] - Uncaught exception <class 'KeyError'>: 'version_info'
  File "/home/tier/KlipperScreen/panels/system.py", line 119, in show_update_info
    info = self.update_status['version_info'][program] if program in self.update_status['version_info'] else {}
NoneType: None
2024-04-20 01:23:23,627 [functions.py:logging_exception_handler()] - Uncaught exception <class 'KeyError'>: 'version_info'
  File "/home/tier/KlipperScreen/panels/system.py", line 119, in show_update_info
    info = self.update_status['version_info'][program] if program in self.update_status['version_info'] else {}
NoneType: None
2024-04-20 01:23:23,888 [functions.py:logging_exception_handler()] - Uncaught exception <class 'KeyError'>: 'version_info'
  File "/home/tier/KlipperScreen/panels/system.py", line 119, in show_update_info
    info = self.update_status['version_info'][program] if program in self.update_status['version_info'] else {}
NoneType: None
2024-04-20 01:23:24,077 [functions.py:logging_exception_handler()] - Uncaught exception <class 'KeyError'>: 'version_info'
  File "/home/tier/KlipperScreen/panels/system.py", line 119, in show_update_info
    info = self.update_status['version_info'][program] if program in self.update_status['version_info'] else {}
NoneType: None
         2024-04-20 01:23:10,213 [functions.py:log_start()] - --------------------KlipperScreen Log Start--------------------
2024-04-20 01:23:10,214 [functions.py:log_start()] - KlipperScreen Version: v0.3.6-88-g6eefe9d
2024-04-20 01:23:10,214 [functions.py:log_start()] - Python version: 3.10
2024-04-20 01:23:10,415 [config.py:get_config_file_location()] - Passed config (-c): /home/tier/KlipperScreen.conf
2024-04-20 01:23:10,416 [config.py:__init__()] - Config path location: /home/tier/printer_data/config/KlipperScreen.conf
2024-04-20 01:23:10,436 [config.py:log_config()] -  ===== Config File =====

=======================
2024-04-20 01:23:10,441 [config.py:__init__()] - ====== Saved Def ======

[main]
move_speed_xy = 195
print_sort_dir = date_desc

[displayed_macros Printer]
bedpid = False
get_timelapse_setup = False
mix = False

[graph Printer]
extruder = False

=======================
2024-04-20 01:23:10,442 [config.py:__init__()] - Configured printers: [
  {
    "Printer": {
      "moonraker_host": "127.0.0.1",
      "moonraker_port": "7125",
      "moonraker_api_key": ""
    }
  }
]
2024-04-20 01:23:10,566 [config.py:create_translations()] - Selected lang: None OS lang: en_US
2024-04-20 01:23:10,567 [config.py:install_language()] - Using system lang
2024-04-20 01:23:10,567 [config.py:install_language()] - Using lang en
2024-04-20 01:23:10,599 [screen.py:__init__()] - Screen resolution: 800x480
2024-04-20 01:23:10,602 [KlippyGtk.py:__init__()] - Font size: 16.6 (medium)
2024-04-20 01:23:11,291 [screen.py:set_screenblanking_timeout()] - Changing screen blanking to: 3600
2024-04-20 01:23:11,305 [screen.py:set_screenblanking_timeout()] - Using DPMS
2024-04-20 01:23:11,315 [screen.py:initial_connection()] - Default printer: None
2024-04-20 01:23:11,315 [screen.py:connect_printer()] - Connecting to printer: Printer
2024-04-20 01:23:11,316 [screen.py:_load_panel()] - Loading panel: splash_screen
2024-04-20 01:23:11,405 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 01:23:11,421 [KlippyWebsocket.py:connect()] - Attempting to connect
2024-04-20 01:23:11,453 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:23:11,475 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/access/oneshot_token
2024-04-20 01:23:11,476 [KlippyWebsocket.py:connect()] - Starting websocket thread
2024-04-20 01:23:11,499 [_logging.py:info()] - Websocket connected
2024-04-20 01:23:11,500 [KlippyWebsocket.py:on_open()] - Moonraker Websocket Open
2024-04-20 01:23:11,574 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:23:11,593 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:23:11,595 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'authorization', 'timelapse', 'octoprint_compat', 'history'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames'], 'warnings': [], 'websocket_count': 1, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 01:23:11,623 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 01:23:11,625 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 01:23:11,664 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/printer/info
2024-04-20 01:23:14,888 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:23:14,907 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:23:14,910 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'ready', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'authorization', 'timelapse', 'octoprint_compat', 'history'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 01:23:14,927 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 01:23:14,929 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 01:23:14,949 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 01:23:15,138 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 01:23:15,146 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '0.000', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '5.0'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': 0.0, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': 5.0, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 01:23:15,159 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 01:23:15,160 [printer.py:reinit()] - # Extruders: 2
2024-04-20 01:23:15,160 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 01:23:15,160 [printer.py:reinit()] - # Fans: 1
2024-04-20 01:23:15,161 [printer.py:reinit()] - # Output pins: 3
2024-04-20 01:23:15,161 [printer.py:reinit()] - # Leds: 0
2024-04-20 01:23:15,208 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 01:23:15,211 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 01:23:15,395 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 01:23:15,484 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:23:15,490 [screen.py:init_tempstore()] - Tempstore not ready: {'result': {}} Retrying in 5 seconds
2024-04-20 01:23:15,496 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 01:23:15,497 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 01:23:15,498 [screen.py:init_printer()] - Printer initialized
2024-04-20 01:23:15,499 [printer.py:change_state()] - Changing state from 'disconnected' to 'ready'
2024-04-20 01:23:15,499 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 01:23:15,548 [screen.py:_load_panel()] - Loading panel: main_menu
2024-04-20 01:23:15,857 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 01:23:15,876 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 01:23:15,886 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 01:23:15,896 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 01:23:15,906 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 01:23:15,969 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 01:23:15,972 [main_menu.py:update_graph_visibility()] - Could not create graph tempstore: []
2024-04-20 01:23:20,885 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:23:20,917 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 01:23:20,935 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 01:23:20,937 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 01:33:03,954 [screen.py:show_popup_message()] - error: // Unknown command:"HOMING_OVERRIDE]"
2024-04-20 01:33:04,134 [screen.py:show_popup_message()] - error: // Unknown command:"AXES="
2024-04-20 01:33:04,145 [screen.py:show_popup_message()] - error: // Unknown command:"GCODE="
2024-04-20 01:33:04,155 [screen.py:show_popup_message()] - error: // Unknown command:"IF("
2024-04-20 01:33:04,166 [screen.py:show_popup_message()] - echo: Moving to clear the bed and homing Z too.
2024-04-20 01:33:04,177 [screen.py:show_popup_message()] - error: // Unknown command:"CAN'"
2024-04-20 01:33:04,188 [screen.py:show_popup_message()] - error: // Unknown command:"Y"
2024-04-20 01:33:04,586 [screen.py:show_popup_message()] - error: // Unknown command:"ELIF"
2024-04-20 01:33:04,683 [screen.py:show_popup_message()] - echo: Moving to clear the bed.
2024-04-20 01:33:04,693 [screen.py:show_popup_message()] - error: // Unknown command:"TOO"
2024-04-20 01:33:04,704 [screen.py:show_popup_message()] - error: // Unknown command:"ENDIF%}"
2024-04-20 01:33:04,715 [screen.py:show_popup_message()] - error: // Unknown command:"PARAMS"
2024-04-20 01:33:04,726 [screen.py:show_popup_message()] - error: // Unknown command:"PARAMS"
2024-04-20 01:33:04,737 [screen.py:show_popup_message()] - error: // Unknown command:"X"
2024-04-20 01:33:04,749 [screen.py:show_popup_message()] - error: // Unknown command:"IF('"
2024-04-20 01:33:04,760 [screen.py:show_popup_message()] - echo: Homing X
2024-04-20 01:33:06,641 [printer.py:change_state()] - Changing state from 'ready' to 'shutdown'
2024-04-20 01:33:06,641 [printer.py:change_state()] - Adding callback for state: shutdown
2024-04-20 01:33:06,657 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 01:33:06,739 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 01:32:39,623 [functions.py:log_start()] - --------------------KlipperScreen Log Start--------------------
2024-04-20 01:32:39,624 [functions.py:log_start()] - KlipperScreen Version: v0.3.6-88-g6eefe9d
2024-04-20 01:32:39,624 [functions.py:log_start()] - Python version: 3.10
2024-04-20 01:32:39,809 [config.py:get_config_file_location()] - Passed config (-c): /home/tier/KlipperScreen.conf
2024-04-20 01:32:39,811 [config.py:__init__()] - Config path location: /home/tier/printer_data/config/KlipperScreen.conf
2024-04-20 01:32:39,831 [config.py:log_config()] -  ===== Config File =====

=======================
2024-04-20 01:32:39,836 [config.py:__init__()] - ====== Saved Def ======

[main]
move_speed_xy = 195
print_sort_dir = date_desc

[displayed_macros Printer]
bedpid = False
get_timelapse_setup = False
mix = False

[graph Printer]
extruder = False

=======================
2024-04-20 01:32:39,837 [config.py:__init__()] - Configured printers: [
  {
    "Printer": {
      "moonraker_host": "127.0.0.1",
      "moonraker_port": "7125",
      "moonraker_api_key": ""
    }
  }
]
2024-04-20 01:32:39,969 [config.py:create_translations()] - Selected lang: None OS lang: en_US
2024-04-20 01:32:39,969 [config.py:install_language()] - Using system lang
2024-04-20 01:32:39,970 [config.py:install_language()] - Using lang en
2024-04-20 01:32:40,006 [screen.py:__init__()] - Screen resolution: 800x480
2024-04-20 01:32:40,009 [KlippyGtk.py:__init__()] - Font size: 16.6 (medium)
2024-04-20 01:32:40,699 [screen.py:set_screenblanking_timeout()] - Changing screen blanking to: 3600
2024-04-20 01:32:40,716 [screen.py:set_screenblanking_timeout()] - Using DPMS
2024-04-20 01:32:40,727 [screen.py:initial_connection()] - Default printer: None
2024-04-20 01:32:40,727 [screen.py:connect_printer()] - Connecting to printer: Printer
2024-04-20 01:32:40,728 [screen.py:_load_panel()] - Loading panel: splash_screen
2024-04-20 01:32:40,816 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 01:32:40,833 [KlippyWebsocket.py:connect()] - Attempting to connect
2024-04-20 01:32:40,863 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:32:40,883 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/access/oneshot_token
2024-04-20 01:32:40,885 [KlippyWebsocket.py:connect()] - Starting websocket thread
2024-04-20 01:32:40,907 [_logging.py:info()] - Websocket connected
2024-04-20 01:32:40,908 [KlippyWebsocket.py:on_open()] - Moonraker Websocket Open
2024-04-20 01:32:40,981 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:32:41,000 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:32:41,002 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'octoprint_compat', 'history', 'timelapse', 'authorization'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames'], 'warnings': [], 'websocket_count': 1, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 01:32:41,021 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 01:32:41,024 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 01:32:41,055 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/printer/info
2024-04-20 01:32:44,493 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:32:44,509 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:32:44,511 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'ready', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'octoprint_compat', 'history', 'timelapse', 'authorization'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 01:32:44,526 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 01:32:44,528 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 01:32:44,545 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 01:32:44,700 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 01:32:44,709 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '0.000', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '5.0'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': 0.0, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': 5.0, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 01:32:44,722 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 01:32:44,722 [printer.py:reinit()] - # Extruders: 2
2024-04-20 01:32:44,723 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 01:32:44,723 [printer.py:reinit()] - # Fans: 1
2024-04-20 01:32:44,723 [printer.py:reinit()] - # Output pins: 3
2024-04-20 01:32:44,723 [printer.py:reinit()] - # Leds: 0
2024-04-20 01:32:44,766 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 01:32:44,769 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 01:32:44,981 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 01:32:45,071 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:32:45,077 [screen.py:init_tempstore()] - Tempstore not ready: {'result': {}} Retrying in 5 seconds
2024-04-20 01:32:45,083 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 01:32:45,083 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 01:32:45,095 [screen.py:init_printer()] - Printer initialized
2024-04-20 01:32:45,096 [printer.py:change_state()] - Changing state from 'disconnected' to 'ready'
2024-04-20 01:32:45,096 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 01:32:45,133 [screen.py:_load_panel()] - Loading panel: main_menu
2024-04-20 01:32:45,424 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 01:32:45,443 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 01:32:45,455 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 01:32:45,466 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 01:32:45,477 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 01:32:45,544 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 01:32:45,547 [main_menu.py:update_graph_visibility()] - Could not create graph tempstore: []
2024-04-20 01:32:50,492 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:32:50,526 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 01:32:50,544 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 01:32:50,546 [screen.py:init_tempstore()] - Temperature store size: 1200
                                                                                                                                                                                                                                                                                                                                                              2024-04-20 01:41:31,127 [functions.py:log_start()] - --------------------KlipperScreen Log Start--------------------
2024-04-20 01:41:31,127 [functions.py:log_start()] - KlipperScreen Version: v0.3.6-88-g6eefe9d
2024-04-20 01:41:31,127 [functions.py:log_start()] - Python version: 3.10
2024-04-20 01:41:31,321 [config.py:get_config_file_location()] - Passed config (-c): /home/tier/KlipperScreen.conf
2024-04-20 01:41:31,322 [config.py:__init__()] - Config path location: /home/tier/printer_data/config/KlipperScreen.conf
2024-04-20 01:41:31,349 [config.py:log_config()] -  ===== Config File =====

=======================
2024-04-20 01:41:31,355 [config.py:__init__()] - ====== Saved Def ======

[main]
move_speed_xy = 195
print_sort_dir = date_desc

[displayed_macros Printer]
bedpid = False
get_timelapse_setup = False
mix = False

[graph Printer]
extruder = False

=======================
2024-04-20 01:41:31,358 [config.py:__init__()] - Configured printers: [
  {
    "Printer": {
      "moonraker_host": "127.0.0.1",
      "moonraker_port": "7125",
      "moonraker_api_key": ""
    }
  }
]
2024-04-20 01:41:31,485 [config.py:create_translations()] - Selected lang: None OS lang: en_US
2024-04-20 01:41:31,486 [config.py:install_language()] - Using system lang
2024-04-20 01:41:31,487 [config.py:install_language()] - Using lang en
2024-04-20 01:41:31,519 [screen.py:__init__()] - Screen resolution: 800x480
2024-04-20 01:41:31,522 [KlippyGtk.py:__init__()] - Font size: 16.6 (medium)
2024-04-20 01:41:32,214 [screen.py:set_screenblanking_timeout()] - Changing screen blanking to: 3600
2024-04-20 01:41:32,228 [screen.py:set_screenblanking_timeout()] - Using DPMS
2024-04-20 01:41:32,239 [screen.py:initial_connection()] - Default printer: None
2024-04-20 01:41:32,239 [screen.py:connect_printer()] - Connecting to printer: Printer
2024-04-20 01:41:32,240 [screen.py:_load_panel()] - Loading panel: splash_screen
2024-04-20 01:41:32,331 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 01:41:32,347 [KlippyWebsocket.py:connect()] - Attempting to connect
2024-04-20 01:41:32,379 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:41:32,400 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/access/oneshot_token
2024-04-20 01:41:32,402 [KlippyWebsocket.py:connect()] - Starting websocket thread
2024-04-20 01:41:32,428 [_logging.py:info()] - Websocket connected
2024-04-20 01:41:32,428 [KlippyWebsocket.py:on_open()] - Moonraker Websocket Open
2024-04-20 01:41:32,507 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:41:32,527 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:41:32,529 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'authorization', 'octoprint_compat', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames'], 'warnings': [], 'websocket_count': 1, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 01:41:32,548 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 01:41:32,550 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 01:41:32,582 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/printer/info
2024-04-20 01:41:35,969 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:41:35,985 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 01:41:35,986 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'ready', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'authorization', 'octoprint_compat', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 01:41:36,001 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 01:41:36,003 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 01:41:36,027 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 01:41:36,198 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 01:41:36,205 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '0.000', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '5.0'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': 0.0, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': 5.0, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 01:41:36,221 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 01:41:36,221 [printer.py:reinit()] - # Extruders: 2
2024-04-20 01:41:36,221 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 01:41:36,222 [printer.py:reinit()] - # Fans: 1
2024-04-20 01:41:36,222 [printer.py:reinit()] - # Output pins: 3
2024-04-20 01:41:36,222 [printer.py:reinit()] - # Leds: 0
2024-04-20 01:41:36,264 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 01:41:36,267 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 01:41:36,460 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 01:41:36,534 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:41:36,541 [screen.py:init_tempstore()] - Tempstore not ready: {'result': {}} Retrying in 5 seconds
2024-04-20 01:41:36,547 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 01:41:36,547 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 01:41:36,564 [screen.py:init_printer()] - Printer initialized
2024-04-20 01:41:36,565 [printer.py:change_state()] - Changing state from 'disconnected' to 'ready'
2024-04-20 01:41:36,566 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 01:41:36,623 [screen.py:_load_panel()] - Loading panel: main_menu
2024-04-20 01:41:36,920 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 01:41:36,937 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 01:41:36,947 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 01:41:36,957 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 01:41:36,968 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 01:41:37,038 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 01:41:37,041 [main_menu.py:update_graph_visibility()] - Could not create graph tempstore: []
2024-04-20 01:41:41,966 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 01:41:42,001 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 01:41:42,022 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 01:41:42,024 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 01:56:23,057 [screen.py:_load_panel()] - Loading panel: extrude
2024-04-20 01:56:23,205 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > extrude
2024-04-20 01:56:26,770 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 01:56:26,820 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 01:56:29,660 [screen.py:_go_to_submenu()] - #### Go to submenu more
2024-04-20 01:56:29,661 [screen.py:_go_to_submenu()] - #### Menu __main
2024-04-20 01:56:29,669 [screen.py:_load_panel()] - Loading panel: menu
2024-04-20 01:56:30,091 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 01:56:30,106 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 01:56:30,122 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 01:56:30,133 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 01:56:30,152 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 01:56:30,183 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 01:56:31,941 [screen.py:_load_panel()] - Loading panel: zcalibrate
2024-04-20 01:56:31,960 [printer.py:get_probe()] - Probe type: probe
2024-04-20 01:56:31,960 [zcalibrate.py:__init__()] - Z offset: 0.0
2024-04-20 01:56:32,007 [zcalibrate.py:__init__()] - Available functions for calibration: ['endstop', 'probe']
2024-04-20 01:56:32,059 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > zcalibrate
2024-04-20 01:56:37,145 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G28
2024-04-20 01:56:37,147 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: Z_ENDSTOP_CALIBRATE
2024-04-20 02:16:10,860 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:16:12,090 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:16:12,327 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:16:12,480 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:16:12,624 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:16:12,744 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:16:12,987 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:16:13,484 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:16:17,177 [zcalibrate.py:change_distance()] - ### Distance 5
2024-04-20 02:16:18,414 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:16:20,064 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:16:21,510 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:16:21,992 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:16:22,471 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:16:26,448 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:16:28,471 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:16:29,757 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:16:31,131 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:16:32,459 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:16:33,928 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:16:37,203 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:16:39,000 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:16:40,660 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:16:43,983 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:16:46,657 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:16:50,044 [zcalibrate.py:change_distance()] - ### Distance 1
2024-04-20 02:16:51,154 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:16:52,203 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:16:53,513 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:16:54,434 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:16:57,855 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:16:59,640 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:17:02,690 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:17:05,737 [zcalibrate.py:change_distance()] - ### Distance .5
2024-04-20 02:17:08,500 [zcalibrate.py:change_distance()] - ### Distance .01
2024-04-20 02:17:09,879 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:17:12,744 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:17:15,349 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:17:18,133 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:17:22,686 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:17:26,380 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:17:31,950 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:17:34,010 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:17:37,727 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:17:40,800 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:17:43,741 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:18:04,157 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:18:06,878 [zcalibrate.py:change_distance()] - ### Distance .05
2024-04-20 02:18:08,043 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 02:18:08,994 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 02:18:13,490 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 02:18:15,694 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 02:18:17,300 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 02:18:18,284 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 02:18:26,847 [zcalibrate.py:change_distance()] - ### Distance .01
2024-04-20 02:18:28,804 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:18:33,577 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:18:40,284 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:19:18,583 [zcalibrate.py:accept()] - Accepting Z position
2024-04-20 02:19:18,584 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: ACCEPT
2024-04-20 02:19:18,627 [KlippyGtk.py:Dialog()] - Showing dialog KlipperScreen (width=800, height=480)
2024-04-20 02:19:22,713 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 02:19:22,714 [screen.py:_send_action()] - printer.gcode.script: {'script': 'SAVE_CONFIG'}
2024-04-20 02:19:24,048 [printer.py:change_state()] - Changing state from 'ready' to 'disconnected'
2024-04-20 02:19:24,049 [printer.py:change_state()] - Adding callback for state: disconnected
2024-04-20 02:19:24,050 [screen.py:state_disconnected()] - ### Going to disconnected
2024-04-20 02:19:24,054 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:19:24,138 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 02:19:27,346 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 02:19:27,361 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 02:19:27,363 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'authorization', 'octoprint_compat', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 02:19:27,378 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 02:19:27,380 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 02:19:29,605 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 02:19:29,662 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 02:19:29,670 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '0.000', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '-0.390'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': 0.0, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': -0.39, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 02:19:29,682 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 02:19:29,682 [printer.py:reinit()] - # Extruders: 2
2024-04-20 02:19:29,682 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 02:19:29,683 [printer.py:reinit()] - # Fans: 1
2024-04-20 02:19:29,683 [printer.py:reinit()] - # Output pins: 3
2024-04-20 02:19:29,683 [printer.py:reinit()] - # Leds: 0
2024-04-20 02:19:29,706 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 02:19:29,710 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 02:19:30,111 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 02:19:30,231 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 02:19:30,242 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 02:19:30,258 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 02:19:30,260 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 02:19:30,261 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 02:19:30,261 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 02:19:30,263 [screen.py:init_printer()] - Printer initialized
2024-04-20 02:19:30,264 [printer.py:change_state()] - Changing state from 'disconnected' to 'startup'
2024-04-20 02:19:30,265 [printer.py:change_state()] - Adding callback for state: startup
2024-04-20 02:19:30,385 [printer.py:change_state()] - Changing state from 'startup' to 'ready'
2024-04-20 02:19:30,386 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 02:19:30,390 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:19:30,507 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 02:19:30,524 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 02:19:30,534 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 02:19:30,543 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 02:19:30,553 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 02:19:30,615 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 02:20:05,507 [screen.py:_go_to_submenu()] - #### Go to submenu more
2024-04-20 02:20:05,508 [screen.py:_go_to_submenu()] - #### Menu __main
2024-04-20 02:20:05,516 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:20:05,945 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 02:20:05,959 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 02:20:05,975 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 02:20:05,987 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 02:20:06,005 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 02:20:06,037 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 02:20:08,260 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:20:08,265 [printer.py:get_probe()] - Probe type: probe
2024-04-20 02:20:08,265 [zcalibrate.py:__init__()] - Z offset: 0.0
2024-04-20 02:20:08,311 [zcalibrate.py:__init__()] - Available functions for calibration: ['endstop', 'probe']
2024-04-20 02:20:08,362 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > zcalibrate
2024-04-20 02:20:26,816 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G28
2024-04-20 02:20:26,818 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G91
G0 Z3.0 F180.0
2024-04-20 02:20:26,819 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G90
2024-04-20 02:20:26,821 [zcalibrate.py:_calculate_position()] - Position not configured, probing the middle of the bed
2024-04-20 02:20:26,822 [zcalibrate.py:_calculate_position()] - Center position X:100.0 Y:150.0
2024-04-20 02:20:26,822 [zcalibrate.py:_calculate_position()] - Offset X:0.0 Y:0.0
2024-04-20 02:20:26,822 [zcalibrate.py:_calculate_position()] - Moving to X:100.0 Y:150.0
2024-04-20 02:20:26,823 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G0 X100.0 Y150.0 F3000
2024-04-20 02:20:26,824 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: PROBE_CALIBRATE
2024-04-20 02:22:17,197 [zcalibrate.py:change_distance()] - ### Distance 1
2024-04-20 02:22:18,423 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:22:20,583 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:22:21,556 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:22:22,424 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:22:23,274 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:22:25,470 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+1
2024-04-20 02:22:27,967 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:22:29,734 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+1
2024-04-20 02:22:31,813 [zcalibrate.py:change_distance()] - ### Distance .5
2024-04-20 02:22:32,887 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.5
2024-04-20 02:22:34,653 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.5
2024-04-20 02:22:36,247 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.5
2024-04-20 02:22:37,320 [zcalibrate.py:change_distance()] - ### Distance .1
2024-04-20 02:22:38,594 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 02:22:40,180 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 02:22:41,440 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 02:22:43,946 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 02:22:48,407 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.1
2024-04-20 02:22:49,524 [zcalibrate.py:change_distance()] - ### Distance .05
2024-04-20 02:22:50,440 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.05
2024-04-20 02:22:52,204 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 02:22:54,637 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 02:22:55,937 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.05
2024-04-20 02:22:57,550 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.05
2024-04-20 02:22:59,047 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 02:23:00,454 [zcalibrate.py:change_distance()] - ### Distance .01
2024-04-20 02:23:01,337 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:23:02,920 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:23:04,458 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:23:05,617 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:23:06,683 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:23:08,263 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:23:09,620 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:23:10,834 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:23:11,760 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:23:14,013 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:23:15,194 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:23:16,857 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:23:18,124 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:23:19,427 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:23:20,820 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:23:22,880 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:23:24,203 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:23:25,707 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:23:28,143 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:23:29,137 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:23:30,127 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:23:33,813 [zcalibrate.py:accept()] - Accepting Z position
2024-04-20 02:23:33,814 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: ACCEPT
2024-04-20 02:23:33,830 [KlippyGtk.py:remove_dialog()] - Cannot remove dialog <Gtk.Dialog object at 0x7f8ab8d6c0 (GtkDialog at 0x55aa7ddf50)>
2024-04-20 02:23:33,854 [KlippyGtk.py:Dialog()] - Showing dialog KlipperScreen (width=800, height=480)
2024-04-20 02:23:35,513 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 02:23:35,513 [screen.py:_send_action()] - printer.gcode.script: {'script': 'SAVE_CONFIG'}
2024-04-20 02:23:36,833 [printer.py:change_state()] - Changing state from 'ready' to 'disconnected'
2024-04-20 02:23:36,833 [printer.py:change_state()] - Adding callback for state: disconnected
2024-04-20 02:23:36,834 [screen.py:state_disconnected()] - ### Going to disconnected
2024-04-20 02:23:36,837 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:23:36,915 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 02:23:40,348 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 02:23:40,365 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 02:23:40,367 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'authorization', 'octoprint_compat', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 02:23:40,389 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 02:23:40,391 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 02:23:42,194 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 02:23:42,251 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 02:23:42,258 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '-0.150', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '-0.390'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0\n-0.0, -0.0, -0.0', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': -0.15, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0], [-0.0, -0.0, -0.0]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': -0.39, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 02:23:42,271 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 02:23:42,271 [printer.py:reinit()] - # Extruders: 2
2024-04-20 02:23:42,272 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 02:23:42,272 [printer.py:reinit()] - # Fans: 1
2024-04-20 02:23:42,272 [printer.py:reinit()] - # Output pins: 3
2024-04-20 02:23:42,272 [printer.py:reinit()] - # Leds: 0
2024-04-20 02:23:42,301 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 02:23:42,305 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 02:23:42,696 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 02:23:42,812 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 02:23:42,823 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 02:23:42,839 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 02:23:42,841 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 02:23:42,842 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 02:23:42,842 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 02:23:42,844 [screen.py:init_printer()] - Printer initialized
2024-04-20 02:23:42,845 [printer.py:change_state()] - Changing state from 'disconnected' to 'startup'
2024-04-20 02:23:42,845 [printer.py:change_state()] - Adding callback for state: startup
2024-04-20 02:23:42,973 [printer.py:change_state()] - Changing state from 'startup' to 'ready'
2024-04-20 02:23:42,973 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 02:23:42,978 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:23:43,096 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 02:23:43,113 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 02:23:43,123 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 02:23:43,133 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 02:23:43,143 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 02:23:43,207 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 02:24:18,904 [screen.py:_go_to_submenu()] - #### Go to submenu more
2024-04-20 02:24:18,904 [screen.py:_go_to_submenu()] - #### Menu __main
2024-04-20 02:24:18,912 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:24:19,306 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 02:24:19,320 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 02:24:19,335 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 02:24:19,346 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 02:24:19,363 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 02:24:19,394 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 02:24:20,543 [screen.py:_load_panel()] - Loading panel: bed_mesh
2024-04-20 02:24:20,596 [bed_mesh.py:add_profile()] - Adding Profile: default
2024-04-20 02:24:20,650 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > bed_mesh
2024-04-20 02:24:20,652 [bed_mesh.py:activate_mesh()] - Active None changing to default
2024-04-20 02:24:25,198 [screen.py:show_popup_message()] - echo: Calibrating
2024-04-20 02:24:25,204 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G28
2024-04-20 02:24:25,205 [screen.py:_send_action()] - printer.gcode.script: {'script': 'BED_MESH_CALIBRATE'}
2024-04-20 02:24:25,211 [printer.py:get_probe()] - Probe type: probe
2024-04-20 02:24:25,359 [bed_mesh.py:activate_mesh()] - Clearing active profile
2024-04-20 02:28:31,300 [KlippyGtk.py:remove_dialog()] - Cannot remove dialog <Gtk.Dialog object at 0x7f8abcbd00 (GtkDialog at 0x55aa505c90)>
2024-04-20 02:28:31,323 [KlippyGtk.py:Dialog()] - Showing dialog KlipperScreen (width=800, height=480)
2024-04-20 02:28:31,366 [bed_mesh.py:activate_mesh()] - Active None changing to default
2024-04-20 02:28:43,497 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 02:28:43,497 [screen.py:_send_action()] - printer.gcode.script: {'script': 'SAVE_CONFIG'}
2024-04-20 02:28:44,820 [printer.py:change_state()] - Changing state from 'ready' to 'disconnected'
2024-04-20 02:28:44,820 [printer.py:change_state()] - Adding callback for state: disconnected
2024-04-20 02:28:44,821 [screen.py:state_disconnected()] - ### Going to disconnected
2024-04-20 02:28:44,823 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:28:44,896 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 02:28:48,347 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 02:28:48,363 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 02:28:48,365 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'authorization', 'octoprint_compat', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 02:28:48,380 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 02:28:48,382 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 02:28:50,244 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 02:28:50,301 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 02:28:50,309 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '-0.150', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '-0.390'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n0.870625, 0.776875, 0.781875\n0.392500, 0.458125, 0.451875\n0.582500, 0.443125, 0.476875\n0.191250, 0.131250, 0.128125', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': -0.15, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[0.870625, 0.776875, 0.781875], [0.3925, 0.458125, 0.451875], [0.5825, 0.443125, 0.476875], [0.19125, 0.13125, 0.128125]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': -0.39, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 02:28:50,323 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 02:28:50,323 [printer.py:reinit()] - # Extruders: 2
2024-04-20 02:28:50,323 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 02:28:50,323 [printer.py:reinit()] - # Fans: 1
2024-04-20 02:28:50,324 [printer.py:reinit()] - # Output pins: 3
2024-04-20 02:28:50,324 [printer.py:reinit()] - # Leds: 0
2024-04-20 02:28:50,349 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 02:28:50,353 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 02:28:50,577 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 02:28:50,767 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 02:28:50,788 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 02:28:50,872 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 02:28:50,879 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 02:28:50,880 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 02:28:50,880 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 02:28:50,891 [screen.py:init_printer()] - Printer initialized
2024-04-20 02:28:50,892 [printer.py:change_state()] - Changing state from 'disconnected' to 'startup'
2024-04-20 02:28:50,892 [printer.py:change_state()] - Adding callback for state: startup
2024-04-20 02:28:51,023 [printer.py:change_state()] - Changing state from 'startup' to 'ready'
2024-04-20 02:28:51,023 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 02:28:51,028 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:28:51,147 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 02:28:51,165 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 02:28:51,175 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 02:28:51,184 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 02:28:51,194 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 02:28:51,259 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 02:31:22,566 [screen.py:_load_panel()] - Loading panel: move
2024-04-20 02:31:22,742 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move
2024-04-20 02:31:24,031 [screen.py:_load_panel()] - Loading panel: menu
2024-04-20 02:31:24,236 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move > menu
2024-04-20 02:31:24,266 [menu.py:arrangeMenuItems()] - X > homing quad_gantry_level
2024-04-20 02:31:24,271 [menu.py:arrangeMenuItems()] - X > homing Z-Tilt
2024-04-20 02:31:26,984 [screen.py:_send_action()] - printer.gcode.script: {'script': 'G28'}
2024-04-20 02:41:46,257 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 02:41:46,306 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move
2024-04-20 02:41:50,604 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 02:41:50,650 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 02:41:52,667 [screen.py:_go_to_submenu()] - #### Go to submenu more
2024-04-20 02:41:52,667 [screen.py:_go_to_submenu()] - #### Menu __main
2024-04-20 02:41:52,676 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:41:53,100 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 02:41:53,114 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 02:41:53,128 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 02:41:53,138 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 02:41:53,156 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 02:41:53,185 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 02:41:54,972 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:41:54,978 [printer.py:get_probe()] - Probe type: probe
2024-04-20 02:41:54,978 [zcalibrate.py:__init__()] - Z offset: -0.15
2024-04-20 02:41:55,030 [zcalibrate.py:__init__()] - Available functions for calibration: ['endstop', 'probe']
2024-04-20 02:41:55,082 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > zcalibrate
2024-04-20 02:42:10,719 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G91
G0 Z3.0 F180.0
2024-04-20 02:42:10,720 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G90
2024-04-20 02:42:10,721 [zcalibrate.py:_calculate_position()] - Position not configured, probing the middle of the bed
2024-04-20 02:42:10,722 [zcalibrate.py:_calculate_position()] - Center position X:100.0 Y:150.0
2024-04-20 02:42:10,722 [zcalibrate.py:_calculate_position()] - Offset X:0.0 Y:0.0
2024-04-20 02:42:10,723 [zcalibrate.py:_calculate_position()] - Moving to X:100.0 Y:150.0
2024-04-20 02:42:10,723 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G0 X100.0 Y150.0 F3000
2024-04-20 02:42:10,724 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: PROBE_CALIBRATE
2024-04-20 02:43:05,630 [zcalibrate.py:change_distance()] - ### Distance 1
2024-04-20 02:43:06,920 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:43:07,739 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:43:08,560 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:43:09,340 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:43:10,227 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:43:11,757 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+1
2024-04-20 02:43:15,390 [zcalibrate.py:change_distance()] - ### Distance .5
2024-04-20 02:43:16,327 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.5
2024-04-20 02:43:17,071 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.5
2024-04-20 02:43:18,445 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.5
2024-04-20 02:43:20,463 [zcalibrate.py:change_distance()] - ### Distance .1
2024-04-20 02:43:21,294 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 02:43:22,143 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 02:43:23,027 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 02:43:24,620 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.1
2024-04-20 02:43:26,321 [zcalibrate.py:change_distance()] - ### Distance .05
2024-04-20 02:43:27,087 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.05
2024-04-20 02:43:28,000 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.05
2024-04-20 02:43:29,563 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 02:43:30,993 [zcalibrate.py:change_distance()] - ### Distance .01
2024-04-20 02:43:33,147 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:43:34,099 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:43:34,970 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:43:35,927 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:43:36,880 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:43:38,484 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:43:39,865 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:43:40,724 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:43:41,505 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:43:42,735 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:43:43,584 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:43:52,199 [zcalibrate.py:accept()] - Accepting Z position
2024-04-20 02:43:52,199 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: ACCEPT
2024-04-20 02:43:52,215 [KlippyGtk.py:remove_dialog()] - Cannot remove dialog <Gtk.Dialog object at 0x7f8abbcc80 (GtkDialog at 0x55aa809f40)>
2024-04-20 02:43:52,240 [KlippyGtk.py:Dialog()] - Showing dialog KlipperScreen (width=800, height=480)
2024-04-20 02:43:53,656 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 02:43:53,657 [screen.py:_send_action()] - printer.gcode.script: {'script': 'SAVE_CONFIG'}
2024-04-20 02:43:54,978 [printer.py:change_state()] - Changing state from 'ready' to 'disconnected'
2024-04-20 02:43:54,978 [printer.py:change_state()] - Adding callback for state: disconnected
2024-04-20 02:43:54,980 [screen.py:state_disconnected()] - ### Going to disconnected
2024-04-20 02:43:54,983 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:43:55,065 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 02:43:58,348 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 02:43:58,365 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 02:43:58,367 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'authorization', 'octoprint_compat', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 02:43:58,383 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 02:43:58,385 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 02:44:00,335 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 02:44:00,393 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 02:44:00,400 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '-0.200', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '-0.390'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n0.870625, 0.776875, 0.781875\n0.392500, 0.458125, 0.451875\n0.582500, 0.443125, 0.476875\n0.191250, 0.131250, 0.128125', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': -0.2, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[0.870625, 0.776875, 0.781875], [0.3925, 0.458125, 0.451875], [0.5825, 0.443125, 0.476875], [0.19125, 0.13125, 0.128125]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': -0.39, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 02:44:00,414 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 02:44:00,414 [printer.py:reinit()] - # Extruders: 2
2024-04-20 02:44:00,414 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 02:44:00,414 [printer.py:reinit()] - # Fans: 1
2024-04-20 02:44:00,414 [printer.py:reinit()] - # Output pins: 3
2024-04-20 02:44:00,415 [printer.py:reinit()] - # Leds: 0
2024-04-20 02:44:00,438 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 02:44:00,442 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 02:44:00,702 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 02:44:00,866 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 02:44:00,886 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 02:44:00,964 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 02:44:00,971 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 02:44:00,972 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 02:44:00,972 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 02:44:00,976 [screen.py:init_printer()] - Printer initialized
2024-04-20 02:44:00,977 [printer.py:change_state()] - Changing state from 'disconnected' to 'startup'
2024-04-20 02:44:00,977 [printer.py:change_state()] - Adding callback for state: startup
2024-04-20 02:44:01,116 [printer.py:change_state()] - Changing state from 'startup' to 'ready'
2024-04-20 02:44:01,117 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 02:44:01,121 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:44:01,240 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 02:44:01,257 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 02:44:01,267 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 02:44:01,277 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 02:44:01,287 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 02:44:01,350 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 02:44:07,767 [screen.py:_go_to_submenu()] - #### Go to submenu more
2024-04-20 02:44:07,768 [screen.py:_go_to_submenu()] - #### Menu __main
2024-04-20 02:44:07,776 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:44:08,208 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 02:44:08,222 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 02:44:08,237 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 02:44:08,248 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 02:44:08,263 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 02:44:08,300 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 02:44:11,605 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:44:11,638 [bed_mesh.py:add_profile()] - Adding Profile: default
2024-04-20 02:44:11,690 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > bed_mesh
2024-04-20 02:44:11,692 [bed_mesh.py:activate_mesh()] - Active None changing to default
2024-04-20 02:44:13,755 [screen.py:show_popup_message()] - echo: Calibrating
2024-04-20 02:44:13,761 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G28
2024-04-20 02:44:13,762 [screen.py:_send_action()] - printer.gcode.script: {'script': 'BED_MESH_CALIBRATE'}
2024-04-20 02:44:13,767 [printer.py:get_probe()] - Probe type: probe
2024-04-20 02:44:13,916 [bed_mesh.py:activate_mesh()] - Clearing active profile
2024-04-20 02:48:25,830 [KlippyGtk.py:remove_dialog()] - Cannot remove dialog <Gtk.Dialog object at 0x7f8ab97480 (GtkDialog at 0x55aa7dd410)>
2024-04-20 02:48:25,854 [KlippyGtk.py:Dialog()] - Showing dialog KlipperScreen (width=800, height=480)
2024-04-20 02:48:25,931 [bed_mesh.py:activate_mesh()] - Active None changing to default
2024-04-20 02:48:29,639 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 02:48:29,640 [screen.py:_send_action()] - printer.gcode.script: {'script': 'SAVE_CONFIG'}
2024-04-20 02:48:30,960 [printer.py:change_state()] - Changing state from 'ready' to 'disconnected'
2024-04-20 02:48:30,960 [printer.py:change_state()] - Adding callback for state: disconnected
2024-04-20 02:48:30,961 [screen.py:state_disconnected()] - ### Going to disconnected
2024-04-20 02:48:30,965 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:48:31,047 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 02:48:34,348 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 02:48:34,365 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 02:48:34,367 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'authorization', 'octoprint_compat', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 02:48:34,383 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 02:48:34,385 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 02:48:36,303 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 02:48:36,362 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile

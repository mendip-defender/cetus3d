2024-04-20 02:48:36,369 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '-0.200', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '-0.390'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n0.321250, 0.176875, -0.050625\n0.054375, -0.082500, -0.258750\n-0.017500, -0.075625, -0.135625\n0.124375, 0.022500, 0.030625', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': -0.2, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[0.32125, 0.176875, -0.050625], [0.054375, -0.0825, -0.25875], [-0.0175, -0.075625, -0.135625], [0.124375, 0.0225, 0.030625]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': -0.39, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 02:48:36,383 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 02:48:36,383 [printer.py:reinit()] - # Extruders: 2
2024-04-20 02:48:36,384 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 02:48:36,384 [printer.py:reinit()] - # Fans: 1
2024-04-20 02:48:36,384 [printer.py:reinit()] - # Output pins: 3
2024-04-20 02:48:36,384 [printer.py:reinit()] - # Leds: 0
2024-04-20 02:48:36,404 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 02:48:36,405 [functions.py:log_start()] - --------------------KlipperScreen Log Start--------------------
2024-04-20 02:48:36,406 [functions.py:log_start()] - KlipperScreen Version: v0.3.6-88-g6eefe9d
2024-04-20 02:48:36,406 [functions.py:log_start()] - Python version: 3.10
2024-04-20 02:48:36,409 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 02:48:36,784 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 02:48:36,928 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 02:48:36,938 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 02:48:36,955 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 02:48:36,957 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 02:48:36,957 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 02:48:36,957 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 02:48:36,958 [screen.py:init_printer()] - Printer initialized
2024-04-20 02:48:36,960 [printer.py:change_state()] - Changing state from 'disconnected' to 'startup'
2024-04-20 02:48:36,960 [printer.py:change_state()] - Adding callback for state: startup
2024-04-20 02:48:37,084 [printer.py:change_state()] - Changing state from 'startup' to 'ready'
2024-04-20 02:48:37,085 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 02:48:37,089 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:48:37,207 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 02:48:37,224 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 02:48:37,233 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 02:48:37,243 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 02:48:37,254 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 02:48:37,321 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 02:48:39,976 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:48:40,113 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move
2024-04-20 02:48:45,200 [screen.py:_send_action()] - printer.gcode.script: {'script': 'G91\nG0 X-25 F11700'}
2024-04-20 02:48:45,205 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G90
2024-04-20 02:48:45,222 [screen.py:show_popup_message()] - error: Must home axis first: -25.000 0.000 0.000 [0.000]
2024-04-20 02:48:55,391 [KlippyGtk.py:remove_dialog()] - Cannot remove dialog <Gtk.Dialog object at 0x7f8bfb4200 (GtkDialog at 0x55aa77b930)>
2024-04-20 02:48:55,415 [KlippyGtk.py:Dialog()] - Showing dialog KlipperScreen (width=800, height=480)
2024-04-20 02:48:58,230 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 02:48:58,230 [screen.py:_send_action()] - printer.gcode.script: {'script': 'M18'}
2024-04-20 02:49:05,590 [screen.py:_menu_go_back()] - #### Menu go home
2024-04-20 02:49:05,640 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 02:49:08,107 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move
2024-04-20 02:49:08,907 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:49:09,101 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move > menu
2024-04-20 02:49:09,128 [menu.py:arrangeMenuItems()] - X > homing quad_gantry_level
2024-04-20 02:49:09,133 [menu.py:arrangeMenuItems()] - X > homing Z-Tilt
2024-04-20 02:49:18,040 [screen.py:_send_action()] - printer.gcode.script: {'script': 'G28 X Y'}
2024-04-20 02:49:57,277 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 02:49:57,329 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move
2024-04-20 02:50:00,234 [screen_panel.py:load_menu()] - loading menu options
2024-04-20 02:50:05,183 [screen_panel.py:unload_menu()] - self.menu: ['move_menu', 'options_menu']
2024-04-20 02:50:06,826 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 02:50:06,874 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 02:50:07,820 [screen.py:_go_to_submenu()] - #### Go to submenu more
2024-04-20 02:50:07,821 [screen.py:_go_to_submenu()] - #### Menu __main
2024-04-20 02:50:07,829 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:50:08,256 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 02:50:08,271 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 02:50:08,287 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 02:50:08,298 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 02:50:08,314 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 02:50:08,342 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 02:50:11,052 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:50:11,058 [printer.py:get_probe()] - Probe type: probe
2024-04-20 02:50:11,058 [zcalibrate.py:__init__()] - Z offset: -0.2
2024-04-20 02:50:11,111 [zcalibrate.py:__init__()] - Available functions for calibration: ['endstop', 'probe']
2024-04-20 02:50:11,164 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > zcalibrate
2024-04-20 02:50:18,266 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: Z_ENDSTOP_CALIBRATE
2024-04-20 02:50:36,400 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:50:37,647 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:50:40,023 [zcalibrate.py:change_distance()] - ### Distance 5
2024-04-20 02:50:40,903 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:50:40,917 [screen.py:show_popup_message()] - error: Move out of range: 9.000 45.000 -5.020 [0.000]
2024-04-20 02:50:40,925 [screen.py:show_popup_message()] - error: !! Move out of range: 9.000 45.000 -5.020 [0.000]
2024-04-20 02:50:40,930 [zcalibrate.py:process_update()] - !! Move out of range: 9.000 45.000 -5.020 [0.000]
2024-04-20 02:50:51,918 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: Z_ENDSTOP_CALIBRATE
2024-04-20 02:50:53,420 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:50:53,433 [screen.py:show_popup_message()] - error: Move out of range: 9.000 45.000 -5.020 [0.000]
2024-04-20 02:50:53,444 [screen.py:show_popup_message()] - error: !! Move out of range: 9.000 45.000 -5.020 [0.000]
2024-04-20 02:50:53,450 [zcalibrate.py:process_update()] - !! Move out of range: 9.000 45.000 -5.020 [0.000]
2024-04-20 02:51:09,355 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: Z_ENDSTOP_CALIBRATE
2024-04-20 02:51:12,986 [zcalibrate.py:change_distance()] - ### Distance 1
2024-04-20 02:51:14,163 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:51:15,877 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:51:18,690 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:51:18,704 [screen.py:show_popup_message()] - error: Move out of range: 9.000 45.000 -3.020 [0.000]
2024-04-20 02:51:18,714 [screen.py:show_popup_message()] - error: !! Move out of range: 9.000 45.000 -3.020 [0.000]
2024-04-20 02:51:18,721 [zcalibrate.py:process_update()] - !! Move out of range: 9.000 45.000 -3.020 [0.000]
2024-04-20 02:51:32,652 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G91
G0 Z3.0 F180.0
2024-04-20 02:51:32,653 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G90
2024-04-20 02:51:32,655 [zcalibrate.py:_calculate_position()] - Position not configured, probing the middle of the bed
2024-04-20 02:51:32,655 [zcalibrate.py:_calculate_position()] - Center position X:100.0 Y:150.0
2024-04-20 02:51:32,656 [zcalibrate.py:_calculate_position()] - Offset X:0.0 Y:0.0
2024-04-20 02:51:32,656 [zcalibrate.py:_calculate_position()] - Moving to X:100.0 Y:150.0
2024-04-20 02:51:32,656 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G0 X100.0 Y150.0 F3000
2024-04-20 02:51:32,658 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: PROBE_CALIBRATE
2024-04-20 02:51:39,718 [screen.py:show_popup_message()] - error: No trigger on probe after full movement
2024-04-20 02:51:49,784 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 02:51:49,837 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 02:51:49,854 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 02:51:49,869 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 02:51:49,880 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 02:51:49,897 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 02:51:49,930 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 02:51:51,586 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > zcalibrate
2024-04-20 02:51:59,133 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 02:51:59,189 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 02:51:59,207 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 02:51:59,222 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 02:51:59,233 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 02:51:59,250 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 02:51:59,282 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 02:52:02,533 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 02:52:02,588 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 02:52:04,342 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move
2024-04-20 02:52:07,228 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move > menu
2024-04-20 02:52:07,258 [menu.py:arrangeMenuItems()] - X > homing quad_gantry_level
2024-04-20 02:52:07,263 [menu.py:arrangeMenuItems()] - X > homing Z-Tilt
2024-04-20 02:52:10,677 [screen.py:_send_action()] - printer.gcode.script: {'script': 'G28 Z'}
2024-04-20 02:52:48,332 [screen.py:_send_action()] - printer.gcode.script: {'script': 'G28'}
2024-04-20 02:55:22,624 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 02:55:22,675 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move
2024-04-20 02:55:27,104 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 02:55:27,155 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 02:55:29,493 [screen.py:_go_to_submenu()] - #### Go to submenu more
2024-04-20 02:55:29,494 [screen.py:_go_to_submenu()] - #### Menu __main
2024-04-20 02:55:29,553 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 02:55:29,570 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 02:55:29,584 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 02:55:29,594 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 02:55:29,610 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 02:55:29,643 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 02:55:30,664 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > zcalibrate
2024-04-20 02:55:32,886 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: Z_ENDSTOP_CALIBRATE
2024-04-20 02:55:36,597 [zcalibrate.py:change_distance()] - ### Distance 5
2024-04-20 02:55:38,527 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:55:39,220 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:55:41,574 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:55:41,796 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:55:42,937 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:55:44,020 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:55:45,174 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:55:46,256 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:55:48,193 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:55:48,713 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:55:49,855 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:55:50,313 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:55:50,634 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:55:50,891 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:55:52,410 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:55:53,217 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:56:00,830 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:56:00,837 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:56:05,524 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:56:05,530 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 02:56:08,857 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+5
2024-04-20 02:56:11,190 [zcalibrate.py:change_distance()] - ### Distance 1
2024-04-20 02:56:12,140 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:56:13,186 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:56:15,437 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:56:18,530 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:56:20,740 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 02:56:32,806 [zcalibrate.py:change_distance()] - ### Distance .1
2024-04-20 02:56:33,730 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 02:56:36,403 [zcalibrate.py:change_distance()] - ### Distance .05
2024-04-20 02:56:37,820 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.05
2024-04-20 02:56:48,377 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.05
2024-04-20 02:56:52,573 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 02:56:53,450 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 02:58:00,023 [zcalibrate.py:change_distance()] - ### Distance .01
2024-04-20 02:58:01,910 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:58:08,775 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:58:09,696 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:58:13,920 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 02:58:19,472 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:58:30,587 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 02:58:38,413 [zcalibrate.py:accept()] - Accepting Z position
2024-04-20 02:58:38,414 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: ACCEPT
2024-04-20 02:58:38,428 [KlippyGtk.py:remove_dialog()] - Cannot remove dialog <Gtk.Dialog object at 0x7f8ab91c00 (GtkDialog at 0x55aa43a5b0)>
2024-04-20 02:58:38,453 [KlippyGtk.py:Dialog()] - Showing dialog KlipperScreen (width=800, height=480)
2024-04-20 02:58:39,843 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 02:58:39,843 [screen.py:_send_action()] - printer.gcode.script: {'script': 'SAVE_CONFIG'}
2024-04-20 02:58:41,164 [printer.py:change_state()] - Changing state from 'ready' to 'disconnected'
2024-04-20 02:58:41,165 [printer.py:change_state()] - Adding callback for state: disconnected
2024-04-20 02:58:41,166 [screen.py:state_disconnected()] - ### Going to disconnected
2024-04-20 02:58:41,170 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:58:41,242 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 02:58:44,346 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 02:58:44,362 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 02:58:44,364 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'authorization', 'octoprint_compat', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 02:58:44,378 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 02:58:44,380 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 02:58:46,801 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 02:58:46,861 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 02:58:46,869 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '-0.200', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '-0.290'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n0.321250, 0.176875, -0.050625\n0.054375, -0.082500, -0.258750\n-0.017500, -0.075625, -0.135625\n0.124375, 0.022500, 0.030625', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': -0.2, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[0.32125, 0.176875, -0.050625], [0.054375, -0.0825, -0.25875], [-0.0175, -0.075625, -0.135625], [0.124375, 0.0225, 0.030625]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': -0.29, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 02:58:46,883 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 02:58:46,883 [printer.py:reinit()] - # Extruders: 2
2024-04-20 02:58:46,883 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 02:58:46,883 [printer.py:reinit()] - # Fans: 1
2024-04-20 02:58:46,884 [printer.py:reinit()] - # Output pins: 3
2024-04-20 02:58:46,884 [printer.py:reinit()] - # Leds: 0
2024-04-20 02:58:46,909 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 02:58:46,913 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 02:58:47,253 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 02:58:47,439 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 02:58:47,450 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 02:58:47,467 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 02:58:47,469 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 02:58:47,470 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 02:58:47,471 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 02:58:47,472 [screen.py:init_printer()] - Printer initialized
2024-04-20 02:58:47,473 [printer.py:change_state()] - Changing state from 'disconnected' to 'startup'
2024-04-20 02:58:47,474 [printer.py:change_state()] - Adding callback for state: startup
2024-04-20 02:58:47,581 [printer.py:change_state()] - Changing state from 'startup' to 'ready'
2024-04-20 02:58:47,581 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 02:58:47,586 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:58:47,704 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 02:58:47,721 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 02:58:47,731 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 02:58:47,741 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 02:58:47,751 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 02:58:47,815 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 02:58:52,134 [screen.py:_go_to_submenu()] - #### Go to submenu more
2024-04-20 02:58:52,134 [screen.py:_go_to_submenu()] - #### Menu __main
2024-04-20 02:58:52,142 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:58:52,541 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 02:58:52,555 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 02:58:52,570 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 02:58:52,581 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 02:58:52,597 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 02:58:52,628 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 02:58:54,719 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 02:58:54,724 [printer.py:get_probe()] - Probe type: probe
2024-04-20 02:58:54,725 [zcalibrate.py:__init__()] - Z offset: -0.2
2024-04-20 02:58:54,774 [zcalibrate.py:__init__()] - Available functions for calibration: ['endstop', 'probe']
2024-04-20 02:58:54,826 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > zcalibrate
2024-04-20 02:58:58,992 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G28
2024-04-20 02:58:58,994 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G91
G0 Z3.0 F180.0
2024-04-20 02:58:58,995 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G90
2024-04-20 02:58:58,997 [zcalibrate.py:_calculate_position()] - Position not configured, probing the middle of the bed
2024-04-20 02:58:58,997 [zcalibrate.py:_calculate_position()] - Center position X:100.0 Y:150.0
2024-04-20 02:58:58,998 [zcalibrate.py:_calculate_position()] - Offset X:0.0 Y:0.0
2024-04-20 02:58:58,998 [zcalibrate.py:_calculate_position()] - Moving to X:100.0 Y:150.0
2024-04-20 02:58:58,999 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G0 X100.0 Y150.0 F3000
2024-04-20 02:58:59,000 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: PROBE_CALIBRATE
2024-04-20 03:01:13,143 [zcalibrate.py:change_distance()] - ### Distance .1
2024-04-20 03:01:14,500 [zcalibrate.py:change_distance()] - ### Distance 1
2024-04-20 03:01:15,483 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 03:01:17,240 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 03:01:17,944 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 03:01:20,131 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 03:01:23,723 [zcalibrate.py:change_distance()] - ### Distance .1
2024-04-20 03:01:28,227 [zcalibrate.py:change_distance()] - ### Distance .5
2024-04-20 03:01:29,250 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.5
2024-04-20 03:01:31,175 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.5
2024-04-20 03:01:32,624 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.5
2024-04-20 03:01:34,130 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.5
2024-04-20 03:01:35,273 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.5
2024-04-20 03:01:36,227 [zcalibrate.py:change_distance()] - ### Distance .1
2024-04-20 03:01:37,653 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 03:01:40,250 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 03:01:41,660 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 03:01:42,653 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 03:01:44,080 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.1
2024-04-20 03:01:46,393 [zcalibrate.py:change_distance()] - ### Distance .05
2024-04-20 03:01:47,133 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.05
2024-04-20 03:01:48,547 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 03:01:51,316 [zcalibrate.py:change_distance()] - ### Distance .01
2024-04-20 03:01:52,401 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 03:01:53,780 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 03:01:55,138 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 03:01:56,670 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 03:01:58,133 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 03:01:59,557 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 03:02:01,583 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 03:02:02,737 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 03:02:05,990 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 03:02:15,327 [zcalibrate.py:accept()] - Accepting Z position
2024-04-20 03:02:15,327 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: ACCEPT
2024-04-20 03:02:15,357 [KlippyGtk.py:remove_dialog()] - Cannot remove dialog <Gtk.Dialog object at 0x7f8bfed440 (GtkDialog at 0x55aa7ddc80)>
2024-04-20 03:02:15,381 [KlippyGtk.py:Dialog()] - Showing dialog KlipperScreen (width=800, height=480)
2024-04-20 03:02:17,013 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 03:02:17,014 [screen.py:_send_action()] - printer.gcode.script: {'script': 'SAVE_CONFIG'}
2024-04-20 03:02:18,338 [printer.py:change_state()] - Changing state from 'ready' to 'disconnected'
2024-04-20 03:02:18,339 [printer.py:change_state()] - Adding callback for state: disconnected
2024-04-20 03:02:18,340 [screen.py:state_disconnected()] - ### Going to disconnected
2024-04-20 03:02:18,344 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:02:18,423 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 03:02:21,348 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 03:02:21,367 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 03:02:21,369 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'authorization', 'octoprint_compat', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 03:02:21,392 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 03:02:21,395 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 03:02:23,729 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 03:02:23,786 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 03:02:23,793 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '-0.170', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '-0.290'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n0.321250, 0.176875, -0.050625\n0.054375, -0.082500, -0.258750\n-0.017500, -0.075625, -0.135625\n0.124375, 0.022500, 0.030625', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': -0.17, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[0.32125, 0.176875, -0.050625], [0.054375, -0.0825, -0.25875], [-0.0175, -0.075625, -0.135625], [0.124375, 0.0225, 0.030625]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': -0.29, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 03:02:23,807 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 03:02:23,808 [printer.py:reinit()] - # Extruders: 2
2024-04-20 03:02:23,808 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 03:02:23,808 [printer.py:reinit()] - # Fans: 1
2024-04-20 03:02:23,808 [printer.py:reinit()] - # Output pins: 3
2024-04-20 03:02:23,809 [printer.py:reinit()] - # Leds: 0
2024-04-20 03:02:23,831 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 03:02:23,835 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 03:02:24,169 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 03:02:24,351 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 03:02:24,362 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 03:02:24,379 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 03:02:24,381 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 03:02:24,382 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 03:02:24,383 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 03:02:24,384 [screen.py:init_printer()] - Printer initialized
2024-04-20 03:02:24,385 [printer.py:change_state()] - Changing state from 'disconnected' to 'startup'
2024-04-20 03:02:24,386 [printer.py:change_state()] - Adding callback for state: startup
2024-04-20 03:02:24,510 [printer.py:change_state()] - Changing state from 'startup' to 'ready'
2024-04-20 03:02:24,510 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 03:02:24,515 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:02:24,632 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 03:02:24,650 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 03:02:24,659 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 03:02:24,669 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 03:02:24,679 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 03:02:24,743 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 03:03:27,436 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:03:27,592 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move
2024-04-20 03:03:30,894 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:03:31,086 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move > menu
2024-04-20 03:03:31,113 [menu.py:arrangeMenuItems()] - X > homing quad_gantry_level
2024-04-20 03:03:31,118 [menu.py:arrangeMenuItems()] - X > homing Z-Tilt
2024-04-20 03:03:35,206 [screen.py:_send_action()] - printer.gcode.script: {'script': 'G28'}
2024-04-20 03:04:33,270 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 03:04:33,317 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move
2024-04-20 03:04:35,413 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 03:04:35,466 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 03:04:37,377 [screen.py:_go_to_submenu()] - #### Go to submenu more
2024-04-20 03:04:37,377 [screen.py:_go_to_submenu()] - #### Menu __main
2024-04-20 03:04:37,385 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:04:37,793 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 03:04:37,806 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 03:04:37,821 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 03:04:37,831 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 03:04:37,847 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 03:04:37,876 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 03:04:40,806 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:04:40,840 [bed_mesh.py:add_profile()] - Adding Profile: default
2024-04-20 03:04:40,895 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > bed_mesh
2024-04-20 03:04:40,896 [bed_mesh.py:activate_mesh()] - Active None changing to default
2024-04-20 03:04:45,221 [screen.py:show_popup_message()] - echo: Calibrating
2024-04-20 03:04:45,229 [screen.py:_send_action()] - printer.gcode.script: {'script': 'BED_MESH_CALIBRATE'}
2024-04-20 03:04:45,233 [printer.py:get_probe()] - Probe type: probe
2024-04-20 03:04:45,481 [bed_mesh.py:activate_mesh()] - Clearing active profile
2024-04-20 03:08:05,137 [KlippyGtk.py:remove_dialog()] - Cannot remove dialog <Gtk.Dialog object at 0x7f8ab73e40 (GtkDialog at 0x55aa96a5e0)>
2024-04-20 03:08:05,160 [KlippyGtk.py:Dialog()] - Showing dialog KlipperScreen (width=800, height=480)
2024-04-20 03:08:05,369 [bed_mesh.py:activate_mesh()] - Active None changing to default
2024-04-20 03:08:34,576 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 03:08:34,577 [screen.py:_send_action()] - printer.gcode.script: {'script': 'SAVE_CONFIG'}
2024-04-20 03:08:35,899 [printer.py:change_state()] - Changing state from 'ready' to 'disconnected'
2024-04-20 03:08:35,899 [printer.py:change_state()] - Adding callback for state: disconnected
2024-04-20 03:08:35,900 [screen.py:state_disconnected()] - ### Going to disconnected
2024-04-20 03:08:35,903 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:08:35,980 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 03:08:39,347 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 03:08:39,363 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 03:08:39,366 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'authorization', 'octoprint_compat', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 03:08:39,381 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 03:08:39,383 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 03:08:41,245 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 03:08:41,303 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 03:08:41,311 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '-0.170', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '-0.290'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n0.430625, 0.250625, 0.085000\n0.140625, 0.026875, -0.181250\n0.086875, 0.014375, -0.061875\n0.248125, 0.160625, 0.173125', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': -0.17, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[0.430625, 0.250625, 0.085], [0.140625, 0.026875, -0.18125], [0.086875, 0.014375, -0.061875], [0.248125, 0.160625, 0.173125]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': -0.29, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 03:08:41,325 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 03:08:41,326 [printer.py:reinit()] - # Extruders: 2
2024-04-20 03:08:41,326 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 03:08:41,326 [printer.py:reinit()] - # Fans: 1
2024-04-20 03:08:41,327 [printer.py:reinit()] - # Output pins: 3
2024-04-20 03:08:41,327 [printer.py:reinit()] - # Leds: 0
2024-04-20 03:08:41,350 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 03:08:41,353 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 03:08:41,611 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 03:08:41,803 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 03:08:41,830 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 03:08:41,900 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 03:08:41,902 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 03:08:41,903 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 03:08:41,903 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 03:08:41,905 [screen.py:init_printer()] - Printer initialized
2024-04-20 03:08:41,907 [printer.py:change_state()] - Changing state from 'disconnected' to 'startup'
2024-04-20 03:08:41,907 [printer.py:change_state()] - Adding callback for state: startup
2024-04-20 03:08:42,026 [printer.py:change_state()] - Changing state from 'startup' to 'ready'
2024-04-20 03:08:42,026 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 03:08:42,031 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:08:42,151 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 03:08:42,169 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 03:08:42,178 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 03:08:42,188 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 03:08:42,198 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 03:08:42,262 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 03:10:29,979 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:10:30,128 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move
2024-04-20 03:10:31,448 [KlippyGtk.py:remove_dialog()] - Cannot remove dialog <Gtk.Dialog object at 0x7f8abc5300 (GtkDialog at 0x55aa649f00)>
2024-04-20 03:10:31,473 [KlippyGtk.py:Dialog()] - Showing dialog KlipperScreen (width=800, height=480)
2024-04-20 03:10:35,193 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 03:10:35,194 [screen.py:_send_action()] - printer.gcode.script: {'script': 'M18'}
2024-04-20 03:10:39,824 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:10:40,037 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move > menu
2024-04-20 03:10:40,064 [menu.py:arrangeMenuItems()] - X > homing quad_gantry_level
2024-04-20 03:10:40,069 [menu.py:arrangeMenuItems()] - X > homing Z-Tilt
2024-04-20 03:10:41,424 [screen.py:_send_action()] - printer.gcode.script: {'script': 'G28'}
2024-04-20 03:12:33,070 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 03:12:33,121 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move
2024-04-20 03:12:35,887 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 03:12:35,937 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 03:14:29,653 [screen.py:_go_to_submenu()] - #### Go to submenu more
2024-04-20 03:14:29,654 [screen.py:_go_to_submenu()] - #### Menu __main
2024-04-20 03:14:29,661 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:14:30,059 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 03:14:30,073 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 03:14:30,089 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 03:14:30,101 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 03:14:30,119 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 03:14:30,152 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 03:14:31,049 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:14:31,054 [printer.py:get_probe()] - Probe type: probe
2024-04-20 03:14:31,055 [zcalibrate.py:__init__()] - Z offset: -0.17
2024-04-20 03:14:31,106 [zcalibrate.py:__init__()] - Available functions for calibration: ['endstop', 'probe']
2024-04-20 03:14:31,158 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > zcalibrate
2024-04-20 03:14:48,678 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: Z_ENDSTOP_CALIBRATE
2024-04-20 03:14:50,880 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 03:14:53,113 [zcalibrate.py:change_distance()] - ### Distance 5
2024-04-20 03:14:53,967 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:14:54,667 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:14:55,356 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:14:56,339 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:14:56,753 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:14:57,170 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:15:02,980 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:15:03,726 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:15:05,940 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:15:07,227 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:15:08,617 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:15:09,968 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:15:13,823 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:15:14,973 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:15:16,376 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:15:17,626 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:15:19,095 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:15:20,487 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:15:23,020 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 03:15:25,807 [zcalibrate.py:change_distance()] - ### Distance 1
2024-04-20 03:15:39,613 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 03:15:40,543 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 03:15:41,690 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 03:15:42,536 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 03:15:44,087 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 03:15:52,276 [zcalibrate.py:change_distance()] - ### Distance .01
2024-04-20 03:15:55,233 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 03:15:58,737 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 03:16:01,466 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 03:16:03,873 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 03:16:07,133 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 03:16:13,330 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 03:16:18,949 [zcalibrate.py:accept()] - Accepting Z position
2024-04-20 03:16:18,950 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: ACCEPT
2024-04-20 03:16:18,966 [KlippyGtk.py:remove_dialog()] - Cannot remove dialog <Gtk.Dialog object at 0x7f8ac63000 (GtkDialog at 0x55aa7093f0)>
2024-04-20 03:16:18,990 [KlippyGtk.py:Dialog()] - Showing dialog KlipperScreen (width=800, height=480)
2024-04-20 03:16:21,819 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 03:16:21,820 [screen.py:_send_action()] - printer.gcode.script: {'script': 'SAVE_CONFIG'}
2024-04-20 03:16:23,140 [printer.py:change_state()] - Changing state from 'ready' to 'disconnected'
2024-04-20 03:16:23,141 [printer.py:change_state()] - Adding callback for state: disconnected
2024-04-20 03:16:23,142 [screen.py:state_disconnected()] - ### Going to disconnected
2024-04-20 03:16:23,145 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:16:23,218 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 03:16:26,358 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 03:16:26,376 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 03:16:26,378 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'authorization', 'octoprint_compat', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 03:16:26,397 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 03:16:26,399 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 03:16:28,580 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 03:16:28,636 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 03:16:28,646 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '-0.170', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '-0.320'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n0.430625, 0.250625, 0.085000\n0.140625, 0.026875, -0.181250\n0.086875, 0.014375, -0.061875\n0.248125, 0.160625, 0.173125', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': -0.17, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[0.430625, 0.250625, 0.085], [0.140625, 0.026875, -0.18125], [0.086875, 0.014375, -0.061875], [0.248125, 0.160625, 0.173125]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': -0.32, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 03:16:28,660 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 03:16:28,661 [printer.py:reinit()] - # Extruders: 2
2024-04-20 03:16:28,661 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 03:16:28,662 [printer.py:reinit()] - # Fans: 1
2024-04-20 03:16:28,662 [printer.py:reinit()] - # Output pins: 3
2024-04-20 03:16:28,662 [printer.py:reinit()] - # Leds: 0
2024-04-20 03:16:28,688 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 03:16:28,692 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 03:16:28,967 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 03:16:29,159 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 03:16:29,185 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 03:16:29,225 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 03:16:29,227 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 03:16:29,227 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 03:16:29,228 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 03:16:29,229 [screen.py:init_printer()] - Printer initialized
2024-04-20 03:16:29,230 [printer.py:change_state()] - Changing state from 'disconnected' to 'startup'
2024-04-20 03:16:29,230 [printer.py:change_state()] - Adding callback for state: startup
2024-04-20 03:16:29,359 [printer.py:change_state()] - Changing state from 'startup' to 'ready'
2024-04-20 03:16:29,360 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 03:16:29,365 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:16:29,483 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 03:16:29,507 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 03:16:29,517 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 03:16:29,527 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 03:16:29,537 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 03:16:29,600 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 03:16:32,256 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:16:32,394 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move
2024-04-20 03:16:33,537 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:16:33,724 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move > menu
2024-04-20 03:16:33,757 [menu.py:arrangeMenuItems()] - X > homing quad_gantry_level
2024-04-20 03:16:33,762 [menu.py:arrangeMenuItems()] - X > homing Z-Tilt
2024-04-20 03:16:34,905 [screen.py:_send_action()] - printer.gcode.script: {'script': 'G28'}
2024-04-20 03:17:42,630 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 03:17:42,677 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move
2024-04-20 03:17:48,127 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 03:17:48,177 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 03:17:49,780 [screen.py:_go_to_submenu()] - #### Go to submenu more
2024-04-20 03:17:49,780 [screen.py:_go_to_submenu()] - #### Menu __main
2024-04-20 03:17:49,788 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:17:50,194 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 03:17:50,208 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 03:17:50,223 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 03:17:50,233 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 03:17:50,249 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 03:17:50,280 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 03:17:51,536 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:17:51,541 [printer.py:get_probe()] - Probe type: probe
2024-04-20 03:17:51,541 [zcalibrate.py:__init__()] - Z offset: -0.17
2024-04-20 03:17:51,598 [zcalibrate.py:__init__()] - Available functions for calibration: ['endstop', 'probe']
2024-04-20 03:17:51,652 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > zcalibrate
2024-04-20 03:17:57,515 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G91
G0 Z3.0 F180.0
2024-04-20 03:17:57,517 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G90
2024-04-20 03:17:57,518 [zcalibrate.py:_calculate_position()] - Position not configured, probing the middle of the bed
2024-04-20 03:17:57,518 [zcalibrate.py:_calculate_position()] - Center position X:100.0 Y:150.0
2024-04-20 03:17:57,519 [zcalibrate.py:_calculate_position()] - Offset X:0.0 Y:0.0
2024-04-20 03:17:57,519 [zcalibrate.py:_calculate_position()] - Moving to X:100.0 Y:150.0
2024-04-20 03:17:57,519 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: G0 X100.0 Y150.0 F3000
2024-04-20 03:17:57,521 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: PROBE_CALIBRATE
2024-04-20 03:18:59,840 [zcalibrate.py:change_distance()] - ### Distance 1
2024-04-20 03:19:01,653 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 03:19:02,523 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 03:19:03,353 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 03:19:05,681 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-1
2024-04-20 03:19:08,613 [zcalibrate.py:change_distance()] - ### Distance .5
2024-04-20 03:19:10,943 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.5
2024-04-20 03:19:12,053 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.5
2024-04-20 03:19:13,473 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.5
2024-04-20 03:19:14,917 [zcalibrate.py:change_distance()] - ### Distance .1
2024-04-20 03:19:15,783 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 03:19:16,650 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 03:19:18,877 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 03:19:18,886 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 03:19:19,710 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 03:19:20,953 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.1
2024-04-20 03:19:21,760 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.1
2024-04-20 03:19:23,150 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 03:19:24,086 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.1
2024-04-20 03:19:25,546 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.1
2024-04-20 03:19:26,786 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 03:19:28,103 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 03:19:29,513 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.1
2024-04-20 03:19:30,413 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.1
2024-04-20 03:19:34,313 [zcalibrate.py:change_distance()] - ### Distance .05
2024-04-20 03:19:35,217 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.05
2024-04-20 03:19:36,457 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 03:19:37,356 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 03:19:38,424 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 03:19:40,407 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.05
2024-04-20 03:19:41,973 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 03:19:42,720 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 03:19:44,073 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.05
2024-04-20 03:19:45,133 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.05
2024-04-20 03:19:47,073 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.05
2024-04-20 03:19:48,274 [zcalibrate.py:change_distance()] - ### Distance .01
2024-04-20 03:19:50,214 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 03:19:51,370 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-.01
2024-04-20 03:19:54,453 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=+.01
2024-04-20 03:20:01,690 [zcalibrate.py:accept()] - Accepting Z position
2024-04-20 03:20:01,690 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: ACCEPT
2024-04-20 03:20:01,705 [KlippyGtk.py:remove_dialog()] - Cannot remove dialog <Gtk.Dialog object at 0x7f8bff0dc0 (GtkDialog at 0x55aa79d680)>
2024-04-20 03:20:01,729 [KlippyGtk.py:Dialog()] - Showing dialog KlipperScreen (width=800, height=480)
2024-04-20 03:20:02,893 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 03:20:02,893 [screen.py:_send_action()] - printer.gcode.script: {'script': 'SAVE_CONFIG'}
2024-04-20 03:20:04,213 [printer.py:change_state()] - Changing state from 'ready' to 'disconnected'
2024-04-20 03:20:04,213 [printer.py:change_state()] - Adding callback for state: disconnected
2024-04-20 03:20:04,214 [screen.py:state_disconnected()] - ### Going to disconnected
2024-04-20 03:20:04,217 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:20:04,290 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 03:20:07,347 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 03:20:07,362 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 03:20:07,364 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'authorization', 'octoprint_compat', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 03:20:07,378 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 03:20:07,380 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 03:20:09,540 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 03:20:09,597 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 03:20:09,606 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '-0.190', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '-0.320'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n0.430625, 0.250625, 0.085000\n0.140625, 0.026875, -0.181250\n0.086875, 0.014375, -0.061875\n0.248125, 0.160625, 0.173125', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': -0.19, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[0.430625, 0.250625, 0.085], [0.140625, 0.026875, -0.18125], [0.086875, 0.014375, -0.061875], [0.248125, 0.160625, 0.173125]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': -0.32, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 03:20:09,620 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 03:20:09,621 [printer.py:reinit()] - # Extruders: 2
2024-04-20 03:20:09,621 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 03:20:09,621 [printer.py:reinit()] - # Fans: 1
2024-04-20 03:20:09,621 [printer.py:reinit()] - # Output pins: 3
2024-04-20 03:20:09,622 [printer.py:reinit()] - # Leds: 0
2024-04-20 03:20:09,644 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 03:20:09,648 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 03:20:10,137 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 03:20:10,191 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 03:20:10,202 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 03:20:10,219 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 03:20:10,221 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 03:20:10,222 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 03:20:10,222 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 03:20:10,223 [screen.py:init_printer()] - Printer initialized
2024-04-20 03:20:10,225 [printer.py:change_state()] - Changing state from 'disconnected' to 'startup'
2024-04-20 03:20:10,225 [printer.py:change_state()] - Adding callback for state: startup
2024-04-20 03:20:20,878 [printer.py:change_state()] - Changing state from 'startup' to 'ready'
2024-04-20 03:20:20,879 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 03:20:20,885 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:20:21,003 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 03:20:21,019 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 03:20:21,029 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 03:20:21,039 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 03:20:21,049 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 03:20:21,112 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 03:20:24,849 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:20:24,997 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move
2024-04-20 03:20:26,001 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:20:26,193 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move > menu
2024-04-20 03:20:26,221 [menu.py:arrangeMenuItems()] - X > homing quad_gantry_level
2024-04-20 03:20:26,226 [menu.py:arrangeMenuItems()] - X > homing Z-Tilt
2024-04-20 03:20:27,007 [screen.py:_send_action()] - printer.gcode.script: {'script': 'G28'}
2024-04-20 03:21:21,670 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 03:21:21,718 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move
2024-04-20 03:21:22,253 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 03:21:22,304 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 03:21:24,230 [screen.py:_go_to_submenu()] - #### Go to submenu more
2024-04-20 03:21:24,230 [screen.py:_go_to_submenu()] - #### Menu __main
2024-04-20 03:21:24,238 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:21:24,635 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 03:21:24,649 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 03:21:24,664 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 03:21:24,675 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 03:21:24,691 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 03:21:24,721 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 03:21:25,732 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:21:25,737 [printer.py:get_probe()] - Probe type: probe
2024-04-20 03:21:25,738 [zcalibrate.py:__init__()] - Z offset: -0.19
2024-04-20 03:21:25,784 [zcalibrate.py:__init__()] - Available functions for calibration: ['endstop', 'probe']
2024-04-20 03:21:25,835 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > zcalibrate
2024-04-20 03:21:27,413 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 03:21:27,467 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 03:21:27,484 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 03:21:27,499 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 03:21:27,511 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 03:21:27,530 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 03:21:27,561 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 03:21:28,719 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:21:28,752 [bed_mesh.py:add_profile()] - Adding Profile: default
2024-04-20 03:21:28,807 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > bed_mesh
2024-04-20 03:21:28,809 [bed_mesh.py:activate_mesh()] - Active None changing to default
2024-04-20 03:21:30,711 [screen.py:show_popup_message()] - echo: Calibrating
2024-04-20 03:21:30,717 [screen.py:_send_action()] - printer.gcode.script: {'script': 'BED_MESH_CALIBRATE'}
2024-04-20 03:21:30,721 [printer.py:get_probe()] - Probe type: probe
2024-04-20 03:21:30,839 [bed_mesh.py:activate_mesh()] - Clearing active profile
2024-04-20 03:24:51,590 [KlippyGtk.py:remove_dialog()] - Cannot remove dialog <Gtk.Dialog object at 0x7f8abc9600 (GtkDialog at 0x55aa66a330)>
2024-04-20 03:24:51,613 [KlippyGtk.py:Dialog()] - Showing dialog KlipperScreen (width=800, height=480)
2024-04-20 03:24:51,698 [bed_mesh.py:activate_mesh()] - Active None changing to default
2024-04-20 03:24:55,376 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 03:24:55,377 [screen.py:_send_action()] - printer.gcode.script: {'script': 'SAVE_CONFIG'}
2024-04-20 03:24:56,697 [printer.py:change_state()] - Changing state from 'ready' to 'disconnected'
2024-04-20 03:24:56,697 [printer.py:change_state()] - Adding callback for state: disconnected
2024-04-20 03:24:56,698 [screen.py:state_disconnected()] - ### Going to disconnected
2024-04-20 03:24:56,700 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:24:56,776 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 03:25:00,346 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 03:25:00,362 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 03:25:00,364 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'authorization', 'octoprint_compat', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 03:25:00,378 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 03:25:00,380 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 03:25:02,285 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 03:25:02,343 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 03:25:02,350 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '-0.190', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '-0.320'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n0.374375, 0.204375, -0.005625\n0.073125, -0.053750, -0.239375\n0.035625, -0.050000, -0.145000\n0.176250, 0.100625, 0.074375', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': -0.19, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[0.374375, 0.204375, -0.005625], [0.073125, -0.05375, -0.239375], [0.035625, -0.05, -0.145], [0.17625, 0.100625, 0.074375]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': -0.32, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 03:25:02,364 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 03:25:02,364 [printer.py:reinit()] - # Extruders: 2
2024-04-20 03:25:02,365 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 03:25:02,365 [printer.py:reinit()] - # Fans: 1
2024-04-20 03:25:02,365 [printer.py:reinit()] - # Output pins: 3
2024-04-20 03:25:02,365 [printer.py:reinit()] - # Leds: 0
2024-04-20 03:25:02,390 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 03:25:02,393 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 03:25:02,747 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 03:25:02,903 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 03:25:02,914 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 03:25:02,930 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 03:25:02,932 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 03:25:02,933 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 03:25:02,933 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 03:25:02,934 [screen.py:init_printer()] - Printer initialized
2024-04-20 03:25:02,935 [printer.py:change_state()] - Changing state from 'disconnected' to 'startup'
2024-04-20 03:25:02,936 [printer.py:change_state()] - Adding callback for state: startup
2024-04-20 03:25:03,065 [printer.py:change_state()] - Changing state from 'startup' to 'ready'
2024-04-20 03:25:03,066 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 03:25:03,070 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:25:03,195 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 03:25:03,212 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 03:25:03,222 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 03:25:03,232 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 03:25:03,242 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 03:25:03,305 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 03:27:28,012 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:27:28,149 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move
2024-04-20 03:27:29,684 [KlippyGtk.py:remove_dialog()] - Cannot remove dialog <Gtk.Dialog object at 0x7f8bf9dd40 (GtkDialog at 0x55aa724610)>
2024-04-20 03:27:29,709 [KlippyGtk.py:Dialog()] - Showing dialog KlipperScreen (width=800, height=480)
2024-04-20 03:27:30,889 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 03:27:30,890 [screen.py:_send_action()] - printer.gcode.script: {'script': 'M18'}
2024-04-20 03:27:36,958 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:27:37,150 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move > menu
2024-04-20 03:27:37,178 [menu.py:arrangeMenuItems()] - X > homing quad_gantry_level
2024-04-20 03:27:37,183 [menu.py:arrangeMenuItems()] - X > homing Z-Tilt
2024-04-20 03:27:37,873 [screen.py:_send_action()] - printer.gcode.script: {'script': 'G28'}
2024-04-20 03:33:46,190 [KlippyGtk.py:remove_dialog()] - Cannot remove dialog <Gtk.Dialog object at 0x7f8ac55bc0 (GtkDialog at 0x55aa718bc0)>
2024-04-20 03:33:46,216 [KlippyGtk.py:Dialog()] - Showing dialog KlipperScreen (width=800, height=480)
2024-04-20 03:36:08,616 [printer.py:change_state()] - Changing state from 'ready' to 'disconnected'
2024-04-20 03:36:08,616 [printer.py:change_state()] - Adding callback for state: disconnected
2024-04-20 03:36:08,618 [screen.py:state_disconnected()] - ### Going to disconnected
2024-04-20 03:36:08,623 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 03:36:08,623 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:36:08,698 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 03:36:12,346 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 03:36:12,363 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 03:36:12,365 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'history', 'authorization', 'octoprint_compat', 'timelapse'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 2, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 03:36:12,380 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 03:36:12,382 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 03:36:14,242 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 03:36:14,300 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 03:36:14,307 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '-0.190', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '-0.320'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n0.291875, 0.141875, -0.066875\n-0.005000, -0.126875, -0.303750\n-0.065625, -0.151250, -0.245000\n0.086875, 0.011875, -0.016250', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': -0.19, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[0.291875, 0.141875, -0.066875], [-0.005, -0.126875, -0.30375], [-0.065625, -0.15125, -0.245], [0.086875, 0.011875, -0.01625]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': -0.32, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 03:36:14,321 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 03:36:14,322 [printer.py:reinit()] - # Extruders: 2
2024-04-20 03:36:14,322 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 03:36:14,322 [printer.py:reinit()] - # Fans: 1
2024-04-20 03:36:14,322 [printer.py:reinit()] - # Output pins: 3
2024-04-20 03:36:14,323 [printer.py:reinit()] - # Leds: 0
2024-04-20 03:36:14,350 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 03:36:14,354 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 03:36:14,702 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 03:36:14,861 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 03:36:14,872 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 03:36:14,888 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 03:36:14,891 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 03:36:14,892 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 03:36:14,892 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 03:36:14,893 [screen.py:init_printer()] - Printer initialized
2024-04-20 03:36:14,894 [printer.py:change_state()] - Changing state from 'disconnected' to 'startup'
2024-04-20 03:36:14,894 [printer.py:change_state()] - Adding callback for state: startup
2024-04-20 03:36:15,023 [printer.py:change_state()] - Changing state from 'startup' to 'ready'
2024-04-20 03:36:15,023 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 03:36:15,028 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:36:15,154 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 03:36:15,172 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 03:36:15,183 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 03:36:15,193 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 03:36:15,203 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 03:36:15,271 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 03:36:24,142 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:36:24,279 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move
2024-04-20 03:36:25,380 [KlippyGtk.py:remove_dialog()] - Cannot remove dialog <Gtk.Dialog object at 0x7f8bff0d00 (GtkDialog at 0x55aa8b5c80)>
2024-04-20 03:36:25,405 [KlippyGtk.py:Dialog()] - Showing dialog KlipperScreen (width=800, height=480)
2024-04-20 03:36:31,316 [KlippyGtk.py:remove_dialog()] - Removing Dialog
2024-04-20 03:36:31,317 [screen.py:_send_action()] - printer.gcode.script: {'script': 'M18'}
2024-04-20 03:36:32,341 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 03:36:32,533 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > move > menu
2024-04-20 03:36:32,561 [menu.py:arrangeMenuItems()] - X > homing quad_gantry_level
2024-04-20 03:36:32,566 [menu.py:arrangeMenuItems()] - X > homing Z-Tilt
2024-04-20 03:36:33,516 [screen.py:_send_action()] - printer.gcode.script: {'script': 'G28'}
2024-04-20 03:37:26,743 [printer.py:change_state()] - Changing state from 'ready' to 'printing'
2024-04-20 03:37:26,744 [printer.py:change_state()] - Adding callback for state: printing
2024-04-20 03:37:26,753 [screen.py:_load_panel()] - Loading panel: job_status
2024-04-20 03:37:26,990 [screen.py:attach_panel()] - Current panel hierarchy: job_status
2024-04-20 03:37:27,000 [job_status.py:set_state()] - Changing job_status state from 'standby' to 'printing'
2024-04-20 03:37:27,019 [job_status.py:update_file_metadata()] - Update Metadata. File: leveling_validation.gcode Size: 50571
2024-04-20 03:37:27,027 [job_status.py:show_file_thumbnail()] - leveling_validation.gcode
2024-04-20 03:45:20,583 [job_status.py:set_state()] - Changing job_status state from 'printing' to 'complete'
2024-04-20 03:45:23,078 [printer.py:change_state()] - Changing state from 'printing' to 'ready'
2024-04-20 03:45:23,078 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 03:51:49,291 [screen.py:show_popup_message()] - error: Must home axis first: 158.729 37.110 155.108 [545.306]
2024-04-20 03:51:49,350 [screen.py:show_popup_message()] - error: Must home axis first: 158.729 37.110 155.108 [545.306]
2024-04-20 04:34:38,151 [screen.py:show_popup_message()] - error: Move out of range: 0.000 -5.000 0.139 [545.306]
2024-04-20 04:35:01,670 [job_status.py:close_panel()] - Closing job_status panel
2024-04-20 04:35:01,675 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 04:35:01,799 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 04:35:01,816 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 04:35:01,826 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 04:35:01,836 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 04:35:01,849 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 04:35:01,915 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 04:35:03,459 [screen.py:_go_to_submenu()] - #### Go to submenu more
2024-04-20 04:35:03,460 [screen.py:_go_to_submenu()] - #### Menu __main
2024-04-20 04:35:03,468 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 04:35:03,903 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 04:35:03,917 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 04:35:03,935 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 04:35:03,947 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 04:35:03,964 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 04:35:03,994 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 04:35:08,552 [screen.py:show_panel()] - Reinitializing panel
2024-04-20 04:35:08,557 [printer.py:get_probe()] - Probe type: probe
2024-04-20 04:35:08,557 [zcalibrate.py:__init__()] - Z offset: -0.19
2024-04-20 04:35:08,603 [zcalibrate.py:__init__()] - Available functions for calibration: ['endstop', 'probe']
2024-04-20 04:35:08,653 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more > zcalibrate
2024-04-20 04:35:31,958 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: Z_ENDSTOP_CALIBRATE
2024-04-20 04:35:42,699 [zcalibrate.py:change_distance()] - ### Distance 5
2024-04-20 04:35:45,063 [KlippyWebsocket.py:gcode_script()] - Sending printer.gcode.script: TESTZ Z=-5
2024-04-20 04:35:45,080 [screen.py:show_popup_message()] - error: Move out of range: 0.000 15.000 -4.881 [545.306]
2024-04-20 04:35:45,090 [screen.py:show_popup_message()] - error: !! Move out of range: 0.000 15.000 -4.881 [545.306]
2024-04-20 04:35:45,096 [zcalibrate.py:process_update()] - !! Move out of range: 0.000 15.000 -4.881 [545.306]
2024-04-20 04:35:52,666 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 04:35:52,807 [screen.py:attach_panel()] - Current panel hierarchy: main_menu > more
2024-04-20 04:35:52,825 [menu.py:arrangeMenuItems()] - X > more bedlevel
2024-04-20 04:35:52,842 [menu.py:arrangeMenuItems()] - X > more retraction
2024-04-20 04:35:52,853 [menu.py:arrangeMenuItems()] - X > more led
2024-04-20 04:35:52,867 [menu.py:arrangeMenuItems()] - X > more power
2024-04-20 04:35:52,900 [menu.py:arrangeMenuItems()] - X > more spoolman
2024-04-20 04:35:54,606 [screen.py:_menu_go_back()] - #### Menu go back
2024-04-20 04:35:54,657 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 04:34:29,239 [functions.py:log_start()] - --------------------KlipperScreen Log Start--------------------
2024-04-20 04:34:29,240 [functions.py:log_start()] - KlipperScreen Version: v0.3.6-88-g6eefe9d
2024-04-20 04:34:29,241 [functions.py:log_start()] - Python version: 3.10
2024-04-20 04:34:29,425 [config.py:get_config_file_location()] - Passed config (-c): /home/tier/KlipperScreen.conf
2024-04-20 04:34:29,427 [config.py:__init__()] - Config path location: /home/tier/printer_data/config/KlipperScreen.conf
2024-04-20 04:34:29,446 [config.py:log_config()] -  ===== Config File =====

=======================
2024-04-20 04:34:29,451 [config.py:__init__()] - ====== Saved Def ======

[main]
move_speed_xy = 195
print_sort_dir = date_desc

[displayed_macros Printer]
bedpid = False
get_timelapse_setup = False
mix = False

[graph Printer]
extruder = False

=======================
2024-04-20 04:34:29,452 [config.py:__init__()] - Configured printers: [
  {
    "Printer": {
      "moonraker_host": "127.0.0.1",
      "moonraker_port": "7125",
      "moonraker_api_key": ""
    }
  }
]
2024-04-20 04:34:29,589 [config.py:create_translations()] - Selected lang: None OS lang: en_US
2024-04-20 04:34:29,589 [config.py:install_language()] - Using system lang
2024-04-20 04:34:29,590 [config.py:install_language()] - Using lang en
2024-04-20 04:34:29,625 [screen.py:__init__()] - Screen resolution: 800x480
2024-04-20 04:34:29,627 [KlippyGtk.py:__init__()] - Font size: 16.6 (medium)
2024-04-20 04:34:30,406 [screen.py:set_screenblanking_timeout()] - Changing screen blanking to: 3600
2024-04-20 04:34:30,426 [screen.py:set_screenblanking_timeout()] - Using DPMS
2024-04-20 04:34:30,441 [screen.py:initial_connection()] - Default printer: None
2024-04-20 04:34:30,441 [screen.py:connect_printer()] - Connecting to printer: Printer
2024-04-20 04:34:30,442 [screen.py:_load_panel()] - Loading panel: splash_screen
2024-04-20 04:34:30,542 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 04:34:30,558 [KlippyWebsocket.py:connect()] - Attempting to connect
2024-04-20 04:34:30,587 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 04:34:30,608 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/access/oneshot_token
2024-04-20 04:34:30,611 [KlippyWebsocket.py:connect()] - Starting websocket thread
2024-04-20 04:34:30,628 [_logging.py:info()] - Websocket connected
2024-04-20 04:34:30,629 [KlippyWebsocket.py:on_open()] - Moonraker Websocket Open
2024-04-20 04:34:30,718 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 04:34:30,740 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 04:34:30,742 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'timelapse', 'octoprint_compat', 'authorization', 'history'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames'], 'warnings': [], 'websocket_count': 1, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 04:34:30,765 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 04:34:30,768 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 04:34:30,801 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/printer/info
2024-04-20 04:34:34,000 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 04:34:34,015 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 04:34:34,017 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'timelapse', 'octoprint_compat', 'authorization', 'history'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 1, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 04:34:34,032 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 04:34:34,034 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 04:34:34,051 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 04:34:34,348 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 04:34:34,357 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '-0.190', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '-0.320'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n0.291875, 0.141875, -0.066875\n-0.005000, -0.126875, -0.303750\n-0.065625, -0.151250, -0.245000\n0.086875, 0.011875, -0.016250', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': -0.19, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[0.291875, 0.141875, -0.066875], [-0.005, -0.126875, -0.30375], [-0.065625, -0.15125, -0.245], [0.086875, 0.011875, -0.01625]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': -0.32, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 04:34:34,369 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 04:34:34,370 [printer.py:reinit()] - # Extruders: 2
2024-04-20 04:34:34,370 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 04:34:34,370 [printer.py:reinit()] - # Fans: 1
2024-04-20 04:34:34,371 [printer.py:reinit()] - # Output pins: 3
2024-04-20 04:34:34,371 [printer.py:reinit()] - # Leds: 0
2024-04-20 04:34:34,431 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 04:34:34,435 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 04:34:34,719 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 04:34:34,799 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 04:34:34,806 [screen.py:init_tempstore()] - Tempstore not ready: {'result': {}} Retrying in 5 seconds
2024-04-20 04:34:34,807 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 04:34:34,807 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 04:34:34,818 [screen.py:init_printer()] - Printer initialized
2024-04-20 04:34:34,819 [printer.py:change_state()] - Changing state from 'disconnected' to 'ready'
2024-04-20 04:34:34,820 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 04:34:34,842 [screen.py:_load_panel()] - Loading panel: main_menu
2024-04-20 04:34:35,083 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 04:34:35,102 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 04:34:35,113 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 04:34:35,123 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 04:34:35,136 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 04:34:35,203 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-20 04:34:35,206 [main_menu.py:update_graph_visibility()] - Could not create graph tempstore: []
2024-04-20 04:34:40,000 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 04:34:40,033 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 04:34:40,051 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 04:34:40,053 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 15:18:06,280 [functions.py:log_start()] - --------------------KlipperScreen Log Start--------------------
2024-04-20 15:18:06,280 [functions.py:log_start()] - KlipperScreen Version: v0.3.6-88-g6eefe9d
2024-04-20 15:18:06,281 [functions.py:log_start()] - Python version: 3.10
2024-04-20 15:18:06,475 [config.py:get_config_file_location()] - Passed config (-c): /home/tier/KlipperScreen.conf
2024-04-20 15:18:06,481 [config.py:__init__()] - Config path location: /home/tier/printer_data/config/KlipperScreen.conf
2024-04-20 15:18:06,502 [config.py:log_config()] -  ===== Config File =====

=======================
2024-04-20 15:18:06,508 [config.py:__init__()] - ====== Saved Def ======

[main]
move_speed_xy = 195
print_sort_dir = date_desc

[displayed_macros Printer]
bedpid = False
get_timelapse_setup = False
mix = False

[graph Printer]
extruder = False

=======================
2024-04-20 15:18:06,510 [config.py:__init__()] - Configured printers: [
  {
    "Printer": {
      "moonraker_host": "127.0.0.1",
      "moonraker_port": "7125",
      "moonraker_api_key": ""
    }
  }
]
2024-04-20 15:18:06,640 [config.py:create_translations()] - Selected lang: None OS lang: en_US
2024-04-20 15:18:06,640 [config.py:install_language()] - Using system lang
2024-04-20 15:18:06,641 [config.py:install_language()] - Using lang en
2024-04-20 15:18:06,673 [screen.py:__init__()] - Screen resolution: 800x480
2024-04-20 15:18:06,675 [KlippyGtk.py:__init__()] - Font size: 16.6 (medium)
2024-04-20 15:18:07,424 [screen.py:set_screenblanking_timeout()] - Changing screen blanking to: 3600
2024-04-20 15:18:07,440 [screen.py:set_screenblanking_timeout()] - Using DPMS
2024-04-20 15:18:07,451 [screen.py:initial_connection()] - Default printer: None
2024-04-20 15:18:07,452 [screen.py:connect_printer()] - Connecting to printer: Printer
2024-04-20 15:18:07,452 [screen.py:_load_panel()] - Loading panel: splash_screen
2024-04-20 15:18:07,541 [screen.py:attach_panel()] - Current panel hierarchy: splash_screen
2024-04-20 15:18:07,557 [KlippyWebsocket.py:connect()] - Attempting to connect
2024-04-20 15:18:07,589 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 15:18:07,612 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/access/oneshot_token
2024-04-20 15:18:07,615 [KlippyWebsocket.py:connect()] - Starting websocket thread
2024-04-20 15:18:07,636 [_logging.py:info()] - Websocket connected
2024-04-20 15:18:07,637 [KlippyWebsocket.py:on_open()] - Moonraker Websocket Open
2024-04-20 15:18:07,716 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 15:18:07,736 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 15:18:07,738 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'startup', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'timelapse', 'octoprint_compat', 'authorization', 'history'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames'], 'warnings': [], 'websocket_count': 1, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 15:18:07,756 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 15:18:07,758 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 15:18:07,790 [KlippyRest.py:_do_request()] - 404 Client Error>>Not Found for url>>http://127.0.0.1:7125/printer/info
2024-04-20 15:18:11,084 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 15:18:11,099 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/info
2024-04-20 15:18:11,101 [screen.py:init_printer()] - Moonraker info {'klippy_connected': True, 'klippy_state': 'ready', 'components': ['klippy_connection', 'application', 'websockets', 'internal_transport', 'dbus_manager', 'database', 'file_manager', 'klippy_apis', 'secrets', 'template', 'shell_command', 'machine', 'data_store', 'proc_stats', 'job_state', 'job_queue', 'http_client', 'announcements', 'webcam', 'extensions', 'timelapse', 'octoprint_compat', 'authorization', 'history'], 'failed_components': [], 'registered_directories': ['config', 'logs', 'gcodes', 'timelapse', 'timelapse_frames', 'config_examples', 'docs'], 'warnings': [], 'websocket_count': 1, 'moonraker_version': 'v0.8.0-204-gfb15b2a', 'missing_klippy_requirements': [], 'api_version': [1, 4, 0], 'api_version_string': '1.4.0'}
2024-04-20 15:18:11,116 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/webcams/list
2024-04-20 15:18:11,117 [printer.py:configure_cameras()] - Cameras: [{'name': 'C2', 'enabled': True, 'icon': 'mdiWebcam', 'aspect_ratio': '4:3', 'target_fps': 15, 'target_fps_idle': 5, 'location': 'printer', 'service': 'mjpegstreamer-adaptive', 'stream_url': '/webcam?action=stream', 'snapshot_url': '/webcam?action=snapshot', 'flip_horizontal': False, 'flip_vertical': False, 'rotation': 0, 'source': 'database', 'extra_data': {}, 'uid': '3a818f43-25cc-43dc-be46-df971a077861'}]
2024-04-20 15:18:11,134 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/info
2024-04-20 15:18:11,298 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?configfile
2024-04-20 15:18:11,306 [screen.py:init_printer()] - {'configfile': {'config': {'duplicate_pin_override': {'pins': ''}, 'board_pins mcu': {'mcu': 'mcu', 'aliases': '\n\nX_EN=PB14,  X_CP=PB13,   X_DIR=PB15,\nY_EN=PB11,  Y_CP=PB10,  Y_DIR=PB12,\nZ_EN=PA7,   Z_CP=PA6,   Z_DIR=PB0,\nB_EN=PB5,   B_CP=PB6,   B_DIR=PB7,\nC_EN=PD2,   C_CP=PC11,   C_DIR=PC12,\n\n\nX_LIM=PA10,\nY_LIM=PC7,\nZ_LIM=PC6,\n\n\nB_HEAT=PB3,\nC_HEAT=PB4,\nBED_HEAT=PB9,\n\n\nFAN_MB_COOL=PC8,\n\n\nB_SENSOR=PA4,\nC_SENSOR=PA5,\nBED_SENSOR=PA3,\n\n\nADC_SENSOR=PA1,\n\n\nFAN_PT_MDCOOL=PC9,\n\n\n\n\n\n\n\n\n\n\n\nBEEP_PIN=PB1,\n\n\nLIGHT_PIN=PA0,\n\n\nPOWERON_PIN=PB8,\n\n\nZ_PROBE=PC10,\n\n\nB_CHECK=PC4,\nC_CHECK=PC5,\n\n\n\n\n\nSWDIO=PA13,\nSWCLK=PA14,\n\n\nTX1=PA9,\nRX1=PA10,\nBOOT1=PB2,\n\n\nUSB_CAN_TX=PA12,\nUSB_CAN_RX=PA11,'}, 'adc_temperature V51RNTC100K510RG': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '20', 'voltage2': '0.013382527', 'temperature3': '40', 'voltage3': '0.031463237', 'temperature4': '60', 'voltage4': '0.066889233', 'temperature5': '80', 'voltage5': '0.130353962', 'temperature6': '100', 'voltage6': '0.236675573', 'temperature7': '120', 'voltage7': '0.3947924', 'temperature8': '160', 'voltage8': '0.8976', 'temperature9': '170', 'voltage9': '1.044044665', 'temperature10': '180', 'voltage10': '1.199315898', 'temperature11': '190', 'voltage11': '1.359670383', 'temperature12': '200', 'voltage12': '1.512265253', 'temperature13': '210', 'voltage13': '1.653891509', 'temperature14': '220', 'voltage14': '1.784729586', 'temperature15': '230', 'voltage15': '1.91206544', 'temperature16': '240', 'voltage16': '2.034574468', 'temperature17': '250', 'voltage17': '2.14504206', 'temperature18': '260', 'voltage18': '2.242803838', 'temperature19': '270', 'voltage19': '2.329089399', 'temperature20': '280', 'voltage20': '2.405660377', 'temperature21': '290', 'voltage21': '2.474272273', 'temperature22': '300', 'voltage22': '2.537313433'}, 'adc_temperature V510RNTC100K10KRG': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '10', 'voltage2': '0.156985871', 'temperature3': '20', 'voltage3': '0.243165574', 'temperature4': '30', 'voltage4': '0.363036304', 'temperature5': '40', 'voltage5': '0.520176545', 'temperature6': '50', 'voltage6': '0.71413114', 'temperature7': '60', 'voltage7': '0.939903161', 'temperature8': '70', 'voltage8': '1.18705036', 'temperature9': '80', 'voltage9': '1.443569554', 'temperature10': '90', 'voltage10': '1.697792869', 'temperature11': '100', 'voltage11': '1.934349355', 'temperature12': '110', 'voltage12': '2.143135472', 'temperature13': '120', 'voltage13': '2.321981424', 'temperature14': '130', 'voltage14': '2.47710554', 'temperature15': '140', 'voltage15': '2.607458913', 'temperature16': '150', 'voltage16': '2.710472279', 'temperature17': '160', 'voltage17': '2.790933694', 'temperature18': '170', 'voltage18': '2.854424358', 'temperature19': '180', 'voltage19': '2.906899923', 'temperature20': '190', 'voltage20': '2.949905245', 'temperature21': '200', 'voltage21': '2.983212649', 'temperature22': '300', 'voltage22': '3.109599239'}, 'adc_temperature 2800PT10021X': {'temperature1': '0', 'voltage1': '0.000', 'temperature2': '10', 'voltage2': '0.091', 'temperature3': '20', 'voltage3': '0.182', 'temperature4': '30', 'voltage4': '0.225', 'temperature5': '40', 'voltage5': '0.340', 'temperature6': '50', 'voltage6': '0.380', 'temperature7': '60', 'voltage7': '0.469', 'temperature8': '70', 'voltage8': '0.557', 'temperature9': '80', 'voltage9': '0.645', 'temperature10': '90', 'voltage10': '0.732', 'temperature11': '100', 'voltage11': '0.818', 'temperature12': '110', 'voltage12': '0.904', 'temperature13': '120', 'voltage13': '0.990', 'temperature14': '130', 'voltage14': '1.075', 'temperature15': '140', 'voltage15': '1.160', 'temperature16': '150', 'voltage16': '1.244', 'temperature17': '160', 'voltage17': '1.328', 'temperature18': '170', 'voltage18': '1.411', 'temperature19': '180', 'voltage19': '1.494', 'temperature20': '190', 'voltage20': '1.576', 'temperature21': '200', 'voltage21': '1.658', 'temperature22': '210', 'voltage22': '1.739', 'temperature23': '220', 'voltage23': '1.820', 'temperature24': '230', 'voltage24': '1.901', 'temperature25': '240', 'voltage25': '1.981', 'temperature26': '250', 'voltage26': '2.061', 'temperature27': '260', 'voltage27': '2.140', 'temperature28': '270', 'voltage28': '2.218', 'temperature29': '280', 'voltage29': '2.297', 'temperature30': '290', 'voltage30': '2.374', 'temperature31': '300', 'voltage31': '2.452', 'temperature32': '310', 'voltage32': '2.529', 'temperature33': '320', 'voltage33': '2.605', 'temperature34': '330', 'voltage34': '2.681', 'temperature35': '340', 'voltage35': '2.757', 'temperature36': '350', 'voltage36': '2.832', 'temperature37': '360', 'voltage37': '2.907', 'temperature38': '370', 'voltage38': '2.982', 'temperature39': '380', 'voltage39': '3.056', 'temperature40': '390', 'voltage40': '3.129', 'temperature41': '400', 'voltage41': '3.202', 'temperature42': '410', 'voltage42': '3.275', 'temperature43': '420', 'voltage43': '3.348', 'temperature44': '430', 'voltage44': '3.420', 'temperature45': '440', 'voltage45': '3.491', 'temperature46': '450', 'voltage46': '3.562'}, 'adc_temperature V2KRPT1000G': {'temperature1': '0', 'voltage1': '1.1', 'temperature2': '10', 'voltage2': '1.12825083702832', 'temperature3': '20', 'voltage3': '1.15570520495072', 'temperature4': '30', 'voltage4': '1.18239529327061', 'temperature5': '40', 'voltage5': '1.20835289762845', 'temperature6': '50', 'voltage6': '1.23360678603531', 'temperature7': '60', 'voltage7': '1.25818549513538', 'temperature8': '70', 'voltage8': '1.28209260054759', 'temperature9': '80', 'voltage9': '1.30542042111015', 'temperature10': '90', 'voltage10': '1.3281255032388', 'temperature11': '100', 'voltage11': '1.35025324551595', 'temperature12': '110', 'voltage12': '1.37182453603278', 'temperature13': '120', 'voltage13': '1.39286036270328', 'temperature14': '130', 'voltage14': '1.41337959745809', 'temperature15': '140', 'voltage15': '1.43340128506837', 'temperature16': '150', 'voltage16': '1.45292390746149', 'temperature17': '160', 'voltage17': '1.472020615176', 'temperature18': '170', 'voltage18': '1.49065109420375', 'temperature19': '180', 'voltage19': '1.50884974773277', 'temperature20': '190', 'voltage20': '1.52663068697372', 'temperature21': '200', 'voltage21': '1.54400834362096', 'temperature22': '210', 'voltage22': '1.56099558003043', 'temperature23': '220', 'voltage23': '1.57760561083021', 'temperature24': '230', 'voltage24': '1.59385018298457', 'temperature25': '240', 'voltage25': '1.60974142116941', 'temperature26': '250', 'voltage26': '1.62529007371515', 'temperature27': '260', 'voltage27': '1.64050728680736', 'temperature28': '270', 'voltage28': '1.65540291258144', 'temperature29': '280', 'voltage29': '1.66998721674823', 'temperature30': '290', 'voltage30': '1.68426924537295', 'temperature31': '300', 'voltage31': '1.69825847011842', 'temperature32': '310', 'voltage32': '1.71264706614488', 'temperature33': '320', 'voltage33': '1.72677945545593', 'temperature34': '330', 'voltage34': '1.74066242077945', 'temperature35': '340', 'voltage35': '1.75430250751947', 'temperature36': '350', 'voltage36': '1.76770603404595', 'temperature37': '360', 'voltage37': '1.7808791014538', 'temperature38': '370', 'voltage38': '1.7938276028228', 'temperature39': '380', 'voltage39': '1.80655723200792', 'temperature40': '390', 'voltage40': '1.81907349198768', 'temperature41': '400', 'voltage41': '1.83138170279616', 'temperature42': '410', 'voltage42': '1.84348700906271', 'temperature43': '420', 'voltage43': '1.85539438718188', 'temperature44': '430', 'voltage44': '1.86710865213447', 'temperature45': '440', 'voltage45': '1.87863446397937', 'temperature46': '450', 'voltage46': '1.88997633403461', 'temperature47': '460', 'voltage47': '1.90113863076482', 'temperature48': '470', 'voltage48': '1.91212558539123', 'temperature49': '480', 'voltage49': '1.92294129723937', 'temperature50': '490', 'voltage50': '1.93358973883863', 'temperature51': '500', 'voltage51': '1.94407476078705'}, 'adc_temperature V510RNTC100K10KRGX4': {'temperature1': '0', 'voltage1': '0.098328417', 'temperature2': '40', 'voltage2': '0.52', 'temperature3': '200', 'voltage3': '1.0'}, 'adc_temperature V51RNTC100K510RGX4': {'temperature1': '0', 'voltage1': '0.005167951', 'temperature2': '40', 'voltage2': '0.031463237', 'temperature3': '300', 'voltage3': '0.1'}, 'display_status': {}, 'idle_timeout': {'timeout': '360000'}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes'}, 'delayed_gcode init': {'initial_duration': '5', 'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}'}, 'probe': {'deactivate_on_each_sample': 'True', 'samples': '3', 'samples_result': 'median', 'sample_retract_dist': '3.0', 'samples_tolerance': '0.1', 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'z_offset': '-0.190', 'y_offset': '0', 'x_offset': '0', 'pin': '!Z_PROBE', 'speed': '3', 'lift_speed': '1.5', 'samples_tolerance_retries': '5'}, 'delayed_gcode bed_mesh_init': {'initial_duration': '.01', 'gcode': '\n\nBED_MESH_PROFILE LOAD=default'}, 'gcode_macro VAR_EXTRUDER': {'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1', 'gcode': ''}, 'gcode_macro VAR_PRINT': {'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1', 'gcode': ''}, 'gcode_macro M300': {'description': 'Buzzer beep', 'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0'}, 'pause_resume': {}, 'gcode_macro PAUSE': {'description': 'Pause printing', 'rename_existing': 'PAUSE_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro RESUME': {'description': 'Resume printing', 'rename_existing': 'RESUME_BASE', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro G32': {'description': 'Mesh bed leveling', 'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE'}, 'gcode_macro NOTIFY_FILAMENT_CHANGE': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}'}, 'gcode_macro PID_EXTRUDER': {'description': 'PID_CALIBRATE EXTRUER AT 250', 'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250'}, 'gcode_macro M308': {'description': 'Set Z offset', 'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}'}, 'gcode_macro SZOFFSET': {'description': 'Set Z offset', 'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}'}, 'gcode_macro CLEANPROBE': {'description': 'CLEAN NUZZLE AND PROBE', 'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}'}, 'gcode_macro BEDPID': {'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60', 'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG'}, 'gcode_macro EXTPID': {'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230', 'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG'}, 'gcode_macro SPREADMODE': {'description': 'SET SPREADMODE  eg: SPREADMODE M=0', 'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}'}, 'homing_override': {'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"', 'axes': 'xyz'}, 'gcode_macro T0': {'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2', 'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}'}, 'gcode_macro T1': {'description': 'Activate Extruder 2 and add optional mixing ratio.', 'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}'}, 'gcode_macro T2': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T3': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T4': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T5': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T6': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T7': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T8': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T9': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro T10': {'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper', 'gcode': ''}, 'gcode_macro G10': {'description': 'Firmware retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro G11': {'description': 'Firmware de-retraction', 'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}'}, 'gcode_macro M305': {'description': 'Set retraction length and speed of firmware retraction', 'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}'}, 'gcode_macro M306': {'description': 'Set current extruder mixing ratio', 'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}'}, 'gcode_macro MIX': {'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.', 'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}'}, 'gcode_macro M301': {'description': 'Motion system power on', 'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}'}, 'gcode_macro START_PRINT': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0'}, 'gcode_macro PRINT_START': {'description': 'Power on motion system, home, set temperature and initiate printing', 'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}'}, 'gcode_macro CANCEL_PRINT': {'description': 'Cancel the actual running print', 'rename_existing': 'CANCEL_PRINT_BASE', 'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro END_PRINT': {'description': 'End print job and power off motion system', 'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1'}, 'gcode_macro PRINT_END': {'description': 'End print job and power off motion system', 'gcode': '\nEND_PRINT'}, 'gcode_macro GET_TIMELAPSE_SETUP': {'description': 'Print the Timelapse setup', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}'}, 'gcode_macro _SET_TIMELAPSE_SETUP': {'description': 'Set user parameters for timelapse', 'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"'}, 'gcode_macro TIMELAPSE_TAKE_FRAME': {'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False', 'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}'}, 'gcode_macro _TIMELAPSE_NEW_FRAME': {'description': 'action call for timelapse shoot. must be a seperate macro', 'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}'}, 'delayed_gcode _WAIT_TIMELAPSE_TAKE_FRAME': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}'}, 'gcode_macro HYPERLAPSE': {'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False', 'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}'}, 'delayed_gcode _HYPERLAPSE_LOOP': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True'}, 'gcode_macro TIMELAPSE_RENDER': {'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0', 'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5'}, 'delayed_gcode _WAIT_TIMELAPSE_RENDER': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}'}, 'gcode_macro TEST_STREAM_DELAY': {'description': 'Helper macro to find stream and park delay', 'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}'}, 'gcode_macro VAR_MODEL': {'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0', 'gcode': ''}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'enable_pin': '!X_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': 'X_LIM', 'position_min': '-2', 'position_endstop': '-1', 'position_max': '200', 'homing_speed': '50', 'homing_retract_dist': '5', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'enable_pin': '!Y_EN', 'microsteps': '32', 'rotation_distance': '40', 'full_steps_per_rotation': '200', 'endstop_pin': '!Y_LIM', 'position_min': '-2', 'position_endstop': '35', 'position_max': '300', 'homing_speed': '50', 'homing_retract_dist': '15', 'homing_positive_dir': 'false', 'second_homing_speed': '5', 'step_pulse_duration': '0.000008'}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'enable_pin': '!Z_EN', 'microsteps': '32', 'rotation_distance': '4', 'full_steps_per_rotation': '200', 'endstop_pin': '!Z_LIM', 'position_max': '305', 'position_min': '-3', 'homing_speed': '15', 'homing_retract_dist': '15', 'second_homing_speed': '5', 'homing_positive_dir': 'false', 'position_endstop': '-0.320'}, 'fan': {'pin': 'FAN_PT_MDCOOL'}, 'output_pin BEEP': {'pin': 'BEEP_PIN'}, 'output_pin POWER': {'pin': 'POWERON_PIN', 'value': '1'}, 'output_pin LIGHT': {'pin': 'LIGHT_PIN'}, 'exclude_object': {}, 'configfile': {}, 'gcode_arcs': {}, 'respond': {}, 'force_move': {'enable_force_move': 'true'}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'speed': '100', 'horizontal_move_z': '3', 'mesh_min': '10, 10', 'mesh_max': '190, 290', 'probe_count': '3, 4'}, 'extruder': {'step_pin': 'B_CP', 'dir_pin': 'B_DIR', 'enable_pin': 'B_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'B_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'B_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'extruder1': {'step_pin': 'C_CP', 'dir_pin': 'C_DIR', 'enable_pin': 'C_EN', 'microsteps': '32', 'rotation_distance': '29', 'gear_ratio': '50:1', 'full_steps_per_rotation': '48', 'nozzle_diameter': '0.400', 'filament_diameter': '1.750', 'min_temp': '-100', 'max_temp': '3000', 'heater_pin': 'C_HEAT', 'sensor_type': 'V51RNTC100K510RG', 'sensor_pin': 'C_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '0.7', 'pressure_advance': '0.2', 'pressure_advance_smooth_time': '0.150', 'max_extrude_cross_section': '20', 'instantaneous_corner_velocity': '10.000', 'max_extrude_only_distance': '100.0', 'max_extrude_only_velocity': '50000', 'max_extrude_only_accel': '5000', 'step_pulse_duration': '0.000002', 'control': 'pid', 'pid_kp': '11.675', 'pid_ki': '0.463', 'pid_kd': '73.550'}, 'heater_bed': {'heater_pin': 'BED_HEAT', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'BED_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'max_power': '1.0', 'min_temp': '-100', 'max_temp': '10000', 'control': 'pid', 'pid_kp': '49.054', 'pid_ki': '1.112', 'pid_kd': '540.818'}, 'heater_generic MAINBOARD': {'gcode_id': 'MB', 'heater_pin': 'FAN_MB_COOL', 'max_power': '1.0', 'sensor_type': 'V510RNTC100K10KRG', 'sensor_pin': 'ADC_SENSOR', 'adc_voltage': '3.3', 'voltage_offset': '0', 'min_temp': '-100', 'max_temp': '1000', 'control': 'pid', 'pid_kp': '53.867', 'pid_ki': '0.647', 'pid_kd': '1121.107'}, 'mcu': {'serial': '/dev/ttyACM0', 'restart_method': 'command'}, 'printer': {'kinematics': 'cartesian', 'max_velocity': '200', 'max_accel': '8000', 'max_accel_to_decel': '5000', 'max_z_velocity': '10', 'max_z_accel': '1000', 'square_corner_velocity': '5.0'}, 'bed_mesh default': {'version': '1', 'points': '\n0.291875, 0.141875, -0.066875\n-0.005000, -0.126875, -0.303750\n-0.065625, -0.151250, -0.245000\n0.086875, 0.011875, -0.016250', 'x_count': '3', 'y_count': '4', 'mesh_x_pps': '2', 'mesh_y_pps': '2', 'algo': 'lagrange', 'tension': '0.2', 'min_x': '10.0', 'max_x': '190.0', 'min_y': '10.0', 'max_y': '289.99'}, 'input_shaper': {'shaper_freq_x': '54.2', 'shaper_type_x': 'mzv', 'shaper_freq_y': '43.2', 'shaper_type_y': '2hump_ei'}}, 'settings': {'mcu': {'serial': '/dev/ttyACM0', 'baud': 250000, 'restart_method': 'command', 'max_stepper_error': 2.5e-05}, 'duplicate_pin_override': {'pins': []}, 'board_pins mcu': {'mcu': ['mcu'], 'aliases': [['X_EN', 'PB14'], ['X_CP', 'PB13'], ['X_DIR', 'PB15'], ['Y_EN', 'PB11'], ['Y_CP', 'PB10'], ['Y_DIR', 'PB12'], ['Z_EN', 'PA7'], ['Z_CP', 'PA6'], ['Z_DIR', 'PB0'], ['B_EN', 'PB5'], ['B_CP', 'PB6'], ['B_DIR', 'PB7'], ['C_EN', 'PD2'], ['C_CP', 'PC11'], ['C_DIR', 'PC12'], ['X_LIM', 'PA10'], ['Y_LIM', 'PC7'], ['Z_LIM', 'PC6'], ['B_HEAT', 'PB3'], ['C_HEAT', 'PB4'], ['BED_HEAT', 'PB9'], ['FAN_MB_COOL', 'PC8'], ['B_SENSOR', 'PA4'], ['C_SENSOR', 'PA5'], ['BED_SENSOR', 'PA3'], ['ADC_SENSOR', 'PA1'], ['FAN_PT_MDCOOL', 'PC9'], ['BEEP_PIN', 'PB1'], ['LIGHT_PIN', 'PA0'], ['POWERON_PIN', 'PB8'], ['Z_PROBE', 'PC10'], ['B_CHECK', 'PC4'], ['C_CHECK', 'PC5'], ['SWDIO', 'PA13'], ['SWCLK', 'PA14'], ['TX1', 'PA9'], ['RX1', 'PA10'], ['BOOT1', 'PB2'], ['USB_CAN_TX', 'PA12'], ['USB_CAN_RX', 'PA11']]}, 'adc_temperature v51rntc100k510rg': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 20.0, 'voltage2': 0.013382527, 'temperature3': 40.0, 'voltage3': 0.031463237, 'temperature4': 60.0, 'voltage4': 0.066889233, 'temperature5': 80.0, 'voltage5': 0.130353962, 'temperature6': 100.0, 'voltage6': 0.236675573, 'temperature7': 120.0, 'voltage7': 0.3947924, 'temperature8': 160.0, 'voltage8': 0.8976, 'temperature9': 170.0, 'voltage9': 1.044044665, 'temperature10': 180.0, 'voltage10': 1.199315898, 'temperature11': 190.0, 'voltage11': 1.359670383, 'temperature12': 200.0, 'voltage12': 1.512265253, 'temperature13': 210.0, 'voltage13': 1.653891509, 'temperature14': 220.0, 'voltage14': 1.784729586, 'temperature15': 230.0, 'voltage15': 1.91206544, 'temperature16': 240.0, 'voltage16': 2.034574468, 'temperature17': 250.0, 'voltage17': 2.14504206, 'temperature18': 260.0, 'voltage18': 2.242803838, 'temperature19': 270.0, 'voltage19': 2.329089399, 'temperature20': 280.0, 'voltage20': 2.405660377, 'temperature21': 290.0, 'voltage21': 2.474272273, 'temperature22': 300.0, 'voltage22': 2.537313433}, 'adc_temperature v510rntc100k10krg': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 10.0, 'voltage2': 0.156985871, 'temperature3': 20.0, 'voltage3': 0.243165574, 'temperature4': 30.0, 'voltage4': 0.363036304, 'temperature5': 40.0, 'voltage5': 0.520176545, 'temperature6': 50.0, 'voltage6': 0.71413114, 'temperature7': 60.0, 'voltage7': 0.939903161, 'temperature8': 70.0, 'voltage8': 1.18705036, 'temperature9': 80.0, 'voltage9': 1.443569554, 'temperature10': 90.0, 'voltage10': 1.697792869, 'temperature11': 100.0, 'voltage11': 1.934349355, 'temperature12': 110.0, 'voltage12': 2.143135472, 'temperature13': 120.0, 'voltage13': 2.321981424, 'temperature14': 130.0, 'voltage14': 2.47710554, 'temperature15': 140.0, 'voltage15': 2.607458913, 'temperature16': 150.0, 'voltage16': 2.710472279, 'temperature17': 160.0, 'voltage17': 2.790933694, 'temperature18': 170.0, 'voltage18': 2.854424358, 'temperature19': 180.0, 'voltage19': 2.906899923, 'temperature20': 190.0, 'voltage20': 2.949905245, 'temperature21': 200.0, 'voltage21': 2.983212649, 'temperature22': 300.0, 'voltage22': 3.109599239}, 'adc_temperature 2800pt10021x': {'temperature1': 0.0, 'voltage1': 0.0, 'temperature2': 10.0, 'voltage2': 0.091, 'temperature3': 20.0, 'voltage3': 0.182, 'temperature4': 30.0, 'voltage4': 0.225, 'temperature5': 40.0, 'voltage5': 0.34, 'temperature6': 50.0, 'voltage6': 0.38, 'temperature7': 60.0, 'voltage7': 0.469, 'temperature8': 70.0, 'voltage8': 0.557, 'temperature9': 80.0, 'voltage9': 0.645, 'temperature10': 90.0, 'voltage10': 0.732, 'temperature11': 100.0, 'voltage11': 0.818, 'temperature12': 110.0, 'voltage12': 0.904, 'temperature13': 120.0, 'voltage13': 0.99, 'temperature14': 130.0, 'voltage14': 1.075, 'temperature15': 140.0, 'voltage15': 1.16, 'temperature16': 150.0, 'voltage16': 1.244, 'temperature17': 160.0, 'voltage17': 1.328, 'temperature18': 170.0, 'voltage18': 1.411, 'temperature19': 180.0, 'voltage19': 1.494, 'temperature20': 190.0, 'voltage20': 1.576, 'temperature21': 200.0, 'voltage21': 1.658, 'temperature22': 210.0, 'voltage22': 1.739, 'temperature23': 220.0, 'voltage23': 1.82, 'temperature24': 230.0, 'voltage24': 1.901, 'temperature25': 240.0, 'voltage25': 1.981, 'temperature26': 250.0, 'voltage26': 2.061, 'temperature27': 260.0, 'voltage27': 2.14, 'temperature28': 270.0, 'voltage28': 2.218, 'temperature29': 280.0, 'voltage29': 2.297, 'temperature30': 290.0, 'voltage30': 2.374, 'temperature31': 300.0, 'voltage31': 2.452, 'temperature32': 310.0, 'voltage32': 2.529, 'temperature33': 320.0, 'voltage33': 2.605, 'temperature34': 330.0, 'voltage34': 2.681, 'temperature35': 340.0, 'voltage35': 2.757, 'temperature36': 350.0, 'voltage36': 2.832, 'temperature37': 360.0, 'voltage37': 2.907, 'temperature38': 370.0, 'voltage38': 2.982, 'temperature39': 380.0, 'voltage39': 3.056, 'temperature40': 390.0, 'voltage40': 3.129, 'temperature41': 400.0, 'voltage41': 3.202, 'temperature42': 410.0, 'voltage42': 3.275, 'temperature43': 420.0, 'voltage43': 3.348, 'temperature44': 430.0, 'voltage44': 3.42, 'temperature45': 440.0, 'voltage45': 3.491, 'temperature46': 450.0, 'voltage46': 3.562}, 'adc_temperature v2krpt1000g': {'temperature1': 0.0, 'voltage1': 1.1, 'temperature2': 10.0, 'voltage2': 1.12825083702832, 'temperature3': 20.0, 'voltage3': 1.15570520495072, 'temperature4': 30.0, 'voltage4': 1.18239529327061, 'temperature5': 40.0, 'voltage5': 1.20835289762845, 'temperature6': 50.0, 'voltage6': 1.23360678603531, 'temperature7': 60.0, 'voltage7': 1.25818549513538, 'temperature8': 70.0, 'voltage8': 1.28209260054759, 'temperature9': 80.0, 'voltage9': 1.30542042111015, 'temperature10': 90.0, 'voltage10': 1.3281255032388, 'temperature11': 100.0, 'voltage11': 1.35025324551595, 'temperature12': 110.0, 'voltage12': 1.37182453603278, 'temperature13': 120.0, 'voltage13': 1.39286036270328, 'temperature14': 130.0, 'voltage14': 1.41337959745809, 'temperature15': 140.0, 'voltage15': 1.43340128506837, 'temperature16': 150.0, 'voltage16': 1.45292390746149, 'temperature17': 160.0, 'voltage17': 1.472020615176, 'temperature18': 170.0, 'voltage18': 1.49065109420375, 'temperature19': 180.0, 'voltage19': 1.50884974773277, 'temperature20': 190.0, 'voltage20': 1.52663068697372, 'temperature21': 200.0, 'voltage21': 1.54400834362096, 'temperature22': 210.0, 'voltage22': 1.56099558003043, 'temperature23': 220.0, 'voltage23': 1.57760561083021, 'temperature24': 230.0, 'voltage24': 1.59385018298457, 'temperature25': 240.0, 'voltage25': 1.60974142116941, 'temperature26': 250.0, 'voltage26': 1.62529007371515, 'temperature27': 260.0, 'voltage27': 1.64050728680736, 'temperature28': 270.0, 'voltage28': 1.65540291258144, 'temperature29': 280.0, 'voltage29': 1.66998721674823, 'temperature30': 290.0, 'voltage30': 1.68426924537295, 'temperature31': 300.0, 'voltage31': 1.69825847011842, 'temperature32': 310.0, 'voltage32': 1.71264706614488, 'temperature33': 320.0, 'voltage33': 1.72677945545593, 'temperature34': 330.0, 'voltage34': 1.74066242077945, 'temperature35': 340.0, 'voltage35': 1.75430250751947, 'temperature36': 350.0, 'voltage36': 1.76770603404595, 'temperature37': 360.0, 'voltage37': 1.7808791014538, 'temperature38': 370.0, 'voltage38': 1.7938276028228, 'temperature39': 380.0, 'voltage39': 1.80655723200792, 'temperature40': 390.0, 'voltage40': 1.81907349198768, 'temperature41': 400.0, 'voltage41': 1.83138170279616, 'temperature42': 410.0, 'voltage42': 1.84348700906271, 'temperature43': 420.0, 'voltage43': 1.85539438718188, 'temperature44': 430.0, 'voltage44': 1.86710865213447, 'temperature45': 440.0, 'voltage45': 1.87863446397937, 'temperature46': 450.0, 'voltage46': 1.88997633403461, 'temperature47': 460.0, 'voltage47': 1.90113863076482, 'temperature48': 470.0, 'voltage48': 1.91212558539123, 'temperature49': 480.0, 'voltage49': 1.92294129723937, 'temperature50': 490.0, 'voltage50': 1.93358973883863, 'temperature51': 500.0, 'voltage51': 1.94407476078705}, 'adc_temperature v510rntc100k10krgx4': {'temperature1': 0.0, 'voltage1': 0.098328417, 'temperature2': 40.0, 'voltage2': 0.52, 'temperature3': 200.0, 'voltage3': 1.0}, 'adc_temperature v51rntc100k510rgx4': {'temperature1': 0.0, 'voltage1': 0.005167951, 'temperature2': 40.0, 'voltage2': 0.031463237, 'temperature3': 300.0, 'voltage3': 0.1}, 'idle_timeout': {'timeout': 360000.0, 'gcode': "\n{% if 'heaters' in printer %}\n   TURN_OFF_HEATERS\n{% endif %}\nM84\n"}, 'virtual_sdcard': {'path': '/home/tier/printer_data/gcodes', 'on_error_gcode': ''}, 'delayed_gcode init': {'gcode': '\n{% if printer["gcode_macro VAR_MODEL"].doorcheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].doorcheck == 0 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].filacheck == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif printer["gcode_macro VAR_MODEL"].filacheck == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% set svv = printer.save_variables.variables %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\n{% if "xyz" in printer.toolhead.homed_axes %}\nG28\n{% else %}\n{% endif %}', 'initial_duration': 5.0}, 'probe': {'z_offset': -0.19, 'deactivate_on_each_sample': True, 'activate_gcode': '\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG4 P1000\n{% else %}\n{% endif %}\nG4 P500', 'deactivate_gcode': '', 'pin': '!Z_PROBE', 'speed': 3.0, 'lift_speed': 1.5, 'x_offset': 0.0, 'y_offset': 0.0, 'samples': 3, 'sample_retract_dist': 3.0, 'samples_result': 'median', 'samples_tolerance': 0.1, 'samples_tolerance_retries': 5}, 'delayed_gcode bed_mesh_init': {'gcode': '\n\nBED_MESH_PROFILE LOAD=default', 'initial_duration': 0.01}, 'gcode_macro var_extruder': {'gcode': '', 'description': 'G-Code macro', 'variable_extruder_selected': '-1', 'variable_extruder_follow': '-1', 'variable_retract_length': '1.5', 'variable_retract_speed': '5000', 'variable_t0_distance': '29', 'variable_t1_distance': '29', 'variable_min_percent': '11', 'variable_max_percent': '88', 'variable_current_percent': '11', 'variable_current_percent0': '11', 'variable_current_percent1': '11', 'variable_current_percent2': '11', 'variable_current_percent3': '11', 'variable_current_percent4': '11', 'variable_current_percent5': '11', 'variable_current_percent6': '11', 'variable_current_percent7': '11', 'variable_current_percent8': '11', 'variable_current_percent9': '11', 'variable_current_num': '0', 'variable_current_num0': '0', 'variable_current_num1': '0', 'variable_current_num2': '0', 'variable_current_num3': '0', 'variable_current_num4': '0', 'variable_current_num5': '0', 'variable_current_num6': '0', 'variable_current_num7': '0', 'variable_current_num8': '0', 'variable_current_num9': '0', 'variable_position_z': '0', 'variable_probe': '-1', 'variable_temp0': '-1', 'variable_temp1': '-1'}, 'gcode_macro var_print': {'gcode': '', 'description': 'G-Code macro', 'variable_is_probe': '-1', 'variable_is_bedmesh': '-1', 'variable_is_home': '-1', 'variable_is_paused': '-1'}, 'gcode_macro m300': {'gcode': '\n{% set P = params.P|default(500)|int %}\nSET_PIN PIN=BEEP VALUE=1\nG4 P{P}\nSET_PIN PIN=BEEP VALUE=0', 'description': 'Buzzer beep'}, 'pause_resume': {'recover_velocity': 50.0}, 'gcode_macro pause': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp1 VALUE={printer.extruder1.target}\nM104 T1 S150\nM104 T0 S150\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=temp0 VALUE={printer.extruder.target}\nM104 T0 S150\n{% endif %}\nPAUSE_BASE\nG91\nG1 E-2.0 F2000\nG1 Z2 F600\nG90\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'PAUSE_BASE', 'description': 'Pause printing'}, 'gcode_macro resume': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM109 T1 S{printer["gcode_macro VAR_EXTRUDER"].temp1}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 T0 S{printer["gcode_macro VAR_EXTRUDER"].temp0}\n{% endif %}\n\n\n\nM300\nRESUME_BASE\n\n{% if svv.doorcheck|int == 1 %}\n\n{% if printer["gcode_macro VAR_PRINT"].is_paused == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 2 %}\n{% elif printer["gcode_macro VAR_PRINT"].is_paused == 3 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% else %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n{% endif %}\n{% endif %}\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'rename_existing': 'RESUME_BASE', 'description': 'Resume printing'}, 'gcode_macro g32': {'gcode': '\nBED_MESH_CLEAR\nM301\nG4 P200\nG28\nG1 Z5 F1000\n\nBED_MESH_CALIBRATE', 'description': 'Mesh bed leveling'}, 'gcode_macro notify_filament_change': {'gcode': '\n{action_call_remote_method("notify",\nname="dingtalk_notifier",\nmessage="Filament change needed!")}', 'description': 'G-Code macro'}, 'gcode_macro pid_extruder': {'gcode': '\nPID_CALIBRATE HEATER=extruder TARGET=250', 'description': 'PID_CALIBRATE EXTRUER AT 250'}, 'gcode_macro m308': {'gcode': '\n\n{% set P = params.P|default(-11)|float %}\n{% if P < -10 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% elif printer["gcode_macro VAR_MODEL"].model == 3 %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% else %}\n{% set Z = (printer.probe.last_z_result+0.2)|float %}\n{% endif %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z}\n\n{% else %}\n\n\n{% endif %}\n{% elif P == 0 %}\n{% set Z = (-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE=0\nSAVE_VARIABLE VARIABLE=zoffset VALUE=0\n\n{% else %}\n{% if printer["gcode_macro VAR_EXTRUDER"].position_z == 0 %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% else %}\n{% set Z = (P-printer["gcode_macro VAR_EXTRUDER"].position_z)|float %}\nSET_GCODE_OFFSET Z_ADJUST={Z}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={P}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={P}\n\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro szoffset': {'gcode': '\n{% set svv = printer.save_variables.variables %}\n{% set Z1 = svv.zoffset|float %}\n\n\n\n\n{% set Z2 = (printer.gcode_move.position.z+0.2)|float %}\n\n{% if Z2|abs > 2 %}\nG91\nG1 Z5 F3000\nG90\nCANCEL_PRINT\n{% endif %}\n{% if Z1|abs > 2 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\n{% if printer.extruder.temperature > 80 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].probe == -1 %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% else %}\nSET_GCODE_OFFSET Z={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z1}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% else %}\nSET_GCODE_OFFSET Z={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=position_z VALUE={Z2}\nSAVE_VARIABLE VARIABLE=zoffset VALUE={Z2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=probe VALUE=1\n{% endif %}\n{% endif %}', 'description': 'Set Z offset'}, 'gcode_macro cleanprobe': {'gcode': '\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% set EXTRUDER_TEMP = params.TEMP|default(200)|int %}\n{% if EXTRUDER_TEMP < 180 %}\n{% set EXTRUDER_TEMP = 180 %}\n{% elif EXTRUDER_TEMP > 220 %}\n{% set EXTRUDER_TEMP = 220 %}\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n\n\nG90\nG1 X5 Y5 F7000\nG4 P500\nprobe\nG91\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG1 Z10 F2000\nG4 P500\nprobe\nG1 Y10 F1000\nG1 Y50 Z0.2 F7000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nG4 P500\nprobe\nSZOFFSET\nG91\nG1 Z5 F3000\nG90\n{% set EXTRUDER_TEMP = 0 %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM104 T0 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM104 S{EXTRUDER_TEMP}\n{% endif %}\n{% else %}\nG28\n{% endif %}', 'description': 'CLEAN NUZZLE AND PROBE'}, 'gcode_macro bedpid': {'gcode': '\n{% set T = params.T|default(60)|int %}\nPID_CALIBRATE HEATER=heater_bed TARGET={T}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR heater_bed eg: BEDPID T=60'}, 'gcode_macro extpid': {'gcode': '\n{% set N = params.N|default(0)|int %}\n{% set T = params.T|default(230)|int %}\n{% if P == 0 %}\nPID_CALIBRATE HEATER=extruder TARGET={T}\n{% elif P == 1 %}\nPID_CALIBRATE HEATER=extruder1 TARGET={T}\n{% else %}\n{% endif %}\nSAVE_CONFIG', 'description': 'PID_CALIBRATE FOR EXTRUDER eg: EXTPID N=0 T=230'}, 'gcode_macro spreadmode': {'gcode': '\n{% set M = params.M|default(0)|int %}\n{% if M == 0 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=0\n{% endif %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 400 %}\nSET_PIN PIN=SPREAD VALUE=1\n{% endif %}\n{% endif %}', 'description': 'SET SPREADMODE  eg: SPREADMODE M=0'}, 'homing_override': {'axes': 'xyz', 'gcode': '\n\n\nM301\nSET_PIN PIN=LIGHT VALUE=1\nBED_MESH_CLEAR\n{% if printer["gcode_macro VAR_MODEL"].uart == 1 %}\nG4 P3000\nINIT_TMC STEPPER=stepper_z\nG4 P100\nINIT_TMC STEPPER=stepper_y\nG4 P100\nINIT_TMC STEPPER=stepper_x\nG4 P1000\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=50 VELOCITY=10 ACCEL=50\nG4 P200\nFORCE_MOVE STEPPER=stepper_y DISTANCE=50 VELOCITY=50 ACCEL=100\n{% else %}\nSET_KINEMATIC_POSITION X=0 Y=0 Z=0\nFORCE_MOVE STEPPER=stepper_z DISTANCE=5 VELOCITY=2 ACCEL=50\n{% endif %}\nG4 P200\n{% set X = params.X|default(1000)|int %}\n{% set Y = params.Y|default(1000)|int %}\n{% set Z = params.Z|default(1000)|int %}\n{% set XY = params.XY|default(1000)|int %}\n{% set XZ = params.XZ|default(1000)|int %}\n{% set YZ = params.YZ|default(1000)|int %}\n{% set XYZ = params.XYZ|default(1000)|int %}\n{% set H = 0 %}\n{% if X == 0 %}\nG28 X\nG91\nG1 X10 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=1\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Y == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=2\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if Z == 0 %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=4\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XY == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=3\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if XZ == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=5\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if YZ == 0 %}\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=6\n{% set H = 1 %}\n{% else %}\n{% endif %}\n{% if H == 0 %}\nG28 X\nG91\nG1 X10 F3000\nG28 Y\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Y10 F3000\n{% else %}\nG1 Y-10 F3000\n{% endif %}\nG28 Z\nG91\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\nG1 Z10 F3000\n{% else %}\nG1 Z-10 F3000\n{% endif %}\nG90\nG1 X{(printer.toolhead.axis_maximum.x |int - 100)} F3000\nG1 Y{(printer.toolhead.axis_maximum.y/2 |int - 0)} F3000\nG1 Z100 F3000\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=7\n{% set H = 1 %}\n{% else %}\n{% endif %}\nBED_MESH_PROFILE LOAD="default"'}, 'gcode_macro t0': {'gcode': '\n\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT1\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\n\n{% endif %}', 'description': 'Activate Extruder 1, an optional P value could be added to indicate mixing ratio. eg T0 P25 is assign 25% flow to extruder 1 and rest for extruder 2'}, 'gcode_macro t1': {'gcode': '\n{% set P = params.P|default(100)|int %}\n{% if P == 0 %}\nT0\n{% elif P == 100 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].min_percent %}\n{% endif %}\n{% if P > printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% set P = printer["gcode_macro VAR_EXTRUDER"].max_percent %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=1\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\n\n{% endif %}', 'description': 'Activate Extruder 2 and add optional mixing ratio.'}, 'gcode_macro t2': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t3': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t4': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t5': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t6': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t7': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t8': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t9': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro t10': {'gcode': '', 'description': 'No real action, just for displaying correct color in Orcaslicer and prevent warning message from Klipper'}, 'gcode_macro g10': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E-{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware retraction'}, 'gcode_macro g11': {'gcode': '\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=58\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=58\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nM83\nG1 E{printer["gcode_macro VAR_EXTRUDER"].retract_length} F{printer["gcode_macro VAR_EXTRUDER"].retract_speed}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t0_distance)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(printer["gcode_macro VAR_EXTRUDER"].t1_distance)}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 1 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\n\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_follow|int == 10 %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\n\n{% else %}\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\n{% endif %}', 'description': 'Firmware de-retraction'}, 'gcode_macro m305': {'gcode': '\n{% set L = params.L|default(1.5)|float %}\n{% set F = params.F|default(5000)|int %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_length VALUE={L}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=retract_speed VALUE={F}', 'description': 'Set retraction length and speed of firmware retraction'}, 'gcode_macro m306': {'gcode': '\n{% set P = params.P|default(0)|int %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n\n{% if P == 0 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% elif P == 100 %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\n{% elif printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\n{% endif %}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\n\n{% else %}\n{% if P < MIN %}\n{% set P = MIN %}\n{% endif %}\n{% if P > MAX %}\n{% set P = MAX %}\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 1 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder1\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder MOTION_QUEUE=extruder1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=1\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/(100-P))}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/P)}\n\n\n{% endif %}\n{% if printer["gcode_macro VAR_EXTRUDER"].extruder_selected|int == 0 %}\nACTIVATE_EXTRUDER EXTRUDER=extruder\nSYNC_EXTRUDER_MOTION EXTRUDER=extruder1 MOTION_QUEUE=extruder\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=10\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder DISTANCE={(29*100/P)}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE={(29*100/P)}\nSET_EXTRUDER_ROTATION_DISTANCE EXTRUDER=extruder1 DISTANCE={(29*100/(100-P))}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE={(29*100/(100-P))}\n\n\n{% endif %}\n\n\n{% endif %}', 'description': 'Set current extruder mixing ratio'}, 'gcode_macro mix': {'gcode': '\n{% set C = params.C|default(0)|int %}\n{% set P = params.P|default(1)|int %}\n{% set X = params.X|default(1)|float %}\n{% set DELTA = 0.1 %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\n{% set LAYER = ((printer.print_stats.info.total_layer|int) - 1) %}\n{% set CURRENT = (printer["gcode_macro VAR_EXTRUDER"].current_percent) %}\n{% set CURRENT0 = (printer["gcode_macro VAR_EXTRUDER"].current_percent0) %}\n{% set CURRENT1 = (printer["gcode_macro VAR_EXTRUDER"].current_percent1) %}\n{% set CURRENT2 = (printer["gcode_macro VAR_EXTRUDER"].current_percent2) %}\n{% set CURRENT3 = (printer["gcode_macro VAR_EXTRUDER"].current_percent3) %}\n{% set CURRENT4 = (printer["gcode_macro VAR_EXTRUDER"].current_percent4) %}\n{% set CURRENT5 = (printer["gcode_macro VAR_EXTRUDER"].current_percent5) %}\n{% set CURRENT6 = (printer["gcode_macro VAR_EXTRUDER"].current_percent6) %}\n{% set CURRENT7 = (printer["gcode_macro VAR_EXTRUDER"].current_percent7) %}\n{% set CURRENT8 = (printer["gcode_macro VAR_EXTRUDER"].current_percent8) %}\n{% set CURRENT9 = (printer["gcode_macro VAR_EXTRUDER"].current_percent9) %}\n{% set NUM = (printer["gcode_macro VAR_EXTRUDER"].current_num) %}\n{% set NUM0 = (printer["gcode_macro VAR_EXTRUDER"].current_num0) %}\n{% set NUM1 = (printer["gcode_macro VAR_EXTRUDER"].current_num1) %}\n{% set NUM2 = (printer["gcode_macro VAR_EXTRUDER"].current_num2) %}\n{% set NUM3 = (printer["gcode_macro VAR_EXTRUDER"].current_num3) %}\n{% set NUM4 = (printer["gcode_macro VAR_EXTRUDER"].current_num4) %}\n{% set NUM5 = (printer["gcode_macro VAR_EXTRUDER"].current_num5) %}\n{% set NUM6 = (printer["gcode_macro VAR_EXTRUDER"].current_num6) %}\n{% set NUM7 = (printer["gcode_macro VAR_EXTRUDER"].current_num7) %}\n{% set NUM8 = (printer["gcode_macro VAR_EXTRUDER"].current_num8) %}\n{% set NUM9 = (printer["gcode_macro VAR_EXTRUDER"].current_num9) %}\n{% if P == 0 %}\n{% set T = range(MIN, MAX) | random %}\n{% if C == 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT0: {T}\n{% elif C == 1 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT1: {T}\n{% elif C == 2 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT2: {T}\n{% elif C == 3 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT3: {T}\n{% elif C == 4 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT4: {T}\n{% elif C == 5 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT5: {T}\n{% elif C == 6 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT6: {T}\n{% elif C == 7 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT7: {T}\n{% elif C == 8 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT8: {T}\n{% elif C == 9 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT9: {T}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={T}\nM306 P{T}\nM118 CURRENTPERCENT: {T}\n{% endif %}\n{% elif P == 1 %}\n{% if C == 0 %}\n{% if CURRENT0 < MAX %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0+1)}\n{% endif %}\n{% elif CURRENT0 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if CURRENT1 < MAX %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1+1)}\n{% endif %}\n{% elif CURRENT1 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if CURRENT2 < MAX %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2+1)}\n{% endif %}\n{% elif CURRENT2 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if CURRENT3 < MAX %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3+1)}\n{% endif %}\n{% elif CURRENT3 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if CURRENT4 < MAX %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4+1)}\n{% endif %}\n{% elif CURRENT4 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if CURRENT5 < MAX %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5+1)}\n{% endif %}\n{% elif CURRENT5 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if CURRENT6 < MAX %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6+1)}\n{% endif %}\n{% elif CURRENT6 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if CURRENT7 < MAX %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7+1)}\n{% endif %}\n{% elif CURRENT7 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if CURRENT8 < MAX %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8+1)}\n{% endif %}\n{% elif CURRENT8 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if CURRENT9 < MAX %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9+1)}\n{% endif %}\n{% elif CURRENT9 < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if CURRENT < MAX %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT+1)}\n{% endif %}\n{% elif CURRENT < (MAX + DELTA) %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\n{% else %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1*X*(MAX-MIN)/LAYER)}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MIN+1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 2 %}\n{% if CURRENT == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% if C == 0 %}\n{% if MIN < CURRENT0 %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% elif MIN == CURRENT0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT0 + DELTA)%}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(CURRENT0-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if MIN < CURRENT1 %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% elif MIN == CURRENT1 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT1 + DELTA)%}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(CURRENT1-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if MIN < CURRENT2 %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% elif MIN == CURRENT2 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT2 + DELTA)%}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(CURRENT2-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if MIN < CURRENT3 %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% elif MIN == CURRENT3 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT3 + DELTA)%}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(CURRENT3-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if MIN < CURRENT4 %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% elif MIN == CURRENT4 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT4 + DELTA)%}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(CURRENT4-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if MIN < CURRENT5 %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% elif MIN == CURRENT5 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT5 + DELTA)%}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(CURRENT5-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if MIN < CURRENT6 %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% elif MIN == CURRENT6 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT6 + DELTA)%}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(CURRENT6-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if MIN < CURRENT7 %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% elif MIN == CURRENT7 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT7 + DELTA)%}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(CURRENT7-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if MIN < CURRENT8 %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% elif MIN == CURRENT8 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT8 + DELTA)%}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(CURRENT8-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if MIN < CURRENT9 %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% elif MIN == CURRENT9 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT9 + DELTA)%}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(CURRENT9-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% else %}\n{% if MIN < CURRENT %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% elif MIN == CURRENT %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% elif MIN < (CURRENT + DELTA)%}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(CURRENT-1)}\n{% endif %}\n{% else %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\n{% if LAYER > 0 %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1*X*(MAX-MIN)/(LAYER))}\n{% else %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={(MAX-1)}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 3 %}\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT0}\nM118 CURRENTPERCENT0: {CURRENT0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN == CURRENT0 %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% elif MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT1}\nM118 CURRENTPERCENT1: {CURRENT1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN == CURRENT1 %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% elif MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT2}\nM118 CURRENTPERCENT2: {CURRENT2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN == CURRENT2 %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% elif MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT3}\nM118 CURRENTPERCENT3: {CURRENT3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN == CURRENT3 %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% elif MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT4}\nM118 CURRENTPERCENT4: {CURRENT4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN == CURRENT4 %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% elif MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT5}\nM118 CURRENTPERCENT5: {CURRENT5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN == CURRENT5 %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% elif MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT6}\nM118 CURRENTPERCENT6: {CURRENT6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN == CURRENT6 %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% elif MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT7}\nM118 CURRENTPERCENT7: {CURRENT7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN == CURRENT7 %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% elif MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT8}\nM118 CURRENTPERCENT8: {CURRENT8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN == CURRENT8 %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% elif MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT9}\nM118 CURRENTPERCENT9: {CURRENT9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN == CURRENT9 %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% elif MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT == MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT}\nM118 CURRENTPERCENT: {CURRENT}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN == CURRENT %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% elif MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% elif P == 4 %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{% if C == 0 %}\n{% if NUM0 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0-2*X) %}\n{% endif %}\n{% if MIN < CURRENT0 %}\n{% if CURRENT_TEMP0 <= MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT0: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% elif MIN == CURRENT0 %}\n{% if NUM0 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP0 = (CURRENT0+2*X) %}\n{% endif %}\n{% if CURRENT0 < MAX %}\n{% if CURRENT_TEMP0 >= MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT0: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE={(NUM0+1)}\n{% else %}\nM306 P{CURRENT_TEMP0}\nM118 CURRENTPERCENT0: {CURRENT_TEMP0}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={CURRENT_TEMP0}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 1 %}\n{% if NUM1 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1-2*X) %}\n{% endif %}\n{% if MIN < CURRENT1 %}\n{% if CURRENT_TEMP1 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT1: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% elif MIN == CURRENT1 %}\n{% if NUM1 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP1 = (CURRENT1+2*X) %}\n{% endif %}\n{% if CURRENT1 < MAX %}\n{% if CURRENT_TEMP1 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT1: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE={(NUM1+1)}\n{% else %}\nM306 P{CURRENT_TEMP1}\nM118 CURRENTPERCENT1: {CURRENT_TEMP1}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={CURRENT_TEMP1}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 2 %}\n{% if NUM2 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2-2*X) %}\n{% endif %}\n{% if MIN < CURRENT2 %}\n{% if CURRENT_TEMP2 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT2: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% elif MIN == CURRENT2 %}\n{% if NUM2 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP2 = (CURRENT2+2*X) %}\n{% endif %}\n{% if CURRENT2 < MAX %}\n{% if CURRENT_TEMP2 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT2: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE={(NUM2+1)}\n{% else %}\nM306 P{CURRENT_TEMP2}\nM118 CURRENTPERCENT2: {CURRENT_TEMP2}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={CURRENT_TEMP2}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 3 %}\n{% if NUM3 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3-2*X) %}\n{% endif %}\n{% if MIN < CURRENT3 %}\n{% if CURRENT_TEMP3 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT3: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% elif MIN == CURRENT3 %}\n{% if NUM3 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP3 = (CURRENT3+2*X) %}\n{% endif %}\n{% if CURRENT3 < MAX %}\n{% if CURRENT_TEMP3 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT3: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE={(NUM3+1)}\n{% else %}\nM306 P{CURRENT_TEMP3}\nM118 CURRENTPERCENT3: {CURRENT_TEMP3}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={CURRENT_TEMP3}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 4 %}\n{% if NUM4 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4-2*X) %}\n{% endif %}\n{% if MIN < CURRENT4 %}\n{% if CURRENT_TEMP4 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT4: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% elif MIN == CURRENT4 %}\n{% if NUM4 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP4 = (CURRENT4+2*X) %}\n{% endif %}\n{% if CURRENT4 < MAX %}\n{% if CURRENT_TEMP4 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT4: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE={(NUM4+1)}\n{% else %}\nM306 P{CURRENT_TEMP4}\nM118 CURRENTPERCENT4: {CURRENT_TEMP4}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={CURRENT_TEMP4}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 5 %}\n{% if NUM5 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5-2*X) %}\n{% endif %}\n{% if MIN < CURRENT5 %}\n{% if CURRENT_TEMP5 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT5: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% elif MIN == CURRENT5 %}\n{% if NUM5 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP5 = (CURRENT5+2*X) %}\n{% endif %}\n{% if CURRENT5 < MAX %}\n{% if CURRENT_TEMP5 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT5: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE={(NUM5+1)}\n{% else %}\nM306 P{CURRENT_TEMP5}\nM118 CURRENTPERCENT5: {CURRENT_TEMP5}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={CURRENT_TEMP5}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 6 %}\n{% if NUM6 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6-2*X) %}\n{% endif %}\n{% if MIN < CURRENT6 %}\n{% if CURRENT_TEMP6 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT6: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% elif MIN == CURRENT6 %}\n{% if NUM6 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP6 = (CURRENT6+2*X) %}\n{% endif %}\n{% if CURRENT6 < MAX %}\n{% if CURRENT_TEMP6 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT6: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE={(NUM6+1)}\n{% else %}\nM306 P{CURRENT_TEMP6}\nM118 CURRENTPERCENT6: {CURRENT_TEMP6}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={CURRENT_TEMP6}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 7 %}\n{% if NUM7 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7-2*X) %}\n{% endif %}\n{% if MIN < CURRENT7 %}\n{% if CURRENT_TEMP7 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT7: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% elif MIN == CURRENT7 %}\n{% if NUM7 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP7 = (CURRENT7+2*X) %}\n{% endif %}\n{% if CURRENT7 < MAX %}\n{% if CURRENT_TEMP7 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT7: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE={(NUM7+1)}\n{% else %}\nM306 P{CURRENT_TEMP7}\nM118 CURRENTPERCENT7: {CURRENT_TEMP7}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={CURRENT_TEMP7}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 8 %}\n{% if NUM8 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8-2*X) %}\n{% endif %}\n{% if MIN < CURRENT8 %}\n{% if CURRENT_TEMP8 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT8: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% elif MIN == CURRENT8 %}\n{% if NUM8 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP8 = (CURRENT8+2*X) %}\n{% endif %}\n{% if CURRENT8 < MAX %}\n{% if CURRENT_TEMP8 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT8: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE={(NUM8+1)}\n{% else %}\nM306 P{CURRENT_TEMP8}\nM118 CURRENTPERCENT8: {CURRENT_TEMP8}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={CURRENT_TEMP8}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% elif C == 9 %}\n{% if NUM9 % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9-2*X) %}\n{% endif %}\n{% if MIN < CURRENT9 %}\n{% if CURRENT_TEMP9 < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT9: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% elif MIN == CURRENT9 %}\n{% if NUM9 == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP9 = (CURRENT9+2*X) %}\n{% endif %}\n{% if CURRENT9 < MAX %}\n{% if CURRENT_TEMP9 > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT9: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE={(NUM9+1)}\n{% else %}\nM306 P{CURRENT_TEMP9}\nM118 CURRENTPERCENT9: {CURRENT_TEMP9}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={CURRENT_TEMP9}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% else %}\n{% if NUM % 2 == 0 %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT-2*X*(MAX-MIN)/(LAYER)) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT-2*X) %}\n{% endif %}\n{% if MIN < CURRENT %}\n{% if CURRENT_TEMP < MIN %}\nM306 P{MIN}\nM118 CURRENTPERCENT: {MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% elif MIN == CURRENT %}\n{% if NUM == 0 %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\n{% else %}\n{% endif %}\n{% else %}\n{% endif %}\n{% else %}\n{% if LAYER > 0 %}\n{% set CURRENT_TEMP = (CURRENT+2*X*(MAX-MIN)/LAYER) %}\n{% else %}\n{% set CURRENT_TEMP = (CURRENT+2*X) %}\n{% endif %}\n{% if CURRENT < MAX %}\n{% if CURRENT_TEMP > MAX %}\nM306 P{MAX}\nM118 CURRENTPERCENT: {MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MAX}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE={(NUM+1)}\n{% else %}\nM306 P{CURRENT_TEMP}\nM118 CURRENTPERCENT: {CURRENT_TEMP}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={CURRENT_TEMP}\n{% endif %}\n{% else %}\n{% endif %}\n{% endif %}\n{% endif %}\n{% else %}\n{% endif %}', 'description': 'Vertical Gradient Mixing. Gradient adjust automatically to print height.'}, 'gcode_macro m301': {'gcode': '\n\n\n{% set P = params.P|default(1)|int %}\n{% if P == 1 %}\n{% if printer["gcode_macro VAR_MODEL"].model == 3 %}\nM302\nM303\n{% endif %}\nG4 P200\nSET_PIN PIN=POWER VALUE=1\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nT0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=1\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=1\n{% endif %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% if printer["gcode_macro VAR_MODEL"].expower == 1 %}\nSET_PIN PIN=EXPOWER VALUE=0\n{% endif %}\n{% if printer["gcode_macro VAR_MODEL"].bedpower == 1 %}\nSET_PIN PIN=BEDPOWER VALUE=0\n{% endif %}\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n{% endif %}', 'description': 'Motion system power on'}, 'gcode_macro start_print': {'gcode': '\n\n\n{% set svv = printer.save_variables.variables %}\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\nCANCEL_PRINT\n{% endif %}\n\n\n\n\nCLEAR_PAUSE\nM301\n\nG90\n\n\n\n\n\n{% if "xyz" in printer.toolhead.homed_axes %}\n{% else %}\nG28\n{% endif %}\n\n{% if BED_TEMP == 0 %}\n{% else %}\nM140 S{BED_TEMP}\n{% endif %}\n\n{% if ISPROBE == 0 %}\n{% if svv.is_probe|int == 2 %}\n{% set ISPROBE = 2 %}\n{% elif svv.is_probe|int == 1 %}\n{% set ISPROBE = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 0 %}\n{% if svv.is_bedmesh|int == 2 %}\n{% set ISBEDMESH = 2 %}\n{% elif svv.is_bedmesh|int == 1 %}\n{% set ISBEDMESH = 1 %}\n{% else %}\n{% endif %}\n{% endif %}\n{% if ISBEDMESH == 2 %}\nM190 S{BED_TEMP}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% elif ISBEDMESH == 1 %}\nBED_MESH_CALIBRATE\nG91\nG1 Z5 F3000\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z10 F3000\n{% else %}\n{% endif %}\n\n{% if ISPROBE == 2 %}\nCLEANPROBE TEMP={EXTRUDER_TEMP-50}\n{% elif ISPROBE == 1 %}\nG90\nG1 X{printer.toolhead.axis_maximum.x/2 |int} Y{printer.toolhead.axis_maximum.y/2 |int} Z5 F3000\nprobe\nSZOFFSET\n{% else %}\n{% endif %}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nG90\nG1 X6 Y5 F5000\nG1 Z10 F3000\n\nG1 Z5 F300\nG1 Z0.2 F300\n\n\n\n\n\n\n\n{% if EXTRUDER_TEMP == 0 %}\n{% else %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM104 T1 S{EXTRUDER_TEMP}\nM109 T0 S{EXTRUDER_TEMP}\nM109 T1 S{EXTRUDER_TEMP}\n{% elif printer["gcode_macro VAR_MODEL"].extrudr_num == 1 %}\nM109 S{EXTRUDER_TEMP}\n{% endif %}\n{% endif %}\nG91\nG1 Y10 F1000\nG1 Y50 F7000\nG90\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=1\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=1\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=1\n{% endif %}\nSPREADMODE M=0', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro print_start': {'gcode': '\n{% set ISPROBE = params.ISPROBE|default(0)|int %}\n{% set ISBEDMESH = params.ISBEDMESH|default(0)|int %}\n{% set BED_TEMP = params.BED_TEMP|default(0)|int %}\n{% set EXTRUDER_TEMP = params.EXTRUDER_TEMP|default(0)|int %}\n{% if BED_TEMP == 0 %}\n{% set BED_TEMP = params.BED|default(0)|int %}\n{% endif %}\n{% if EXTRUDER_TEMP == 0 %}\n{% set EXTRUDER_TEMP = params.EXTRUDER|default(0)|int %}\n{% endif %}\nSTART_PRINT BED={BED_TEMP} EXTRUDER={EXTRUDER_TEMP} ISPROBE={ISPROBE} ISBEDMESH={ISBEDMESH}', 'description': 'Power on motion system, home, set temperature and initiate printing'}, 'gcode_macro cancel_print': {'gcode': '\nTURN_OFF_HEATERS\nCANCEL_PRINT_BASE\n{% set svv = printer.save_variables.variables %}\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\nM84\nM300 P500\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'rename_existing': 'CANCEL_PRINT_BASE', 'description': 'Cancel the actual running print'}, 'gcode_macro end_print': {'gcode': '\n\n\n\nTURN_OFF_HEATERS\n{% set svv = printer.save_variables.variables %}\nM106 S0\n\n{% if printer["gcode_macro VAR_MODEL"].extrudr_num == 2 %}\nM305 L1.5 F2000\nG10\n{% else %}\nG91\nG1 E-3 F3000\n{% endif %}\n\n\n\nG91\nG1 X-2 Y-2 F300\n\n{% if (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 200 %}\nG1 Z150 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 100 %}\nG1 Z50 F2000\n{% elif (printer.toolhead.axis_maximum.z - printer.toolhead.position.z) > 50 %}\nG1 Z25 F2000\n{% else %}\nG1 Z{(printer.toolhead.axis_maximum.z - printer.toolhead.position.z)} F2000\n{% endif %}\nG90\n\nM84\n\n{% if printer["gcode_macro VAR_MODEL"].model == 2 %}\n{% else %}\nSET_PIN PIN=POWER VALUE=0\n{% endif %}\n{% set MIN = (printer["gcode_macro VAR_EXTRUDER"].min_percent) %}\n{% set MAX = (printer["gcode_macro VAR_EXTRUDER"].max_percent) %}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_follow VALUE=-1\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t0_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=t1_distance VALUE=29\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=extruder_selected VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent0 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent1 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent2 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent3 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent4 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent5 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent6 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent7 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent8 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_percent9 VALUE={MIN}\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num0 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num1 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num2 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num3 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num4 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num5 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num6 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num7 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num8 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_EXTRUDER VARIABLE=current_num9 VALUE=0\nSET_GCODE_VARIABLE MACRO=VAR_PRINT VARIABLE=is_home VALUE=0\n\n{% if svv.doorcheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=DOOR_CHECK ENABLE=0\n\n{% elif svv.doorcheck|int == 0 %}\n{% endif %}\n\n{% if svv.filacheck|int == 1 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 2 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 3 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\n\n{% elif svv.filacheck|int == 4 %}\nSET_FILAMENT_SENSOR SENSOR=B_sensor ENABLE=0\nSET_FILAMENT_SENSOR SENSOR=C_sensor ENABLE=0\n{% endif %}\nSPREADMODE M=1', 'description': 'End print job and power off motion system'}, 'gcode_macro print_end': {'gcode': '\nEND_PRINT', 'description': 'End print job and power off motion system'}, 'gcode_macro get_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set output_txt = ["Timelapse Setup:"] %}\n{% set _dummy = output_txt.append("enable: %s" % tl.enable) %}\n{% set _dummy = output_txt.append("park: %s" % tl.park.enable) %}\n{% if tl.park.enable %}\n{% set _dummy = output_txt.append("park position: %s time: %s s" % (tl.park.pos, tl.park.time)) %}\n{% set _dummy = output_txt.append("park cord x:%s y:%s dz:%s" % (tl.park.coord.x, tl.park.coord.y, tl.park.coord.dz)) %}\n{% set _dummy = output_txt.append("travel speed: %s mm/s" % tl.speed.travel) %}\n{% endif %}\n{% set _dummy = output_txt.append("fw_retract: %s" % tl.extruder.fw_retract) %}\n{% if not tl.extruder.fw_retract %}\n{% set _dummy = output_txt.append("retract: %s mm speed: %s mm/s" % (tl.extruder.retract, tl.speed.retract)) %}\n{% set _dummy = output_txt.append("extrude: %s mm speed: %s mm/s" % (tl.extruder.extrude, tl.speed.extrude)) %}\n{% endif %}\n{% set _dummy = output_txt.append("verbose: %s" % tl.verbose) %}\n{action_respond_info(output_txt|join("\\n"))}', 'description': 'Print the Timelapse setup'}, 'gcode_macro _set_timelapse_setup': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set round_bed = True if printer.configfile.settings.printer.kinematics is in [\'delta\',\'polar\',\'rotary_delta\',\'winch\']\nelse False %}\n{% set park = {\'min\'   : {\'x\': (min.x / 1.42)|round(3) if round_bed else min.x|round(3),\n\'y\': (min.y / 1.42)|round(3) if round_bed else min.y|round(3)},\n\'max\'   : {\'x\': (max.x / 1.42)|round(3) if round_bed else max.x|round(3),\n\'y\': (max.y / 1.42)|round(3) if round_bed else max.y|round(3)},\n\'center\': {\'x\': (max.x-(max.x-min.x)/2)|round(3),\n\'y\': (max.y-(max.y-min.y)/2)|round(3)}} %}\n\n{% if params.ENABLE %}\n{% if params.ENABLE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=enable VALUE={True if params.ENABLE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("ENABLE=%s not supported. Allowed values are [True, False]" % params.ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.VERBOSE %}\n{% if params.VERBOSE|lower is in [\'true\', \'false\'] %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=verbose VALUE={True if params.VERBOSE|lower == \'true\' else False}\n{% else %}\n{action_raise_error("VERBOSE=%s not supported. Allowed values are [True, False]" % params.VERBOSE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_X %}\n{% if params.CUSTOM_POS_X|float >= min.x and params.CUSTOM_POS_X|float <= max.x %}\n{% set _dummy = tl.park.custom.update({\'x\':params.CUSTOM_POS_X|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_X=%s must be within [%s - %s]" % (params.CUSTOM_POS_X, min.x, max.x))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_Y %}\n{% if params.CUSTOM_POS_Y|float >= min.y and params.CUSTOM_POS_Y|float <= max.y %}\n{% set _dummy = tl.park.custom.update({\'y\':params.CUSTOM_POS_Y|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_Y=%s must be within [%s - %s]" % (params.CUSTOM_POS_Y, min.y, max.y))}\n{% endif %}\n{% endif %}\n{% if params.CUSTOM_POS_DZ %}\n{% if params.CUSTOM_POS_DZ|float >= min.z and params.CUSTOM_POS_DZ|float <= max.z %}\n{% set _dummy = tl.park.custom.update({\'dz\':params.CUSTOM_POS_DZ|float|round(3)}) %}\n{% else %}\n{action_raise_error("CUSTOM_POS_DZ=%s must be within [%s - %s]" % (params.CUSTOM_POS_DZ, min.z, max.z))}\n{% endif %}\n{% endif %}\n{% if params.PARK_ENABLE %}\n{% if params.PARK_ENABLE|lower is in [\'true\', \'false\'] %}\n{% set _dummy = tl.park.update({\'enable\':True if params.PARK_ENABLE|lower == \'true\' else False}) %}\n{% else %}\n{action_raise_error("PARK_ENABLE=%s not supported. Allowed values are [True, False]" % params.PARK_ENABLE|capitalize)}\n{% endif %}\n{% endif %}\n{% if params.PARK_POS %}\n{% if params.PARK_POS|lower is in [\'center\',\'front_left\',\'front_right\',\'back_left\',\'back_right\',\'custom\',\'x_only\',\'y_only\'] %}\n{% set dic = {\'center\'      : {\'x\': park.center.x   , \'y\': park.center.y   , \'dz\': 1                },\n\'front_left\'  : {\'x\': park.min.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'front_right\' : {\'x\': park.max.x      , \'y\': park.min.y      , \'dz\': 0                },\n\'back_left\'   : {\'x\': park.min.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'back_right\'  : {\'x\': park.max.x      , \'y\': park.max.y      , \'dz\': 0                },\n\'custom\'      : {\'x\': tl.park.custom.x, \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz},\n\'x_only\'      : {\'x\': tl.park.custom.x, \'y\': \'none\'          , \'dz\': tl.park.custom.dz},\n\'y_only\'      : {\'x\': \'none\'          , \'y\': tl.park.custom.y, \'dz\': tl.park.custom.dz}} %}\n{% set _dummy = tl.park.update({\'pos\':params.PARK_POS|lower}) %}\n{% set _dummy = tl.park.update({\'coord\':dic[tl.park.pos]}) %}\n{% else %}\n{action_raise_error("PARK_POS=%s not supported. Allowed values are [CENTER, FRONT_LEFT, FRONT_RIGHT, BACK_LEFT, BACK_RIGHT, CUSTOM, X_ONLY, Y_ONLY]"\n% params.PARK_POS|upper)}\n{% endif %}\n{% endif %}\n{% if params.PARK_TIME %}\n{% if params.PARK_TIME|float >= 0.0 %}\n{% set _dummy = tl.park.update({\'time\':params.PARK_TIME|float|round(3)}) %}\n{% else %}\n{action_raise_error("PARK_TIME=%s must be a positive number" % params.PARK_TIME)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=park VALUE="{tl.park}"\n{% if params.TRAVEL_SPEED %}\n{% if params.TRAVEL_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'travel\':params.TRAVEL_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("TRAVEL_SPEED=%s must be larger than 0" % params.TRAVEL_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_SPEED %}\n{% if params.RETRACT_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'retract\':params.RETRACT_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_SPEED=%s must be larger than 0" % params.RETRACT_SPEED)}\n{% endif %}\n{% endif %}\n{% if params.EXTRUDE_SPEED %}\n{% if params.EXTRUDE_SPEED|float > 0.0 %}\n{% set _dummy = tl.speed.update({\'extrude\':params.EXTRUDE_SPEED|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_SPEED=%s must be larger than 0" % params.EXTRUDE_SPEED)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=speed VALUE="{tl.speed}"\n{% if params.EXTRUDE_DISTANCE %}\n{% if params.EXTRUDE_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'extrude\':params.EXTRUDE_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("EXTRUDE_DISTANCE=%s must be specified as positiv number" % params.EXTRUDE_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.RETRACT_DISTANCE %}\n{% if params.RETRACT_DISTANCE|float >= 0.0 %}\n{% set _dummy = tl.extruder.update({\'retract\':params.RETRACT_DISTANCE|float|round(3)}) %}\n{% else %}\n{action_raise_error("RETRACT_DISTANCE=%s must be specified as positiv number" % params.RETRACT_DISTANCE)}\n{% endif %}\n{% endif %}\n{% if params.FW_RETRACT %}\n{% if params.FW_RETRACT|lower is in [\'true\', \'false\'] %}\n{% if \'firmware_retraction\' in printer.configfile.settings %}\n{% set _dummy = tl.extruder.update({\'fw_retract\': True if params.FW_RETRACT|lower == \'true\' else False}) %}\n{% else %}\n{% set _dummy = tl.extruder.update({\'fw_retract\':False}) %}\n{% if params.FW_RETRACT|capitalize == \'True\' %}\n{action_raise_error("[firmware_retraction] not defined in printer.cfg. Can not enable fw_retract")}\n{% endif %}\n{% endif %}\n{% else %}\n{action_raise_error("FW_RETRACT=%s not supported. Allowed values are [True, False]" % params.FW_RETRACT|capitalize)}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=extruder VALUE="{tl.extruder}"\n{% if printer.configfile.settings[\'gcode_macro pause\'] is defined %}\n{% set _dummy = tl.macro.update({\'pause\': printer.configfile.settings[\'gcode_macro pause\'].rename_existing}) %}\n{% endif %}\n{% if printer.configfile.settings[\'gcode_macro resume\'] is defined %}\n{% set _dummy = tl.macro.update({\'resume\': printer.configfile.settings[\'gcode_macro resume\'].rename_existing}) %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=macro VALUE="{tl.macro}"', 'description': 'Set user parameters for timelapse'}, 'gcode_macro timelapse_take_frame': {'gcode': '\n{% set hyperlapse = True if params.HYPERLAPSE and params.HYPERLAPSE|lower ==\'true\' else False %}\n{% if enable %}\n{% if (hyperlapse and printer[\'gcode_macro HYPERLAPSE\'].run) or\n(not hyperlapse and not printer[\'gcode_macro HYPERLAPSE\'].run) %}\n{% if park.enable %}\n{% set pos = {\'x\': \'X\' + park.coord.x|string if park.pos != \'y_only\' else \'\',\n\'y\': \'Y\' + park.coord.y|string if park.pos != \'x_only\' else \'\',\n\'z\': \'Z\'+ [printer.gcode_move.gcode_position.z + park.coord.dz, printer.toolhead.axis_maximum.z]|min|string} %}\n{% set restore = {\'absolute\': {\'coordinates\': printer.gcode_move.absolute_coordinates,\n\'extrude\'    : printer.gcode_move.absolute_extrude},\n\'speed\'   : printer.gcode_move.speed,\n\'e\'       : printer.gcode_move.gcode_position.e,\n\'factor\'  : {\'speed\'  : printer.gcode_move.speed_factor,\n\'extrude\': printer.gcode_move.extrude_factor}} %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=restore VALUE="{restore}"\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, minimum extruder temperature not reached!")}{% endif %}\n{% else %}\n{% if extruder.fw_retract %}\nG10\n{% else %}\nM83\nG0 E-{extruder.retract} F{speed.retract * 60}\n{% endif %}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=True\n{macro.pause}\nSET_GCODE_OFFSET X=0 Y=0\nG90\n{% if "xyz" not in printer.toolhead.homed_axes %}\n{% if verbose %}{action_respond_info("Timelapse: Warning, axis not homed yet!")}{% endif %}\n{% else %}\nG0 {pos.x} {pos.y} {pos.z} F{speed.travel * 60}\n{% endif %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=takingframe VALUE=True\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\nM400\n{% endif %}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE={hyperlapse}\n{% endif %}\n{% else %}\n{% if verbose %}{action_respond_info("Timelapse: disabled, take frame ignored")}{% endif %}\n{% endif %}', 'description': 'Take Timelapse shoot', 'variable_enable': 'False', 'variable_takingframe': 'False', 'variable_park': "{'enable': False,\n'pos'   : 'center',\n'time'  : 0.1,\n'custom': {'x': 0, 'y': 0, 'dz': 0},\n'coord' : {'x': 0, 'y': 0, 'dz': 0}}", 'variable_extruder': "{'fw_retract': False,\n'retract': 1.0,\n'extrude': 1.0}", 'variable_speed': "{'travel': 100,\n'retract': 15,\n'extrude': 15}", 'variable_verbose': 'True', 'variable_restore': "{'absolute': {'coordinates': True, 'extrude': True}, 'speed': 1500, 'e':0, 'factor': {'speed': 1.0, 'extrude': 1.0}}", 'variable_macro': "{'pause': 'PAUSE', 'resume': 'RESUME'}", 'variable_is_paused': 'False'}, 'gcode_macro _timelapse_new_frame': {'gcode': '\n{action_call_remote_method("timelapse_newframe",\nmacropark=printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'].park,\nhyperlapse=params.HYPERLAPSE)}', 'description': 'action call for timelapse shoot. must be a seperate macro'}, 'delayed_gcode _wait_timelapse_take_frame': {'gcode': '\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% set factor = {\'speed\': printer.gcode_move.speed_factor, \'extrude\': printer.gcode_move.extrude_factor} %}\n{% if tl.takingframe %}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_TAKE_FRAME DURATION=0.5\n{% else %}\n{tl.macro.resume} VELOCITY={tl.speed.travel}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_TAKE_FRAME VARIABLE=is_paused VALUE=False\n{% if not printer[printer.toolhead.extruder].can_extrude %}\n{action_respond_info("Timelapse: Warning minimum extruder temperature not reached!")}\n{% else %}\n{% if tl.extruder.fw_retract %}\nG11\n{% else %}\nG0 E{tl.extruder.extrude} F{tl.speed.extrude * 60}\nG0 F{tl.restore.speed}\n{% if tl.restore.absolute.extrude %}\nM82\nG92 E{tl.restore.e}\n{% endif %}\n{% endif %}\n{% endif %}\n{% if tl.restore.factor.speed   != factor.speed   %} M220 S{(factor.speed*100)|round(0)}   {% endif %}\n{% if tl.restore.factor.extrude != factor.extrude %} M221 S{(factor.extrude*100)|round(0)} {% endif %}\n{% if not tl.restore.absolute.coordinates %} G91 {% endif %}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro hyperlapse': {'gcode': '\n{% set cycle = params.CYCLE|default(30)|int %}\n{% if params.ACTION and params.ACTION|lower == \'start\' %}\n{action_respond_info("Hyperlapse: frames started (Cycle %d sec)" % cycle)}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=True\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=cycle VALUE={cycle}\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True\n{% elif params.ACTION and params.ACTION|lower == \'stop\' %}\n{% if run %}{action_respond_info("Hyperlapse: frames stopped")}{% endif %}\nSET_GCODE_VARIABLE MACRO=HYPERLAPSE VARIABLE=run VALUE=False\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION=0\n{% else %}\n{action_raise_error("Hyperlapse: No valid input parameter\nUse:\n- HYPERLAPSE ACTION=START [CYCLE=time]\n- HYPERLAPSE ACTION=STOP")}\n{% endif %}', 'description': 'Start/Stop a hyperlapse recording', 'variable_cycle': '0', 'variable_run': 'False'}, 'delayed_gcode _hyperlapse_loop': {'gcode': '\nUPDATE_DELAYED_GCODE ID=_HYPERLAPSE_LOOP DURATION={printer["gcode_macro HYPERLAPSE"].cycle}\nTIMELAPSE_TAKE_FRAME HYPERLAPSE=True', 'initial_duration': 0.0}, 'gcode_macro timelapse_render': {'gcode': '\n{action_respond_info("Timelapse: Rendering started")}\n{action_call_remote_method("timelapse_render", byrendermacro="True")}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=render VALUE=True\n{printer.configfile.settings[\'gcode_macro pause\'].rename_existing}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5', 'description': 'Render Timelapse video and wait for the result', 'variable_render': 'False', 'variable_run_identifier': '0'}, 'delayed_gcode _wait_timelapse_render': {'gcode': '\n{% set ri = printer[\'gcode_macro TIMELAPSE_RENDER\'].run_identifier % 4 %}\nSET_GCODE_VARIABLE MACRO=TIMELAPSE_RENDER VARIABLE=run_identifier VALUE={ri + 1}\n{% if printer[\'gcode_macro TIMELAPSE_RENDER\'].render %}\nM117 Rendering {[\'-\',\'\\\\\',\'|\',\'/\'][ri]}\nUPDATE_DELAYED_GCODE ID=_WAIT_TIMELAPSE_RENDER DURATION=0.5\n{% else %}\n{action_respond_info("Timelapse: Rendering finished")}\nM117\n{printer.configfile.settings[\'gcode_macro resume\'].rename_existing}\n{% endif %}', 'initial_duration': 0.0}, 'gcode_macro test_stream_delay': {'gcode': '\n{% set min = printer.toolhead.axis_minimum %}\n{% set max = printer.toolhead.axis_maximum %}\n{% set act = printer.toolhead.position %}\n{% set tl = printer[\'gcode_macro TIMELAPSE_TAKE_FRAME\'] %}\n{% if act.z > 5.0 %}\nG0 X{min.x + 5.0} F{tl.speed.travel|int * 60}\nG0 X{(max.x-min.x)/2}\nG4 P{tl.park.time|float * 1000}\n_TIMELAPSE_NEW_FRAME HYPERLAPSE=FALSE\nG0 X{max.x - 5.0}\n{% else %}\n{action_raise_error("Toolhead z %.3f to low. Please place head above z = 5.0" % act.z)}\n{% endif %}', 'description': 'Helper macro to find stream and park delay'}, 'gcode_macro var_model': {'gcode': '', 'description': 'G-Code macro', 'variable_name': "'CETUS2'", 'variable_model': '2', 'variable_extrudr_num': '2', 'variable_doorcheck': '0', 'variable_filacheck': '0', 'variable_uart': '0', 'variable_bedpower': '0', 'variable_expower': '0'}, 'fan': {'max_power': 1.0, 'kick_start_time': 0.1, 'off_below': 0.0, 'cycle_time': 0.01, 'hardware_pwm': False, 'shutdown_speed': 0.0, 'pin': 'FAN_PT_MDCOOL'}, 'output_pin beep': {'pwm': False, 'pin': 'BEEP_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'output_pin power': {'pwm': False, 'pin': 'POWERON_PIN', 'maximum_mcu_duration': 0.0, 'value': 1.0, 'shutdown_value': 0.0}, 'output_pin light': {'pwm': False, 'pin': 'LIGHT_PIN', 'maximum_mcu_duration': 0.0, 'value': 0.0, 'shutdown_value': 0.0}, 'gcode_arcs': {'resolution': 1.0}, 'respond': {'default_type': 'echo', 'default_prefix': 'echo:'}, 'force_move': {'enable_force_move': True}, 'save_variables': {'filename': '/home/tier/printer_data/config/variables.cfg'}, 'bed_mesh': {'probe_count': [3, 4], 'mesh_min': [10.0, 10.0], 'mesh_max': [190.0, 290.0], 'mesh_pps': [2, 2], 'algorithm': 'lagrange', 'bicubic_tension': 0.2, 'horizontal_move_z': 3.0, 'speed': 100.0, 'fade_start': 1.0, 'fade_end': 0.0, 'split_delta_z': 0.025, 'move_check_distance': 5.0}, 'bed_mesh default': {'version': 1, 'points': [[0.291875, 0.141875, -0.066875], [-0.005, -0.126875, -0.30375], [-0.065625, -0.15125, -0.245], [0.086875, 0.011875, -0.01625]], 'min_x': 10.0, 'max_x': 190.0, 'min_y': 10.0, 'max_y': 289.99, 'x_count': 3, 'y_count': 4, 'mesh_x_pps': 2, 'mesh_y_pps': 2, 'algo': 'lagrange', 'tension': 0.2}, 'heater_bed': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'BED_SENSOR', 'min_temp': -100.0, 'max_temp': 10000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 49.054, 'pid_ki': 1.112, 'pid_kd': 540.818, 'heater_pin': 'BED_HEAT', 'pwm_cycle_time': 0.1}, 'verify_heater heater_bed': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 60.0}, 'heater_generic mainboard': {'sensor_type': 'V510RNTC100K10KRG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'ADC_SENSOR', 'min_temp': -100.0, 'max_temp': 1000.0, 'min_extrude_temp': 170.0, 'max_power': 1.0, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 53.867, 'pid_ki': 0.647, 'pid_kd': 1121.107, 'heater_pin': 'FAN_MB_COOL', 'pwm_cycle_time': 0.1, 'gcode_id': 'MB'}, 'verify_heater mainboard': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'input_shaper': {'shaper_type': 'mzv', 'shaper_type_x': 'mzv', 'damping_ratio_x': 0.1, 'shaper_freq_x': 54.2, 'shaper_type_y': '2hump_ei', 'damping_ratio_y': 0.1, 'shaper_freq_y': 43.2}, 'printer': {'max_velocity': 200.0, 'max_accel': 8000.0, 'max_accel_to_decel': 5000.0, 'square_corner_velocity': 5.0, 'buffer_time_low': 1.0, 'buffer_time_high': 2.0, 'buffer_time_start': 0.25, 'move_flush_time': 0.05, 'kinematics': 'cartesian', 'max_z_velocity': 10.0, 'max_z_accel': 1000.0}, 'stepper_x': {'step_pin': 'X_CP', 'dir_pin': 'X_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!X_EN', 'endstop_pin': 'X_LIM', 'position_endstop': -1.0, 'position_min': -2.0, 'position_max': 200.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 5.0, 'homing_positive_dir': False}, 'stepper_y': {'step_pin': 'Y_CP', 'dir_pin': 'Y_DIR', 'rotation_distance': 40.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'step_pulse_duration': 8e-06, 'enable_pin': '!Y_EN', 'endstop_pin': '!Y_LIM', 'position_endstop': 35.0, 'position_min': -2.0, 'position_max': 300.0, 'homing_speed': 50.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 50.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'stepper_z': {'step_pin': 'Z_CP', 'dir_pin': 'Z_DIR', 'rotation_distance': 4.0, 'microsteps': 32, 'full_steps_per_rotation': 200, 'gear_ratio': [], 'enable_pin': '!Z_EN', 'endstop_pin': '!Z_LIM', 'position_endstop': -0.32, 'position_min': -3.0, 'position_max': 305.0, 'homing_speed': 15.0, 'second_homing_speed': 5.0, 'homing_retract_speed': 15.0, 'homing_retract_dist': 15.0, 'homing_positive_dir': False}, 'extruder': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'B_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'B_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'B_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'B_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'B_EN'}, 'verify_heater extruder': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}, 'extruder1': {'sensor_type': 'V51RNTC100K510RG', 'adc_voltage': 3.3, 'voltage_offset': 0.0, 'sensor_pin': 'C_SENSOR', 'min_temp': -100.0, 'max_temp': 3000.0, 'min_extrude_temp': 170.0, 'max_power': 0.7, 'smooth_time': 1.0, 'control': 'pid', 'pid_kp': 11.675, 'pid_ki': 0.463, 'pid_kd': 73.55, 'heater_pin': 'C_HEAT', 'pwm_cycle_time': 0.1, 'nozzle_diameter': 0.4, 'filament_diameter': 1.75, 'max_extrude_cross_section': 20.0, 'max_extrude_only_velocity': 50000.0, 'max_extrude_only_accel': 5000.0, 'max_extrude_only_distance': 100.0, 'instantaneous_corner_velocity': 10.0, 'step_pin': 'C_CP', 'pressure_advance': 0.2, 'pressure_advance_smooth_time': 0.15, 'dir_pin': 'C_DIR', 'rotation_distance': 29.0, 'microsteps': 32, 'full_steps_per_rotation': 48, 'gear_ratio': [[50.0, 1.0]], 'step_pulse_duration': 2e-06, 'enable_pin': 'C_EN'}, 'verify_heater extruder1': {'hysteresis': 5.0, 'max_error': 120.0, 'heating_gain': 2.0, 'check_gain_time': 20.0}}, 'warnings': [], 'save_config_pending': False, 'save_config_pending_items': {}}}
2024-04-20 15:18:11,319 [printer.py:reinit()] - Klipper version: v0.12.0-9-gbb4711c5-dirty
2024-04-20 15:18:11,319 [printer.py:reinit()] - # Extruders: 2
2024-04-20 15:18:11,320 [printer.py:reinit()] - # Temperature devices: 2
2024-04-20 15:18:11,320 [printer.py:reinit()] - # Fans: 1
2024-04-20 15:18:11,320 [printer.py:reinit()] - # Output pins: 3
2024-04-20 15:18:11,320 [printer.py:reinit()] - # Leds: 0
2024-04-20 15:18:11,362 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/gcode/help
2024-04-20 15:18:11,365 [KlippyWebsocket.py:object_subscription()] - Sending printer.objects.subscribe
2024-04-20 15:18:11,858 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/printer/objects/query?bed_mesh&configfile&display_status&extruder&fan&gcode_move&heater_bed&idle_timeout&pause_resume&print_stats&toolhead&virtual_sdcard&webhooks&motion_report&firmware_retraction&exclude_object&manual_probe&extruder&extruder1&heater_bed&heater_generic MAINBOARD&fan&output_pin BEEP&output_pin POWER&output_pin LIGHT
2024-04-20 15:18:11,880 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/temperature_store
2024-04-20 15:18:11,913 [printer.py:init_temp_store()] - Temp store: ['heater_bed', 'heater_generic MAINBOARD', 'extruder', 'extruder1']
2024-04-20 15:18:11,928 [KlippyRest.py:_do_request()] - Sending request to http://127.0.0.1:7125/server/config
2024-04-20 15:18:11,930 [screen.py:init_tempstore()] - Temperature store size: 1200
2024-04-20 15:18:11,931 [files.py:initialize()] - Gcodes path: /home/tier/printer_data/gcodes
2024-04-20 15:18:11,931 [KlippyWebsocket.py:get_file_list()] - Sending server.files.list
2024-04-20 15:18:11,932 [screen.py:init_printer()] - Printer initialized
2024-04-20 15:18:11,933 [printer.py:change_state()] - Changing state from 'disconnected' to 'ready'
2024-04-20 15:18:11,934 [printer.py:change_state()] - Adding callback for state: ready
2024-04-20 15:18:11,941 [screen.py:_load_panel()] - Loading panel: main_menu
2024-04-20 15:18:12,078 [main_menu.py:__init__()] - ### Making MainMenu
2024-04-20 15:18:12,095 [main_menu.py:add_device()] - Adding device: extruder
2024-04-20 15:18:12,106 [main_menu.py:add_device()] - Adding device: extruder1
2024-04-20 15:18:12,116 [main_menu.py:add_device()] - Adding device: heater_bed
2024-04-20 15:18:12,128 [main_menu.py:add_device()] - Adding device: heater_generic MAINBOARD
2024-04-20 15:18:12,191 [screen.py:attach_panel()] - Current panel hierarchy: main_menu
2024-04-23 03:24:18,826 [KlippyWebsocket.py:get_file_dir()] - Sending server.files.directory
